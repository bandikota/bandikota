(function(){var INSTALL_TTM_SCRIPTS_PARAMS={"account":"tinkoff-pwa","container":"main","hash":"6b1e8a31-b9bb-4928-adf1-279ca372c5b5","bundles":{},"storageUrl":"https://acdn.tinkoff.ru/twa/ttm"};(function(){var T=function(t,o){return function(){return t&&(o=t(t=0)),o}};var Y=function(t,o){return function(){return o||t((o={exports:{}}).exports,o),o.exports}};var h,m,_,D,j,S,E=T(function(){h="_ttm",m={LOGGER:"logger",BUNDLES:"bundles",EVENTS_QUEUE:"eventsQueue",SESSION:"session",RUNTIME_API:"$",RUN:"run",BUILD_ID:"buildId"},_={INSTALLED:"ttm:ttm-installed"},D="_",j="ttmBuild",S={PUBLICATIONS:"publications",PROD_BUILDS:"builds",ENVIRONMENTS:"environments"}});function A(t,o){(o==null||o>t.length)&&(o=t.length);for(var n=0,e=new Array(o);n<o;n++)e[n]=t[n];return e}function J(t){if(Array.isArray(t))return A(t)}function q(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function X(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t){return J(t)||X(t)||K(t)||Z()}function K(t,o){if(!!t){if(typeof t=="string")return A(t,o);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,o)}}var v,O=T(function(){v=function(){"use strict";function t(){q(this,t),this.buildId="not-set"}var o=t.prototype;return o.stdout=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];try{var c;if(!window.localStorage||typeof window.localStorage.getItem!="function"||!window.localStorage.getItem(t.ttmLoggerFlagName))return;(c=console).log.apply(c,["%c%s","background-color: ".concat(t.stdoutTypeColorMap[e],"; color: white; padding: 2px 5px; border-radius: 5px; font-weight: 600; font-size: 12px;"),"TTM:".concat(e)].concat(g(i)))}catch(l){}},o.loadingError=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["error"].concat(g(r)))},o.unhandledError=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["unhandledError"].concat(g(r)))},o.unhandledRejection=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["unhandledRejection"].concat(g(r)))},o.error=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["error"].concat(g(r)))},o.warn=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["warn"].concat(g(r)))},o.info=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["info"].concat(g(r)))},o.log=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["log"].concat(g(r)))},o.debug=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.stdout.apply(this,["debug"].concat(g(r)))},o.sendData=function(e){this.stdout("sendData",e)},t}();v.ttmLoggerFlagName="_ttm_logger_";v.stdoutTypeColorMap={unhandledError:"darkred",unhandledRejection:"darkblue",error:"red",warn:"orange",info:"deepskyblue",log:"lightgray",debug:"green",sendData:"lightgray"}});var k,M,x,N=T(function(){E();k=function(t,o){var n,e,r,i;return(i=(e=(n=t.split(o)[1])===null||n===void 0?void 0:n.split("="))===null||e===void 0||(r=e[1])===null||r===void 0?void 0:r.split("&"))===null||i===void 0?void 0:i[0]},M=function(t){var o=k(t,j);if(!o)return null;var n=o.split(D);if(n.length!==3&&n.length!==4)return null;var e=n[0],r=n[1],i=n[2],u=n.length===4?n[3]:null;return{hash:e,container:i,env:u,account:r}},x=function(t){return new Promise(function(o,n){var e=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.src=t,r.crossOrigin="anonymous",e.appendChild(r),r.onload=function(){return o(r)},r.onerror=function(){return n(new Error("Error when loading ".concat(t," script")))}})}});function C(t,o,n,e,r,i,u){try{var c=t[i](u),l=c.value}catch(a){n(a);return}c.done?o(l):Promise.resolve(l).then(e,r)}function rr(t){return function(){var o=this,n=arguments;return new Promise(function(e,r){var i=t.apply(o,n);function u(l){C(i,e,r,u,c,"next",l)}function c(l){C(i,e,r,u,c,"throw",l)}u(void 0)})}}var tr,U,B=T(function(){E();O();N();tr=function(t,o){var n,e,r,i,u={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(a){return function(s){return l([a,s])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,e&&(r=a[0]&2?e.return:a[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,a[1])).done)return r;switch(e=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,e=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(r=u.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){u=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){u.label=a[1];break}if(a[0]===6&&u.label<r[1]){u.label=r[1],r=a;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(a);break}r[2]&&u.ops.pop(),u.trys.pop();continue}a=o.call(t,u)}catch(s){a=[6,s],e=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},U=function(){var t=rr(function(o){var n,e,r,i,u,c,l,a,s,d,y=arguments;return tr(this,function(f){switch(f.label){case 0:n=o.account,e=o.container,r=o.hash,i=o.storageUrl,u=y.length>1&&y[1]!==void 0?y[1]:new v,f.label=1;case 1:f.trys.push([1,6,,7]),c="".concat(i,"/").concat(n,"/").concat(S.PROD_BUILDS,"/").concat(e,"/").concat(r),l="".concat(n,"/").concat(e,"/").concat(r),a=M(window.location.search),a&&(a.env===null?c="".concat(i,"/").concat(a.account,"/").concat(S.PROD_BUILDS,"/").concat(a.container,"/").concat(a.hash):c="".concat(i,"/").concat(a.account,"/").concat(S.ENVIRONMENTS,"/").concat(a.env,"/").concat(a.container,"/").concat(a.hash),l="".concat(a.env,":").concat(a.account,"/").concat(a.container,"/").concat(a.hash)),u.buildId=l,window[h][m.BUILD_ID]=l,window[h][m.LOGGER]=u,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,x("".concat(c,"/ttm.js"))];case 3:return f.sent(),[3,5];case 4:return s=f.sent(),u.loadingError(s),[2];case 5:return window[h][m.RUN](),document.dispatchEvent(new CustomEvent(_.INSTALLED)),[3,7];case 6:return d=f.sent(),u.error(d),[3,7];case 7:return[2]}})});return function(n){return t.apply(this,arguments)}}()});function P(t,o){(o==null||o>t.length)&&(o=t.length);for(var n=0,e=new Array(o);n<o;n++)e[n]=t[n];return e}function nr(t){if(Array.isArray(t))return P(t)}function er(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t,o,n,e,r,i,u){try{var c=t[i](u),l=c.value}catch(a){n(a);return}c.done?o(l):Promise.resolve(l).then(e,r)}function or(t){return function(){var o=this,n=arguments;return new Promise(function(e,r){var i=t.apply(o,n);function u(l){G(i,e,r,u,c,"next",l)}function c(l){G(i,e,r,u,c,"throw",l)}u(void 0)})}}function ar(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function ir(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function w(t,o,n){return typeof Reflect!="undefined"&&Reflect.get?w=Reflect.get:w=function(r,i,u){var c=gr(r,i);if(!!c){var l=Object.getOwnPropertyDescriptor(c,i);return l.get?l.get.call(u):l.value}},w(t,o,n||t)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},p(t)}function ur(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&L(t,o)}function cr(t,o){return o!=null&&typeof Symbol!="undefined"&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](t):t instanceof o}function lr(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(t){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{},e=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(e=e.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),e.forEach(function(r){ir(t,r,n[r])})}return t}function fr(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,e)}return n}function dr(t,o){return o=o!=null?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):fr(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))}),t}function hr(t,o){return o&&(pr(o)==="object"||typeof o=="function")?o:er(t)}function L(t,o){return L=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},L(t,o)}function gr(t,o){for(;!Object.prototype.hasOwnProperty.call(t,o)&&(t=p(t),t!==null););return t}function b(t){return nr(t)||lr(t)||yr(t)||sr()}function yr(t,o){if(!!t){if(typeof t=="string")return P(t,o);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,o)}}function mr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function vr(t){var o=mr();return function(){var e=p(t),r;if(o){var i=p(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return hr(this,r)}}var pr,br,I,wr,Tr,F,$=T(function(){E();O();pr=function(t){return t&&typeof Symbol!="undefined"&&t.constructor===Symbol?"symbol":typeof t};br=function(t,o){var n,e,r,i,u={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(a){return function(s){return l([a,s])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,e&&(r=a[0]&2?e.return:a[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,a[1])).done)return r;switch(e=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,e=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(r=u.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){u=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){u.label=a[1];break}if(a[0]===6&&u.label<r[1]){u.label=r[1],r=a;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(a);break}r[2]&&u.ops.pop(),u.trys.pop();continue}a=o.call(t,u)}catch(s){a=[6,s],e=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},I=function(t){try{return JSON.stringify(t)}catch(o){return"Stringify error while log try"}},wr=function(t){return cr(t,Error)?{message:t.message,name:t.name,stack:t.stack}:t},Tr=function(t){return t&&Array.isArray(t)&&t[0]&&typeof t[0]=="object"&&"message"in t[0]?t[0].message:I(t)},F=function(t){"use strict";ur(n,t);var o=vr(n);function n(){ar(this,n);var r,i,u;return r=o.call(this),r.sendErrorProbability=1,r.sendDataProbability=.01,r.errorLimit=50,r.errorCount=0,r.session=((i=window[h])===null||i===void 0?void 0:i[m.SESSION])||{noSession:!0,id:"".concat(Date.now(),"-").concat(Math.round(Math.random()*1e3))},r.tinkoffLoggerUrl=((u=window[h])===null||u===void 0?void 0:u.tinkoffLoggerUrl)||"https://www.tinkoff.ru/api/front/log/collect",r}var e=n.prototype;return e.sendErrorLog=function(i){for(var u=arguments.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=arguments[l];var a=this;return or(function(){var s,d,y;return br(this,function(f){if(a.errorCount++,a.errorCount>a.errorLimit)return[2];if(Math.random()>a.sendErrorProbability)return[2];try{return y=dr(V({system:"ttm",appName:"ttm"},i),{from:"browser",level:"error",buildId:((s=window[h])===null||s===void 0?void 0:s[m.BUILD_ID])||a.buildId,trackingVersion:(d=window.tracking)===null||d===void 0?void 0:d._version,session:a.session,message:Tr(c),data:I(c.map(wr))}),[2,fetch(a.tinkoffLoggerUrl,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:I(y)}).catch(function(){return null})]}catch(W){return[2,W]}return[2]})})()},e.error=function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];var l;(l=w(p(n.prototype),"error",this)).call.apply(l,[this].concat(b(u))),this.sendErrorLog.apply(this,[{handled:!0,component:"ttm-runtime",errorType:"runtime-error"}].concat(b(u)))},e.loadingError=function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];var l;(l=w(p(n.prototype),"error",this)).call.apply(l,[this].concat(b(u))),this.sendErrorLog.apply(this,[{handled:!0,component:"ttm-bundle-resolver",errorType:"loading-error"}].concat(b(u)))},e.unhandledError=function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];var l;(l=w(p(n.prototype),"unhandledError",this)).call.apply(l,[this].concat(b(u))),this.sendErrorLog.apply(this,[{handled:!1,component:"ttm-*",errorType:"unhandled-error"}].concat(b(u)))},e.unhandledRejection=function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];var l;(l=w(p(n.prototype),"unhandledRejection",this)).call.apply(l,[this].concat(b(u))),this.sendErrorLog.apply(this,[{handled:!1,component:"ttm-*",errorType:"unhandled-rejection"}].concat(b(u)))},e.sendData=function(i){if(!(Math.random()>=this.sendDataProbability))try{var u,c,l,a,s,d,y=V({system:"ttm",appName:"ttm",component:"ttm-runtime",from:"browser",level:"info",buildId:((u=window[h])===null||u===void 0?void 0:u[m.BUILD_ID])||this.buildId,trackingVersion:(c=window.tracking)===null||c===void 0?void 0:c._version,session:this.session,pageData:{productCategory:((l=window.tracking)===null||l===void 0||(a=l.state)===null||a===void 0?void 0:a.productCategory)||"",productName:((s=window.tracking)===null||s===void 0||(d=s.state)===null||d===void 0?void 0:d.productName)||""}},i);return fetch(this.tinkoffLoggerUrl,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:I(y)}).catch(function(){return null})}catch(f){return f}},n}(v)});var z,H=T(function(){O();z=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new v;window.addEventListener("error",function(n){if(!(typeof n!="object"||!n)){var e=n.error,r=n.filename,i=n.lineno,u=n.colno,c=n.message;(typeof r=="string"&&r&&r.includes(t)||e&&typeof e=="object"&&typeof e.stack=="string"&&e.stack.includes(t))&&o.unhandledError({message:c,lineno:i,colno:u},e)}}),window.addEventListener("unhandledrejection",function(n){if(!(!n||typeof n!="object"||!n.reason||typeof n.reason!="object")){var e=n.reason.stack;typeof e=="string"&&e.includes(t)&&o.unhandledRejection(n.reason)}})}});var Ir=Y(function(R){B();$();H();function Q(t,o,n,e,r,i,u){try{var c=t[i](u),l=c.value}catch(a){n(a);return}c.done?o(l):Promise.resolve(l).then(e,r)}function Sr(t){return function(){var o=this,n=arguments;return new Promise(function(e,r){var i=t.apply(o,n);function u(l){Q(i,e,r,u,c,"next",l)}function c(l){Q(i,e,r,u,c,"throw",l)}u(void 0)})}}var Er=R&&R.__generator||function(t,o){var n,e,r,i,u={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function c(a){return function(s){return l([a,s])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,e&&(r=a[0]&2?e.return:a[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,a[1])).done)return r;switch(e=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,e=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(r=u.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){u=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){u.label=a[1];break}if(a[0]===6&&u.label<r[1]){u.label=r[1],r=a;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(a);break}r[2]&&u.ops.pop(),u.trys.pop();continue}a=o.call(t,u)}catch(s){a=[6,s],e=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Or=function(){var t=Sr(function(){var o,n,e,r;return Er(this,function(i){switch(i.label){case 0:o=new F,i.label=1;case 1:return i.trys.push([1,3,,4]),n=INSTALL_TTM_SCRIPTS_PARAMS.storageUrl,e=INSTALL_TTM_SCRIPTS_PARAMS.account,z("".concat(n,"/").concat(e),o),[4,U(INSTALL_TTM_SCRIPTS_PARAMS,o)];case 2:return i.sent(),[3,4];case 3:return r=i.sent(),o.error(r),[3,4];case 4:return[2]}})});return function(){return t.apply(this,arguments)}}();Or()});Ir();})();
})()