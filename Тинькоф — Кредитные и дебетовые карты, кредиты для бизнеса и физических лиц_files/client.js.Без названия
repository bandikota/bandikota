!function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&o[3]>i[1])){a.label=i[1];break}if(6===i[0]&&o[1]>a.label){a.label=o[1],o=i;break}if(o&&o[2]>a.label){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function i(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;i>o;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var a=Array.prototype.slice;function u(e){return"object"==typeof e}function c(e){if(Array.isArray(e))return e.slice();var t={};for(var n in e)t[n]=e[n];return t}function s(e,t,n){return u(e)&&null!==e&&t in e?e[t]:n}function d(e,t,n){var r=t[0],o=t.slice(1);return s(e,r)&&o.length?d(e[r],o,n):s(e,r,n)}function l(e,t,n){return Array.isArray(t)?d(e,t,n):s(e,t,n)}function f(e,t,n){if(e[t]===n)return e;var r=c(e);return r[t]=n,r}function p(e,t,n){if(d(e,t)===n)return e;var r=t[0],o=t.slice(1),i=c(e);return i[r]=o.length?p(r in i?i[r]:{},o,n):n,i}function m(e){for(var t,n,r=arguments,o=arguments.length,i=e,a=1;o>a;a+=2)t=r[a],n=r[a+1],i=Array.isArray(t)?p(i,t,n):f(i,t,n);return i}function v(e,t){if(!(t in e))return e;var n=c(e);return delete n[t],n}function g(e,t){var n=t[0],r=t.slice(1);return r.length?n in e&&g(e[n],r):n in e}function h(e,t){if(!g(e,t))return e;var n=t[0],r=t.slice(1),o=c(e);return 0!==r.length?(o[n]=h(e[n],r),0===Object.keys(o[n]).length&&delete o[n]):delete o[n],o}function y(e){for(var t,n=arguments,r=arguments.length,o=0,i=e;++o<r;)t=n[o],i=Array.isArray(t)?h(i,t):v(i,t);return i}function w(e,t,n){var r=s(e,t);return f(e,t,n.apply(r,[r].concat(a.call(arguments,3))))}function b(e,t,n){var r=d(e,t);return p(e,t,n.apply(r,[r].concat(a.call(arguments,3))))}function k(e,t){return Array.isArray(t)?b.apply(this,arguments):w.apply(this,arguments)}function S(e,t){for(var n,r,o=Object.keys(t),i=o.length,a=-1,s=e;++a<i;)s=u(n=t[r=o[a]])&&null!==n?f(s,r,r in s?S(s[r],n):c(n)):f(s,r,n);return s}function _(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t){var n=[].slice.call(arguments,1);(e[t]||[]).map((function(e){e.apply(void 0,n)})),(e["*"]||[]).map((function(e){e.apply(void 0,[t].concat(n))}))}}}var x={global:"tracking",initialState:{},utilTimeout:2e3,disableJsonp:!1},I=/^\d+(0|s|t)\d+$/,P=["internal_source"],C=5184e3,E=31536e4,O=63072e3;function T(e){var t=e.location.query.parent_url,n=e.get("parseUrl");if(t)return n(t)}var V={name:"url",run:function(e){var n=T(e),r=n||e.location;return n&&(r.frameurl=e.location.pathname),t({},r)}};function M(e,t){if(!t)return e;var n=Object.keys(t).reduce((function(e,n){var r=t[n];return void 0===r||e.push(encodeURIComponent(n)+"="+encodeURIComponent(r)),e}),[]).join("&");if(""===n)return e;var r=e.includes("?")?"&":"?";return""+e+r+n}function j(e){return"string"==typeof e?e:M(e.url,e.params)}function A(e){return M("https://dp.tinkoff.ru/pixel",e)}function N(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))}var D,L,q="undefined"!=typeof window&&"undefined"!=typeof Request&&"keepalive"in new Request(""),R=function(e){return fetch(e,{mode:"no-cors",credentials:"include",keepalive:q}).catch((function(){}))};!function(e){e[e.Essential=1]="Essential",e[e.Functionality=2]="Functionality",e[e.Statistics=4]="Statistics",e[e.Marketing=8]="Marketing"}(D||(D={})),function(e){e[e.PersonalDataProcessing=16]="PersonalDataProcessing"}(L||(L={}));var U=0xfffffffffffff,F={Essential:D.Essential,Functionality:D.Functionality,Statistics:D.Statistics,Marketing:D.Marketing,PersonalDataProcessing:L.PersonalDataProcessing};function W(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce((function(e,t){return function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];return e(t.apply(void 0,n))}}))}var z=function(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype},G=function(){},B="log function is now deprecated, use logger object instead";function H(e){return{warn:e,debug:e,error:e,info:e,log:e}}var J=H(G);var $,K=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var n=this;return function(){for(var r,o=[],i=0;arguments.length>i;i++)o[i]=arguments[i];try{return(r=n.storage)[e].apply(r,o)}catch(e){}return t}},e}(),Y=new K("local"),Q=new K("session"),X=function(e){return!!e&&Array.isArray(e)},Z=function(e){return null==e},ee=X,te=function(e){return"string"==typeof e||e instanceof String},ne=function(e){return null!==e&&"object"==typeof e},re=function(e){switch(!0){case Z(e):return!0;case te(e):return""===e;case ee(e):return 0===e.length;case ne(e):return 0===Object.keys(e).length}return!1},oe=function(e,t){return function n(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return e>o.length?function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.apply(this,o.concat(t))}:t.apply(this,o)}},ie=oe(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n=t,r=0;e.length>r;r++){if(null==n)return;n=n[e[r]]}return n}));function ae(e,t){var n,r=e._prot.context;switch(t.source){case $.State:for(var o=0,i="string"==typeof t.path?[t.path]:t.path;i.length>o;o++){if(void 0!==(n=ie(i[o].split("."),e.state)))break}break;case $.Cookie:n=r.cookies.get(t.name);break;case $.Static:n=t.value;break;case $.Code:n=t.code({tracking:e,context:r,collect:function(t){return ae(e,t)}})}return n}function ue(e){return Array.isArray(e)?e.join(","):String(e)}function ce(e,t,n){var r=(n||{}).itemMapper,o=void 0===r?function(e){return e}:r;return Object.keys(t).reduce((function(n,r){var i=t[r],a=ae(e,i);return void 0===a||i.requiredValues&&!i.requiredValues.every((function(e){return e in n}))||(n[r]=o(a)),n}),{})}!function(e){e.State="state",e.Cookie="cookie",e.Code="code",e.Static="static"}($||($={}));var se=D.Marketing|D.Statistics,de={wuid:{name:"__P__wuid",category:D.Essential,expires:E,subdomains:!0},wuidLC:{name:"__P__wuid_last_update_time",category:D.Statistics,expires:E,subdomains:!0},wuidVisitId:{name:"__P__wuid_visit_id",category:D.Statistics,expires:O,subdomains:!0},wuidVisitPersistence:{name:"__P__wuid_visit_persistence",category:D.Statistics,expires:1800,subdomains:!0},dspId:{name:"dsp_click_id",category:D.Marketing,expires:C,subdomains:!0},tcpaId:{name:"tcpa_click_id",category:D.Marketing,subdomains:!0},pageLanding:{name:"pageLanding",category:D.Statistics,subdomains:!0},taNewOrReturn:{name:"ta_nr",category:D.Statistics,expires:O,subdomains:!0},taUserId:{name:"ta_uid",category:D.Statistics,expires:O,subdomains:!0},taVisitNum:{name:"ta_visit_num",category:D.Statistics,expires:O,subdomains:!0},taVisitStartTs:{name:"ta_visit_start_ts",category:D.Statistics,expires:1800,subdomains:!0},utmSource:{name:"utm_source",category:se,expires:C,subdomains:!0},utmContent:{name:"utm_content",category:se,expires:C,subdomains:!0},utmCampaign:{name:"utm_campaign",category:se,expires:C,subdomains:!0},utmMedium:{name:"utm_medium",category:se,expires:C,subdomains:!0},utmTerm:{name:"utm_term",category:se,expires:C,subdomains:!0},utmDateSet:{name:"utm_date_set",category:se,expires:C,subdomains:!0},sid:{name:"sid",category:se,expires:C,subdomains:!0},wm:{name:"wm",category:se,expires:C,subdomains:!0},ctxSource:{name:"ctx_source",category:se},ctxPosition:{name:"ctx_position",category:se,expires:C,subdomains:!0},ctxBlock:{name:"ctx_block",category:se,expires:C,subdomains:!0},visitorNewOrReturn:{name:"s_nr",category:se,expires:31536e3},yclid:{name:"yclid",category:D.Marketing,subdomains:!0,expires:86400}},le="__utma",fe="userType",pe="psid",me="dmp.id";function ve(){try{return window.orientation?90===Math.abs(Number(window.orientation)):"landscape"===screen.orientation.type.split("-")[0]}catch(e){}return!0}var ge={name:"mobileOrientation",run:function(){return ve()?"landscape":"portrait"},observe:function(e,t){window.addEventListener("orientationchange",t)}},he=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE","ADMINISTRATOR","GOD"],ye=he.indexOf("REGISTERED"),we="Not Logged In",be={name:"userInfo",stateKey:["userId","userStatus"],run:function(e,t){void 0===t&&(t={});var n=t.cookieName,r=t.anonymousId,o=we,i={userId:void 0===r?"1111":r,userStatus:o},a=e.cookies.get(void 0===n?pe:n);return a?e.get("tapi")(e,"session_status?sessionid="+encodeURIComponent(a)).then((function(e){var t=e.payload;return"OK"===e.resultCode?{userId:t.userId,userStatus:he.indexOf(t.accessLevel)<ye?o:"Logged In"}:i})).catch((function(){return i})):Promise.resolve(i)}};var ke={hid:{type:"string",source:$.State,path:"hid"},productCategory:{type:"string",source:$.State,path:"productCategory"},productName:{type:"string",source:$.State,path:"productName"},appName:{type:"string",source:$.State,path:"appName"},wuid:{type:"string",source:$.State,path:"wuid"},userId:{type:"string",source:$.State,path:"uid"},userType:{type:"int",source:$.Code,code:function(e){return{Visitor:0,"Client-Light":10,Applicant:20,"Client-Heavy":30}[e.context.cookies.get(fe)||"Visitor"]||0}},userIsNew:{type:"boolean",source:$.Code,code:function(e){return"new"===e.tracking.state.nr},nullable:!1},wuidVisitId:{type:"string",source:$.State,path:"wuidVisitId"},wuidVisitNum:{type:"int",source:$.State,path:"wuidVisitNum"},visitNumber:{type:"int",source:$.State,path:"visitNum"},visitStartTs:{type:"int",source:$.State,path:"visitStartTs"},userLoggedIn:{type:"boolean",source:$.Code,code:function(e){var t=e.tracking;return t.state.userStatus!==we&&!!t.state.userStatus},nullable:!1},portalUserId:{type:"string",source:$.State,path:"userId"},visitorIsNew:{type:"boolean",source:$.Code,code:function(e){var t=e.context,n=(new Date).getTime(),r=t.cookies.get(de.visitorNewOrReturn.name);if(!r)return t.cookies.set(de.visitorNewOrReturn,n+"-New"),!0;var o=r.split("-");return 18e5>n-Number(o[0])&&"New"===o[1]?(t.cookies.set(de.visitorNewOrReturn,n+"-New"),!0):(t.cookies.set(de.visitorNewOrReturn,n+"-Repeat"),!1)},nullable:!1},pageUrl:{type:"string",source:$.Code,code:function(e){var t=e.tracking;return t.state.url.hostname+t.state.url.pathname},nullable:!1},parentUrlFlag:{type:"boolean",source:$.Code,code:function(e){var t;return!!(null===(t=e.tracking.state.url)||void 0===t?void 0:t.frameurl)},nullable:!1},queryParams:{type:"string",source:$.Code,code:function(e){var t,n=null===(t=e.tracking.state.url)||void 0===t?void 0:t.search;if("string"==typeof n){var r=n.replace(/(?:\?|&)((?:utm_source|utm_term|utm_content|utm_medium|utm_campaign))(?:=|&?)([\w+,.%-]+)/g,""),o=!r.length||"?"!==r.charAt(0)&&"&"!==r.charAt(0)?0:1;return r.substring(o,o+255)}}},queryParamsFull:{type:"string",source:$.State,path:"url.search"},previousPageUrl:{type:"string",source:$.State,path:"previousPage"},frameUrl:{type:"string",source:$.Code,code:function(e){var t,n=e.context;if(null===(t=e.tracking.state.url)||void 0===t?void 0:t.frameurl)return n.location.hostname+n.location.pathname}},referrer:{type:"string",source:$.Code,code:function(){return document.referrer}},pageDomain:{type:"string",source:$.State,path:"url.hostname"},pagePath:{type:"string",source:$.State,path:"url.pathname"},lowCardinalityPagePath:{type:"string",source:$.Code,code:function(e){var t,n=(null===(t=e.tracking.state.url)||void 0===t?void 0:t.pathname)||e.context.location.pathname,r=n.split("/");return-1!==n.indexOf("travel/flights")?r.slice(0,4).join("/"):-1!==n.indexOf("/invest/")||-1!==n.indexOf("/collectmoney/")?r.slice(0,3).join("/"):-1!==n.indexOf("/rm/")?"/rm/id":r.map((function(e){return e.replace(/^(id)?[0-9]{3,}$/,"id")})).join("/")},nullable:!1},pageLanding:{type:"string",source:$.State,path:"pageLanding"},documentUrl:{type:"string",source:$.Code,code:function(e){var t=e.context;return t.location.hostname+t.location.pathname}},documentTitle:{type:"string",source:$.Code,code:function(){return document.title}},documentPath:{type:"string",source:$.Code,code:function(e){return e.context.location.pathname}},queryUtmSource:{type:"string",source:$.State,path:"url.query.utm_source"},queryVariation:{type:"string",source:$.State,path:"url.query.variation"},queryDcoCampaign:{type:"string",source:$.State,path:"url.query.dco_campaign"},utmSource:{type:"string",source:$.State,path:"utmMarkers.utm_source"},utmContent:{type:"string",source:$.Code,code:function(e){var t,n=null===(t=e.tracking.state.utmMarkers)||void 0===t?void 0:t.utm_content;if("string"==typeof n)return n.substring(0,255)}},utmTerm:{type:"string",source:$.State,path:"utmMarkers.utm_term"},utmMedium:{type:"string",source:$.State,path:"utmMarkers.utm_medium"},utmCampaign:{type:"string",source:$.State,path:"utmMarkers.utm_campaign"},sessionUtmSource:{type:"string",source:$.State,path:"sessionUtmMarkers.utm_source"},sessionUtmMedium:{type:"string",source:$.State,path:"sessionUtmMarkers.utm_medium"},sessionUtmCampaign:{type:"string",source:$.State,path:"sessionUtmMarkers.utm_campaign"},sessionMarketingChannel:{type:"string",source:$.State,path:"sessionMarketingChannel"},internalSource:{type:"string",source:$.State,path:"url.query.internal_source"},utmReferrer:{type:"string",source:$.State,path:"url.query.utm_referrer"},webMaster:{type:"string",source:$.State,path:"utmMarkers.wm"},wmSid:{type:"string",source:$.State,path:"utmMarkers.sid"},gaId:{type:"string",source:$.Code,code:function(e){var t;return null===(t=e.context.cookies.get("_ga"))||void 0===t?void 0:t.split(".").slice(1).join(".")}},dcoGeneralId:{type:"string",source:$.State,path:"personalizedLandingMetrics.state.dcoGeneralId"},dcoGeneralMenuId:{type:"string",source:$.Code,code:function(e){var t=e.tracking;if(Array.isArray(t.state.dcoTracking)){var n=t.state.dcoTracking.find((function(e){return e&&"routesMenu"===e.dcoAppliedEntity}));if(n)return n.dcoGeneralId}}},urlBeforeDcoRedirect:{type:"string",source:$.State,path:"dco.beforeRedirectPageUrl"},dcoId:{type:"string",source:$.Cookie,name:"dco.id"},dcoSelectedWith:{type:"string",source:$.State,path:"personalizedLandingMetrics.state.dcoSelectedWith"},dcoAppliedStatus:{type:"string",source:$.State,path:"personalizedLandingMetrics.enrichmentTechInfo.dcoAppliedStatus"},dcoResponseStatus:{type:"string",source:$.State,path:"personalizedLandingMetrics.techInfo.response-status"},dcoResponseTime:{type:"double",source:$.Code,code:function(e){var t,n,r=null===(n=null===(t=e.tracking.state.personalizedLandingMetrics)||void 0===t?void 0:t.techInfo)||void 0===n?void 0:n["response-time"];return isFinite(Number(r))?Number(r):void 0}},dcoGeneralIdBeforeRedirect:{type:"string",source:$.State,path:"personalizedLandingMetrics.dcoVariablesBeforeRedirect.dcoGeneralId"},mobileOrientation:{type:"int",source:$.Code,code:function(){return ve()?0:1},nullable:!1},screenWidth:{type:"int",source:$.Code,code:function(){return window.screen.width},nullable:!1},screenHeight:{type:"int",source:$.Code,code:function(){return window.screen.height},nullable:!1},screenSize:{type:"string",source:$.Code,code:function(){return window.screen.width+" x "+window.screen.height}},viewportHeight:{type:"int",source:$.Code,code:function(){return document.documentElement.clientHeight}},viewportWidth:{type:"int",source:$.Code,code:function(){return document.documentElement.clientWidth}},devicePixelRatio:{type:"double",source:$.Code,code:function(){return window.devicePixelRatio}},remoteAddress:{type:"string",source:$.State,path:"remoteAddress"},layoutMedia:{type:"string",source:$.State,path:"layoutMedia"},uaParserType:{type:"string",source:$.State,path:"uaParserType"},deviceType:{type:"string",source:$.Code,code:function(e){var t=e.tracking;if(t.state.hdRequestInfo)return t.state.hdRequestInfo.ismobile?"Mobile":t.state.hdRequestInfo.istablet?"Tablet":t.state.hdRequestInfo.isconsole?"Console":"Desktop"}},deviceVendor:{type:"string",source:$.State,path:"hdRequestInfo.vendor"},deviceModel:{type:"string",source:$.State,path:"hdRequestInfo.model"},deviceWidth:{type:"int",source:$.State,path:"hdRequestInfo.width"},deviceHeight:{type:"int",source:$.State,path:"hdRequestInfo.height"},deviceDisplaySize:{type:"double",source:$.State,path:"hdRequestInfo.displaysize"},adblockFlag:{type:"boolean",source:$.Code,code:function(e){return"no"!==e.tracking.state.adblock}},dspClickId:{type:"string",source:$.State,path:"dspClickId"},dmpId:{type:"string",source:$.State,path:"dmpId"},dmpSid:{type:"string",source:$.Cookie,name:"dmp.sid"},webTrackingConst:{type:"string",source:$.Static,value:"web-tracking"},errorType:{type:"string",source:$.State,path:"errorType"},pageErrorCode:{type:"int",source:$.Code,code:function(e){var t=e.tracking;return isFinite(Number(t.state.pageErrorCode))?Number(t.state.pageErrorCode):void 0}}},Se={utmContentCid:{type:"string",source:$.Code,code:function(e){var t,n=(0,e.collect)(ke.utmContent);return null===(t=null==n?void 0:n.split("|cid|")[1])||void 0===t?void 0:t.split("|")[0]}}},_e=t(t({},ke),Se),xe=function(){};var Ie=function(){function e(e){void 0===e&&(e={}),this.services={},this._env="u"===(typeof window)[0]?"server":"client";for(var t=0,n=Object.keys(e);n.length>t;t++){var r=n[t];this.bind(r,e[r])}}return Object.defineProperty(e.prototype,"env",{get:function(){return this._env},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.get("location")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookies",{get:function(){if(this._cookiesPubl)return this._cookiesPubl;var e,n,r,o,i=this.services.cookies;if(!i)throw new Error("No cookies service");return this._cookiesPubl=(e=i,n=this.get("consentVault"),r={},o=function(t,n,r){var o,i;e.set(t.name,n,null!==(o=t.expires)&&void 0!==o?o:r.expires,null!==(i=t.subdomains)&&void 0!==i?i:r.subdomains)},n.on("update",(function(){for(var e=0,t=Object.keys(r);t.length>e;e++){var i=t[e],a=r[i],u=a.cookie,c=a.value,s=a.opts;n.isAllowed(u.category)&&(o(u,c,s),delete r[i])}})),t(t({},e),{set:function(e,t,i){void 0===i&&(i={});var a=n.isAllowed(e.category);return a?o(e,t,i):r[e.name]={cookie:e,value:t,opts:i},a},remove:function(t,n){delete r[t],e.remove(t,n)}})),this._cookiesPubl},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=this.services[e];if(void 0!==t)return t;throw new Error("No service "+e)},e.prototype.getOr=function(e,t){var n=this.services[e];return void 0!==n?n:t},e.prototype.bind=function(e,t){this.services[e]=t},e}();var Pe={tapi:function(e,n,r){void 0===r&&(r={});var o=e.get("request"),i=e.get("config");return i.api?o(""+i.api+n,t({},r)).then((function(e){return e.json()})):Promise.reject("config.api is not configured")},configApi:function(e,n,r){void 0===r&&(r={});var o=e.get("config").configApi;return e.get("request")(""+o+n,t({},r)).then((function(e){return e.json()}))}};var Ce=function e(t){var n=Math.random().toString(36).slice(2);return 10>n.length?e():n},Ee=function(e){var n,r=e.url,o=e.payload,i=e.timeout,a=e.cbname,u=void 0===a?"callback":a,c="cb"+Ce(),s=function(e){for(var t=[],n=0,r=Object.keys(e);r.length>n;n++){var o=r[n];e[o]&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}return t.length?"?"+t.join("&"):""}(t(((n={})[u]=c,n),o));return new Promise((function(e,t){var n=document.createElement("script"),o=!1;n.addEventListener("error",(function(e){o||(t(e),o=!0)})),window[c]=function(t){delete window[c],document.head.removeChild(n),o||(e(t),o=!0)},n.src=r+s,document.head.appendChild(n),i&&setTimeout((function(){o||(o=!0,t(new Error("Timeout")))}),i)}))};function Oe(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");for(var r={},o=0,i=e.split(t);i.length>o;o++){var a=String(i[o]).split(n);if(a[0]&&a[1]){var u=a[1];try{u=decodeURIComponent(a[1])}catch(e){}r[decodeURIComponent(a[0])]=u}}return r}function Te(e){void 0===e&&(e=document.location);var t={get query(){return Oe(e.search.slice(1))},get pathname(){return"/"!==e.pathname.charAt(0)?"/"+e.pathname:e.pathname}};return["hash","host","hostname","href","port","protocol","search","origin"].forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){"origin"!==n&&(e[n]=t)},enumerable:!0})})),t}function Ve(e){var t=document.createElement("a");return t.href=e,Te(t)}var Me=function(t){function n(e){var n=t.call(this,"Not success status code of request: "+e.status+" "+e.statusText)||this;return n.statusCode=e.status,n.statusText=e.statusText,n.url=e.url,n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(Error);function je(e){if(200>e.status||e.status>=400)throw new Me(e);return e}var Ae,Ne=function(e,r){void 0===r&&(r={});var o=r.headers,i=r.timeout,a=void 0===i?1500:i,u=r.body,c=r.method,s=void 0===c?"GET":c,d=n(r,["headers","timeout","body","method"]),l={},f={method:s,headers:l},p=function(e){if("AbortController"in window){var t=new AbortController;return setTimeout((function(){t.abort()}),e),t.signal}}(a);return p&&(f.signal=p),void 0!==u&&("string"==typeof u?f.body=u:(f.body=JSON.stringify(u),l["Content-Type"]="application/json")),Object.assign(f.headers,o),fetch(e,t(t({},f),d)).then(je).catch((function(t){throw t instanceof Error&&((null==p?void 0:p.aborted)&&(t.message="Request time exceeded "+a+"ms"),Object.assign(t,{url:e,method:s})),t}))},De=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,Le=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;function qe(e){return De.test(t=e)||Le.test(t)?e:0>e.indexOf("localhost")?"."+e.split(".").slice(-2).join("."):"localhost";var t}var Re=((Ae={})[de.pageLanding.name]=225,Ae[de.utmSource.name]=190,Ae[de.utmTerm.name]=220,Ae[de.utmContent.name]=4e3,Ae[de.utmCampaign.name]=120,Ae[de.utmMedium.name]=180,Ae[de.sid.name]=140,Ae[de.wm.name]=100,Ae.default=72,Ae);function Ue(e){var t=(("; "+document.cookie).split("; "+e+"=")[1]||"").split("; ")[0];try{return decodeURIComponent(t)}catch(e){return t}}function Fe(e){var t,n=e.logger,r=qe(location.hostname),o=(t="test_cookie_QpHfCYJQhs",document.cookie=t+"=true; samesite=none; secure",""!==Ue(t));function i(e,t,i,a){var u=[];try{!function(e,t){var n=encodeURIComponent(t),r=Re[e]||Re.default;if(n.length>r)throw new Error("ECookieTooLarge: cookie "+e+" exceeds maximum length of "+r+" bytes")}(e,String(t))}catch(e){return void n.error(e)}u.push(e+"="+encodeURIComponent(t)),i&&"boolean"!=typeof i&&Number.isFinite(i)&&u.push("expires="+new Date(Number(new Date)+1e3*i).toUTCString()),u.push("path=/"),a&&u.push("domain="+r),o&&(u.push("samesite=none"),u.push("secure")),document.cookie=u.join("; ")}return{getAll:function(){return Oe(document.cookie,"; ","=")},get:Ue,set:i,remove:function(e,t){i(e,"",-1,t)}}}var We=function(){try{var e=new CustomEvent("a",{detail:{b:"c"}});return"a"===e.type&&"c"===e.detail.b}catch(e){}return!1}()?function(e,t){return new CustomEvent(e,t)}:function(e,t){var n=t.bubbles,r=void 0!==n&&n,o=t.cancelable,i=void 0!==o&&o,a=t.detail,u=document.createEvent("CustomEvent");return u.initCustomEvent(e,r,i,a),u};function ze(e,t,n){void 0===n&&(n=document.body),n.dispatchEvent(We(e,{detail:t,bubbles:!0}))}function Ge(e,t){return e.get("request")(e.get("config").frontLogApi+"collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})}function Be(){var e=-1!==(Y.getItem("debug")||"").indexOf("Twt:info:tracking")?console:J;return t(t({},Pe),{logger:e,jsonp:Ee,parseUrl:Ve,request:Ne,location:Te(),cookies:Fe({logger:e}),referrer:document.referrer?Ve(document.referrer):void 0,event:ze,collectLog:Ge})}function He(e,t,n){return void 0===n&&(n="0"),t>e.length?new Array(t-e.length+1).join(n)+e:e}var Je={name:"uid",run:function(e){var t,n,r=e.cookies.get("ta_uid");return r&&!function(e){if(19!==e.length)return!0;var t=parseInt(e.substr(0,13),10);return 1558602046426>t||t>Date.now()+80352e5}(r)||(t=Date.now(),n=Math.floor(999999*Math.random()),r=t.toString()+He(n.toString(),6)),e.cookies.set(de.taUserId,r),r}};function $e(e,t){for(var n={},r=0,o=e;o.length>r;r++){var i=o[r];i in t&&(n[i]=t[i])}return n}var Ke,Ye={name:"referrer",run:function(e){var t="",n=e.getOr("referrer");return n&&n.hostname!==e.location.hostname&&(t=n.hostname),t}},Qe=oe(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(-e.length)===e}));function Xe(e,t,n){return void 0===e&&(e=[]),t!==n&&[t,n].some((function(t){return e.every((function(e){return t!==e&&!Qe("."+e,t)}))}))}!function(e){e.source="source",e.position="position",e.block="block"}(Ke||(Ke={}));var Ze="session_utm_source",et=[de.utmSource,de.utmContent,de.utmCampaign,de.utmMedium,de.utmTerm,de.sid,de.wm],tt=[de.ctxPosition,de.ctxBlock,de.ctxSource],nt={name:"utmMarkers",stateKey:["utmMarkers","ctx_position","ctx_block","ctx_source"],run:function(e){var n,r=et.map((function(e){return e.name})),o=tt.map((function(e){return e.name})),i=e.location,a=T(e),u=i.query.utm_source||!a?i.query:a.query,c=i.hash.replace("#",""),s=c?Oe(c):{},d=$e(P,u),l=$e(r,u),f=$e(r,s),p=re(l)?f:l;function m(t,n){for(var r=0,o=t;o.length>r;r++){var i=o[r],a=n[i.name];a?e.cookies.set(i,a):e.cookies.remove(i.name,!0)}}function v(t){return $e(t,e.cookies.getAll())}function g(){return t({internal_source:""},d)}function h(t,n,r){void 0===r&&(r=!1),r||(e.cookies.set(de.utmDateSet,t.cookieDate||Date.now()),m(et,t),m(tt,n||{})),t.session_utm_source&&Q.setItem(Ze,t.session_utm_source)}var y,w,b,k,S,_=t({utm_source:"",collectionMethod:null,cookieDate:null},g());if(p.utm_source)h(_=t(t({collectionMethod:"get",cookieDate:Date.now(),utm_source:"",session_utm_source:p.utm_source||""},g()),p),y=function(){var e=u[Ke.position];if("string"!=typeof e)return{};var t,n={};return I.test(e)?(t=e.split(/\D/),n.ctx_position=t.length>1?t[1]:"",n.ctx_block=t[0]+e.replace(/\d/g,"")):(n.ctx_position=e,n.ctx_block=u[Ke.block]),n.ctx_source=u[Ke.source]||"",n}());else{w=v(r),b=Number(e.cookies.get("utm_date_set"))||null,k=Q.getItem(Ze)||"",S=null,w.utm_source&&(S="cookie");var x=null===(n=(_=t(t({collectionMethod:S,cookieDate:b,utm_source:"",session_utm_source:k},g()),w)).utm_source)||void 0===n?void 0:n.includes("."),C=Ye.run(e),E=e.get("config").internalDomains;""!==C&&Xe(E,i.hostname,C)&&(!_.utm_source||x?(_=function(e){return t({utm_source:e,session_utm_source:e,collectionMethod:"referrer",cookieDate:Date.now()},g())}(C),h(_,y={})):_.session_utm_source||(_.session_utm_source=C,h(_,y,!0)))}return y&&(y=v(o)),t(t({},y),{utmMarkers:_})}},rt={name:"dmpId",run:function(e){var t=e.getOr("config",{disableJsonp:!1}).disableJsonp,n=e.cookies.get(me);return n&&"no dmp_id"!==n?Promise.resolve(n):t||"client"!==e.env?Promise.resolve(""):e.get("jsonp")({url:"https://sync.datamind.ru/cookie/emitter/jsonp/",timeout:2e3}).then((function(e){try{return e.data.dmp_id}catch(e){return""}})).catch((function(){return""}))}},ot=oe(2,(function(e,t){var n;function r(){var r=this,o=arguments;clearTimeout(n),n=setTimeout((function(){return t.apply(r,o)}),e)}return r.cancel=function(){return clearTimeout(n)},r})),it=ot;function at(e){return Object.keys(e)}var ut,ct={desktopLarge:"(min-width: 1600px)",desktopMedium:"(min-width: 1360px)",desktopSmall:"(min-width: 1024px)",tabletLarge:"(min-width: 768px)",tabletSmall:"(min-width: 600px)",mobile:"(min-width: 599x)"},st=at(ct),dt={name:"layoutMedia",run:function(){var e="mobile";try{for(var t=0,n=st;n.length>t;t++){var r=n[t];if(matchMedia(ct[r]).matches){e=r;break}}}catch(e){}return e},observe:function(e,t){addEventListener("resize",it(300,t))}},lt=function(e){return Math.round(e)/1e3},ft=function(e){return function(t){return e.test(t)}},pt=ft(/\.js$/),mt=ft(/\.css$/),vt=ft(/\.(?:svg|png|jpeg|webp|jpg)$/),gt=ft(/\.(?:woff|eot|woff2|ttf)/);!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(ut||(ut={}));var ht=function(e,t){if(e.getEntriesByType)return e.getEntriesByType(t)},yt=function(e){var t=ht(e,"paint");return t&&t[0]?t[0].startTime:0},wt=function(e,t){return e&&e[t]||0},bt=function(e,t){return{duration:wt(e,"duration")+lt(t.duration),transferSize:wt(e,"transferSize")+t.transferSize,encodedBodySize:wt(e,"encodedBodySize")+t.encodedBodySize}},kt=function(e){var t={},n=ht(e,"resource");if(n&&n.length>0){var r={};n.forEach((function(e){var n=function(e){switch(!0){case mt(e):return ut.css;case pt(e):return ut.js;case vt(e):return ut.img;case gt(e):return ut.font;default:return ut.other}}(e.name.split("?",1)[0]);ut[n]&&(r[n]||(r[n]=0),r[n]++,t[n]=bt(t[n],e),t[n].count=r[n])}))}var o=ht(e,"navigation");return o&&o.length>0&&(t[ut.html]=bt({},o[0])),t};var St=function(e){return e.getEntries?e.getEntriesByType("resource").sort((function(e,t){var n=e.duration,r=t.duration;return n>r?1:n===r?0:-1})).reduce((function(e,t){var n,r=function(e){var t,n=e.name,r=e.duration;return{name:n=n.split("?",1)[0],duration:(t=r,Math.round(t)/1e3)}}(t),o=r.name,i=r.duration,a=function(e){return/\.js$/.test(e)?"js":/\.css$/.test(e)?"css":/\.(?:svg|png|jpeg)$/.test(e)?"img":/\.(?:woff|eot|woff2|ttf)/.test(e)?"font":"other"}(o);return e[a]?e[a][o]=i:e[a]=((n={})[o]=i,n),e}),{}):{}},_t=function(){try{var e=window.performance,n=function(){var e;try{if(!(e=window.performance).timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}var t=e.timing,n=t.requestStart,r=t.responseStart,o=t.domComplete,i=t.loadEventEnd,a=t.domInteractive,u=t.navigationStart,c=[{key:"connection",start:u,end:n},{key:"backend",start:n,end:r},{key:"pageDownload",start:r,end:t.responseEnd},{key:"first-paint",start:0,end:yt(e)},{key:"domInteractive",start:u,end:a},{key:"domComplete",start:u,end:o},{key:"pageLoadTime",start:u,end:i}],s={};return c.forEach((function(e){var t=lt(e.end-e.start);s[e.key]=t>0||2e3>t?t:void 0})),s.download=kt(e),s}(),r=function(e){var t=e;if(!t.download)return{};for(var n={sizeTransferred:0,sizeResources:0},r=0,o=at(t.download);o.length>r;r++){var i=o[r];Object.prototype.hasOwnProperty.call(t.download,i)&&(n.sizeTransferred+=t.download[i].transferSize,n.sizeResources+=t.download[i].encodedBodySize)}return n}(n);return t({navigationStart:e.timing.navigationStart,timezone:-1*(new Date).getTimezoneOffset()/60,timings:n,requests:St(e)},r)}catch(e){return{}}};var xt={name:"pageSpeed",run:function(e){return new Promise((function(e){"complete"===document.readyState?e():window.addEventListener("load",(function(){return e()}))})).then((function(){return void 0===(e=0)&&(e=0),new Promise((function(n){setTimeout((function(){return n(t)}),e)}));var e,t})).then((function(){var e=_t(),r=e.requests,o=e.timings,i=n(e,["requests","timings"]);return t(t(t({},i),o),{requests:r,timings:o})}))}},It={name:"adblock",run:function(e,t){void 0===t&&(t={});var n=null;return t.fakeDivId?n=document.getElementById(t.fakeDivId):((n=document.createElement("div")).setAttribute("class","ads ad adsbox ad-placement carbon-ads"),n.setAttribute("style","height: 1px;width: 1px;position: absolute;left: -9999px;top: -9999px"),document.body.appendChild(n)),new Promise((function(e){setTimeout((function(){e(n&&0===n.offsetHeight?"yes":"no")}),20)}))}},Pt=oe(3,(function(e,t,n){void 0===n&&(n=[]);for(var r=n.length,o=0;r>o;o++)t=e(t,n[o],o,n);return t}));var Ct=function(e,t){return function(e,t,n,r){var o=Number(e.cookies.get(t.name)),i=Date.now();return!isFinite(Number(o))||i>o+n?r().then((function(){return e.cookies.set(t,i)})):Promise.resolve()}(e,de.wuidLC,864e5,(function(){return function(e,t){var n=e.get("tapi"),r=e.get("logger"),o=["wuid="+encodeURIComponent(t)],i=e.cookies.get(le);return i&&o.push("ga_utma="+encodeURIComponent(i)),n(e,"webuser?"+o.join("&")).catch((function(e){return r.warn(e,"Wuid provider fetch error")}))}(e,t)}))};function Et(e){var t=(void 0===e?{}:e).sendWebuserRequest;return{name:"wuid",run:function(e){var n,r;return n=function(e){var t=e.cookies.get(de.wuid.name);if(/[0-9a-f]{32}/gi.test(t))return t}(e),n||(r=new Uint8Array(16),crypto.getRandomValues(r),n=Pt((function(e,t){return e+He(t.toString(16),2,"0")}),"",r),e.cookies.set(de.wuid,n)),t&&Ct(e,n),n}}}var Ot,Tt,Vt=Et({sendWebuserRequest:!0}),Mt={name:"taVisit",stateKey:["visitStartTs","visitNum","nr"],observe:function(e,t){var n,r,o=["mousemove","click","keypress"],i=function(){n=setTimeout((function(){n=void 0;var e=function(){for(var n=0,a=o;a.length>n;n++){document.removeEventListener(a[n],e)}r=void 0,t(),i()};r=e;for(var a=0,u=o;u.length>a;a++){document.addEventListener(u[a],e)}}),3e4)};return i(),function(){if(r)for(var e=0,t=o;t.length>e;e++){document.removeEventListener(t[e],r)}n&&clearTimeout(n)}},run:function(e){var t=Number(e.cookies.get(de.taVisitNum.name)||void 0);isFinite(t)||(t=0),e.cookies.get(de.taVisitStartTs.name)||(t?t+=1:t=1);var n=1===(t=t||1)?"new":"return";e.cookies.set(de.taNewOrReturn,n),e.cookies.set(de.taVisitNum,t);var r=Number(e.cookies.get(de.taVisitStartTs.name)||void 0);return isFinite(r)||(r=Date.now()),e.cookies.set(de.taVisitStartTs,r),{visitNum:t,visitStartTs:r,nr:n}}},jt={name:"userType",run:function(e){return e.cookies.get(fe)||"Visitor"}},At={name:"pageLanding",run:function(e){var t=e.cookies.get(de.pageLanding.name);t&&"/"===t[0]&&(t=e.location.origin+t);var n=t||e.location.origin+e.location.pathname;return e.cookies.set(de.pageLanding,n),n}},Nt={name:"previousPage",run:function(e){var t=e.getOr("referrer"),n=e.location,r=1===ie(["performance","navigation","type"],window)?n:t;if(r){var o=r.hostname,i=n.hostname;if(!Xe(e.get("config").internalDomains,o,i))return r.href.split("?")[0]}}},Dt={name:"dspClickId",run:function(e){var t=T(e),n=t&&t.query[de.dspId.name]||e.location.query[de.dspId.name],r=e.cookies.get(de.dspId.name),o=n||r||"no dsp_click_id";return e.cookies.set(de.dspId,o),o}},Lt={name:"tcpaClickId",run:function(e){var t=T(e),n=(null==t?void 0:t.query[de.tcpaId.name])||e.location.query[de.tcpaId.name];if(n){var r=Number(e.location.query.cookie_exp),o=!!Number.isFinite(r)&&60*r*60;return e.cookies.set(de.tcpaId,n,{expires:o}),n}var i=e.cookies.get(de.tcpaId.name);if(i)return i}},qt={name:"yclid",run:function(e){var t=T(e),n=(null==t?void 0:t.query[de.yclid.name])||e.location.query[de.yclid.name];if(n)return e.cookies.set(de.yclid,n),n;var r=e.cookies.get(de.yclid.name);return r||void 0}};!function(e){e.Storage="storage",e.GetParams="get",e.Referrer="referrer"}(Ot||(Ot={})),function(e){e.PaidSearch="Paid Search",e.Target="Target",e.Display="Display",e.Native="Native",e.Bloggers="Bloggers",e.Affiliates="Affiliates",e.JobSearchSite="Job Search Site",e.SMS="SMS",e.Email="Email",e.OrganicSearch="Organic Search",e.SMM="SMM",e.MemberGetAMember="Member Get a Member",e.Messengers="Messengers",e.Referral="Referral",e.Direct="Direct",e.Unsorted="Unsorted"}(Tt||(Tt={}));var Rt=["utm_source","utm_content","utm_campaign","utm_medium","utm_term"];var Ut={name:"sessionUtmMarkers",stateKey:["sessionUtmMarkers","sessionMarketingChannel"],run:function(e){var n,r=e.location,o=T(e),i=r.query.utm_source||!o?r.query:o.query,a=r.hash.replace("#",""),u=a?Oe(a):{},c=$e(P,i),s=$e(Rt,i),d=$e(Rt,u),l=re(s)?d:s;function f(){return t({internal_source:""},c)}function p(e){!function(e,t){for(var n=0,r=e;r.length>n;n++){var o=r[n],i=t[o];i?Q.setItem(o,i.toString()):Q.removeItem(o)}}(Rt,e)}var m,v,g=t({utm_source:"",collectionMethod:null},f());if(l.utm_source)p(g=t(t({collectionMethod:Ot.GetParams,utm_source:""},f()),l));else{m=Rt.reduce((function(e,t){var n=Q.getItem(t);return n&&(e[t]=n),e}),{}),v=null,m.utm_source&&(v=Ot.Storage);var h=null===(n=(g=t(t({collectionMethod:v,utm_source:""},f()),m)).utm_source)||void 0===n?void 0:n.includes("."),y=Ye.run(e),w=e.get("config").internalDomains;""!==y&&Xe(w,r.hostname,y)&&(g.utm_source&&!h||(g=function(e){return t({utm_source:e,collectionMethod:Ot.Referrer},f())}(y),p(g)))}var b=function(e){var t=e.utm_source,n=e.utm_medium,r=void 0===n?"":n;return r.startsWith("ctx")||r.startsWith("context")||t.includes("yabs.yandex")?Tt.PaidSearch:r.startsWith("trg")||r.startsWith("target")?Tt.Target:r.startsWith("dsp")||r.startsWith("display")||r.startsWith("vdo")?Tt.Display:r.startsWith("ntv")?Tt.Native:r.startsWith("blg")||r.startsWith("ins")?Tt.Bloggers:r.startsWith("aft")||r.startsWith("affiliate")?Tt.Affiliates:t.startsWith("vac")?Tt.JobSearchSite:r.includes("sms")||t.includes("sms")?Tt.SMS:r.startsWith("mln")||r.startsWith("email")?Tt.Email:!r&&["yandex.","google.","com.google","mail.ru","bing.","rambler.","duckduckgo.","yahoo."].some((function(e){return t.includes(e)}))?Tt.OrganicSearch:["vk.com","instagram.com",".facebook.","com.twitter","linkedin.com","twitter.com","livejournal.com","reddit.com","youtube.com"].some((function(e){return t.includes(e)}))||"ok.ru"===t||"vk.com"===t||r.startsWith("smm.")||r.startsWith("social")?Tt.SMM:t.includes("mgm_")||t.includes("baf_")?Tt.MemberGetAMember:"t.co"===t||"t.me"===t?Tt.Messengers:t.includes(".")&&!r?Tt.Referral:t||r?Tt.Unsorted:Tt.Direct}(g);return{sessionUtmMarkers:g,sessionMarketingChannel:b}}},Ft={name:"wuidVisit",stateKey:["wuidVisitId","wuidVisitNum"],observe:function(e,t){var n,r,o=["mousemove","click","keypress"],i=function(){n=setTimeout((function(){n=void 0;var e=function(){for(var n=0,a=o;a.length>n;n++){document.removeEventListener(a[n],e)}r=void 0,t(),i()};r=e;for(var a=0,u=o;u.length>a;a++){document.addEventListener(u[a],e)}}),3e4)};return i(),function(){if(r)for(var e=0,t=o;t.length>e;e++){document.removeEventListener(t[e],r)}n&&clearTimeout(n)}},run:function(e){var t=e.cookies.get(de.wuid.name);if(!t)return e.cookies.remove(de.wuidVisitId.name),e.cookies.remove(de.wuidVisitPersistence.name),{wuidVisitId:"",wuidVisitNum:0};var n=e.cookies.get(de.wuidVisitId.name),r=e.cookies.get(de.wuidVisitPersistence.name),o=(n||"").split(":"),i=o[0],a=o[2],u=o[3],c=1;if("v1"===i&&u===t){var s=Number(o[1])||1/0;isFinite(s)&&(c=r?s:s+1)}for(var d=""+c;7>d.length;)d="0"+d;var l=Date.now();if("v1"===i&&u===t){var f=Number(a)||1/0;isFinite(f)&&r&&(l=f)}var p=["v1",d,l,t].join(":");return e.cookies.set(de.wuidVisitId,p),e.cookies.set(de.wuidVisitPersistence,l),{wuidVisitId:p,wuidVisitNum:c}}},Wt=[Dt,Lt,Je,be,nt,V,jt,At,Ye,Mt,rt,dt,xt,It,ge,Vt,Ft,Nt,qt,Ut],zt=t(t({},{api:"https://www.tinkoff.ru/api/v1/",configApi:"https://config.tinkoff.ru/",papiBase:"https://www.tinkoff.ru/",enrichApi:"https://enrichment.tinkoff.ru/",frontLogApi:"/api/front/log/",cdnUrl:"https://www.cdn-tinkoff.ru/twa/",resourceApi:"https://acdn.tinkoff.ru/",partnersApi:"https://partners.tinkoff.ru/",internalDomains:["tinkoff.ru","tinkoffinsurance.ru","dolyame.ru"]}),{enrichTimeout:1500});var Gt={timings:{formOnReading:["pageLoad","formFirstInteraction"],timeOnVerification:["formSubmit","formMobileVerified"]},stepsStartEvent:"formFirstInteraction",stepsEndEvent:"formSubmit"};var Bt=function(){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);return{viewport:document.documentElement.clientHeight,height:n,scrollTop:window.pageYOffset||document.documentElement.scrollTop}},Ht=oe(2,(function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))})),Jt=Ht,$t={scrollEventName:"pageScroll",eventDelay:300},Kt={viewport:"ta_viewport_previous",scroll:"ta_scroll_previous",height:"ta_height_previous"},Yt={viewport:"previousViewport",scroll:"previousScroll",height:"previousHeight"};function Qt(e,t){try{sessionStorage.setItem(Kt[e],t.toString())}catch(e){return}}function Xt(e){for(var t=0,n=at(e);n.length>t;t++){var r=n[t],o=e[r];void 0!==o&&Qt(r,o)}}function Zt(){return["viewport","scroll","height"].reduce((function(e,t){var n=function(e){try{var t=sessionStorage.getItem(Kt[e])||"",n=parseInt(t,10);return isNaN(n)?void 0:n}catch(e){return}}(t);return void 0!==n&&(e[Yt[t]]=n),e}),{})}function en(e){return e.length>0?e[0].toUpperCase()+e.slice(1):e}function tn(e,t){return l(e,t.split("."))}function nn(e,t,n){return Object.keys(t).every((function(r){return function(e,t){return t.split("|").some((function(t){return void 0!==tn(e,t)}))}(e,r)||t[r]&&Date.now()-n>=t[r]}))}function rn(e){var n,r=e.timeouts,o=void 0===r?{}:r,i=e.readyEvent,a=e.readyEventPayload,u=e.action,c=e.beforeEvent,s=e.tracked,d=e.blocked,l=e.resetOnSPATransition,f=void 0!==l&&l,p=void 0!==s&&s,m=void 0!==d&&d,v=Date.now(),g=!1,h=t({},a),y=function(){if(!n)throw new Error("plugin isn't bound");var e,t=u||n.event;g||m||p||!function(){if(!n)throw new Error("plugin isn't bound");return nn(n.state,o,v)}()||(g=!0,c&&ze(c,{waitFor:function(t){e=t}},document),e?Promise.resolve(e).then((function(){n.emit("private"+en(i)),t(i,h)})):(n.emit("private"+en(i)),t(i,h)))},w=Object.keys(o),b=function(){v=Date.now(),p=!1,g=!1,y(),g||k()},k=function(){w.forEach((function(e){var t=o[e];isFinite(t)&&t&&setTimeout(y,t+1)}))};return{name:"data-observer",trySend:y,setTracked:function(e){p=e,g=e},setBlocked:function(e){m=e,n&&!m&&y()},plugin:function(e){n=e.tracking,k(),setTimeout(y),n.on("event:"+i,(function(){if(p=!0,Y.getItem("twt:tracking:do")){console.group("do:"+i);for(var e=0,t=w;t.length>e;e++)for(var r=0,o=t[e].split("|");o.length>r;r++){var a=o[r],u=tn(n.state,a);console.log(a,": "+typeof u,"=",u)}console.groupEnd()}})),n.on("change",y),n.on("do:"+i+":invalidate",y),f&&n.on("newLocation",b)}}}var on,an={adblock:1e3};function un(e){var t;return function(){return void 0===t&&(t=function(){try{var t="__storage_test__",n=e===on.SessionStorage?sessionStorage:localStorage;return n.setItem(t,t),n.removeItem(t),!0}catch(e){return!1}}()),t}}!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(on||(on={}));var cn=un(on.LocalStorage);un(on.SessionStorage);var sn="_expire";function dn(){return!!window._satellite&&!(!window._satellite.initialized&&!window.__satelliteLoaded)}function ln(){return dn()?Promise.resolve():new Promise((function(e){var t,n;t=e,n=window.setInterval((function(){dn()&&(clearInterval(n),t())}),100)}))}var fn=[1,5,10,15,20,25,30,35];function pn(e,n){!function(e,n){var r="pageload",o=A(t(t({},n(r)),{group:"timer",event:r,eventid:(new Date).getTime()}));e.addPixel(o)}(e,n),function(e,n){fn.forEach((function(r){var o="timer"+r;setTimeout((function(){var r=A(t(t({},n(o)),{group:"timer",event:o,eventid:(new Date).getTime()}));e.addPixel(r)}),1e3*r)}))}(e,n)}var mn=oe,vn=function(e){return mn(e.length,e)},gn=vn,hn=X,yn=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;n>r;r++)if(!bn(e[r],t[r]))return!1;return!0},wn=function(e,t){var n=Object.keys(e),r=n.length;if(r!==Object.keys(t).length)return!1;for(var o=0;r>o;o++){var i=n[o];if(!Object.prototype.hasOwnProperty.call(t,i)||!bn(e[i],t[i]))return!1}return!0},bn=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||e!==Object(e)||!e||!t)return!1;if(hn(e)&&hn(t))return yn(e,t);var n=Object.prototype.toString.call(e);return"[object Object]"===n&&Object.prototype.toString.call(t)===n?wn(e,t):"function"==typeof e?e===t:function(e,t){return e.toString()===t.toString()}(e,t)},kn=vn(bn);function Sn(e){return"string"==typeof e?e.toLowerCase().replace(/\s/g,"_"):""}function _n(e,t,n){var r=null;return function(o){var i,a,u=function(e,t){var n=new Set(Object.keys(e)),r={};return n.forEach((function(o){for(var i=0,a=e[o];a.length>i;i++){var u=ie(a[i].split("."),t.state);if(void 0!==u){r[o]=String(u),n.delete(o);break}}})),[r,Array.from(n)]}(t,e),c=u[0],s=u[1],d=kn(r,c);return 0===s.length||d||null===(i=null==n?void 0:n.missedParams)||void 0===i||i.call(n,s,o),null===r||d||null===(a=null==n?void 0:n.differentParams)||void 0===a||a.call(n,r,c,o),r=c,c}}var xn={product_name:["productName"],product_category:["productCategory","productType"],ic:["dspClickId"],dco_ic:["dco.ic"],refref:["dco.referrer"]};function In(e,n,r){var o=n.get("logger"),i=!0;e.on("setProductParamsChangeMode",(function(e){i=!e}));var a={missedParams:function(e,n){!function(e,n,r){["product_name","product_category"].some((function(e){return-1!==r.missedParams.indexOf(e)}))&&(n.warn("Не смогли собрать следующие базовые параметры dsp-пикселей: "+Array.from(r.missedParams).join(", ")),e.collect(t({component:"dsp-pixels-empty-product-params"},r)))}(r,o,{missedParams:e,event:n})},differentParams:function(e,n,a){i&&function(e,n,r){n.warn("Разные продуктовые параметры собраны для dsp-пикселей"),e.collect(t({component:"dsp-pixels-different-product-params"},r))}(r,o,{originalValues:e,values:n,event:a})}},u=_n(e,xn,a);return function(e){return function(e){for(var n=t({},e),r=0,o=["product_name","product_category"];o.length>r;r++){var i=o[r],a=Sn(e[i]);void 0!==a&&(n[i]=a)}return n}(t(t({},u(e)),{referer:document.location.href,resourceScript:!0,id:"25"}))}}var Pn,Cn=oe(2,(function(e,t){void 0===t&&(t={});var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e(t[r],r,t));return n})),En={scApplied:"dco",step0:"funnel",step1:"funnel",step2:"funnel",step3:"funnel",step4:"funnel",step5:"funnel",thankyoupage:"funnel",approve:"funnel",duplicate:"funnel",priorapprove:"funnel"},On=((Pn={}).funnel={sub1:["hid"]},Pn.dco=void 0,Pn);function Tn(e,n){return{name:"addDspPixel",init:function(r){var o=r.tracking,i=r.context.get("logger"),a=Cn((function(e,r){if(e){var a={missedParams:function(e,o){!function(e,n,r){var o="Собрали не все параметры для группы "+r.pixelGroup+" dsp-пикселей, нет следующих параметров: "+r.missedParams.join(", ");n.warn(o),e.collect(t({component:"dsp-pixels-empty-group-params"},r))}(n,i,{event:o,pixelGroup:r,missedParams:e})},differentParams:function(e,o,a){!function(e,n,r){n.warn("Для группы "+r.pixelGroup+" в dsp-пикселях собраны разные параметры"),e.collect(t({component:"dsp-pixels-different-group-params"},r))}(n,i,{event:a,pixelGroup:r,originalValues:e,values:o})}};return _n(o,e,a)}}),On);return function(r,i){var u;void 0===i&&(i={});var c=En[r];"funnel"===c&&n.unlock();var s=A(t(t(t(t({},e(r)),{event:r,group:En[r],eventid:(new Date).getTime()}),null===(u=a[c])||void 0===u?void 0:u.call(a,r)),i));o.addPixel(s)}}}}var Vn=function(){},Mn=function(){function e(e,t){var n=this;this.locked=!0,this.unlockLogger=Vn,this.lockPromise=new Promise((function(e){n.unlockLogger=function(){e(),n.locked=!1}})),this.tracking=e,this.context=t,this.logger=t.get("logger")}return e.prototype.collect=function(e){var t=this;return this.locked?this.lockPromise.then((function(){return t.pureCollect(e)})):this.pureCollect(e)},e.prototype.unlock=function(){this.unlockLogger()},e.prototype.pureCollect=function(e){var n=this.context.get("collectLog"),r=this.context.location,o=ie(["state","appName"],this.tracking);return o||this.logger.warn("Не могу достать appName при логгировании в dsp-pixels-plugin"),n(this.context,t(t(t({},o?{appName:o}:{}),{pageUrl:""+r.origin+r.pathname}),e))},e}(),jn="object"==typeof window.initialState;var An=function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){for(var e=t.length-1,n=t[e].apply(t,arguments),r=e-1;r>=0;r--)n=t[r](n);return n}},Nn="dco_general_ids",Dn=["personalizedLandingMetrics","state","dcoGeneralId"];function Ln(e){var t=[];try{t=(Y.getItem(Nn)||"").split(";").filter((function(e){return""!==e})).map((function(e){var t=e.split(","),n=t[0],r=Number(t[1]);if(!isFinite(r))throw new Error("Failed to parse timestamp of id");return{id:n,timestamp:r}}))}catch(t){e.error(t,"allDcoGeneralIds plugin couldn't receive id")}return t}var qn=function(e){return Y.setItem(Nn,function(e){return e.map((function(e){return e.id+","+e.timestamp})).join(";")}(e)),e};function Rn(e){var t=(new Date).getTime()-6048e5;return e.filter((function(e){return e.timestamp>=t}))}function Un(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))}var Fn=gn((function(e,t){var n;e.extend(((n={}).allDcoGeneralIds=t.map((function(e){return e.id})).join(";"),n))})),Wn={"tinkoff.ru":"//dp.tinkoff.ru/want/take/twa-ins","tinkoffinsurance.ru":"//dp.tinkoffinsurance.ru/want/take/twa-t"};var zn=oe(2,(function(e,t){void 0===t&&(t=[]);for(var n=0;t.length>n;n++)if(e(t[n],n,t))return t[n]}));function Gn(e,n){var r,o=n.get("request"),i=n.get("logger");return function(a,u){void 0===u&&(u={});var c=n.get("config").partnersApi,s=function(e){return{click_id:e.state.tcpaClickId||"",request_id:e.state.hid||"",product_name:e.state.productName||"",product_category:e.state.productCategory||""}}(e),d=t(t({},s),u),l=function(e,t){var n=[],r=[];at(e).forEach((function(o){var i=e[o];if(i||n.push(o),t&&t[o]!==i){var a=t[o];a!==i&&r.push({key:o,previousValue:a,currentValue:i})}}));var o={errorsCount:n.length+r.length};return n.length&&(o.emptyValuesKeys=n),r.length&&(o.differentValuesKeys=r.map((function(e){return e.key})),o.differentValues=r),o}(d,r);if(r=d,d.click_id){l.errorsCount>0&&function(e,n,r,o){var i=n.location,a=i.origin,u=i.pathname;n.get("logger").warn("tcpa-pixels params errors",o),n.get("collectLog")(n,t({level:"WARN",page:""+a+u,component:"tcpa-pixels",eventName:r,appName:e.state.appName||"unknown"},o)).catch((function(){}))}(e,n,a,l);var f,p,m,v,g,h=t(t({},d),{event_date:(f=new Date,p=function(e){return 10>e?"0"+e:e},m=f.getTimezoneOffset(),v=0>m?"+":"-",g=Math.abs(m),f.getFullYear()+"-"+p(f.getMonth()+1)+"-"+p(f.getDate())+"T"+p(f.getHours())+":"+p(f.getMinutes())+":"+p(f.getSeconds())+v+p(g/60)+":"+p(g%60)),event_id:a});return o(c+"postbacks",{method:"POST",body:h}).catch((function(e){i.error(e,"tcpa-pixels request error")}))}}}function Bn(e,t){return void 0===t&&(t={}),new Promise((function(n,r){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,Object.assign(i,t),o.appendChild(i),i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Error when loading "+e+" script"))}}))}var Hn={type:"string",source:$.Static,value:""};var Jn={event351:_e.dcoResponseTime,event353:t(t({},Hn),{requiredValues:["event351"]})};var $n,Kn={eVar1:_e.pagePath,eVar2:{type:"string",source:$.Static,value:"D=g"},eVar3:{type:"string",source:$.Static,value:"D=r"},eVar5:{type:"string",source:$.Static,value:'D=bw+" x "+bh'},eVar4:_e.sessionUtmSource,eVar37:_e.sessionUtmMedium,eVar44:_e.sessionUtmCampaign,eVar11:_e.wuid,eVar13:_e.pageLanding,eVar14:_e.deviceType,eVar15:_e.deviceVendor,eVar16:_e.deviceModel,eVar17:_e.deviceWidth,eVar18:_e.deviceHeight,eVar19:_e.deviceDisplaySize,eVar21:_e.utmSource,eVar22:_e.utmContent,eVar23:_e.utmTerm,eVar24:_e.utmMedium,eVar25:_e.utmCampaign,eVar26:_e.utmReferrer,eVar27:_e.webMaster,eVar28:_e.wmSid,eVar31:_e.appName,eVar35:_e.devicePixelRatio,eVar36:{type:"string",source:$.Code,code:function(e){return e.context.cookies.get(fe)||"Visitor"}},eVar38:_e.dcoGeneralMenuId,eVar39:_e.remoteAddress,eVar40:{type:"string",source:$.Code,code:function(e){return(0,e.collect)(_e.userLoggedIn)?"Logged In":"Not Logged In"}},eVar43:_e.dcoSelectedWith,eVar45:_e.layoutMedia,eVar46:{type:"string",source:$.Code,code:function(e){return(0,e.collect)(_e.visitorIsNew)?"New":"Repeat"}},eVar47:_e.portalUserId,eVar54:_e.utmContent,eVar56:_e.dspClickId,eVar57:_e.dmpId,eVar59:_e.dcoGeneralId,eVar63:_e.productCategory,eVar64:_e.productName,eVar65:_e.hid,eVar66:_e.queryVariation,eVar70:_e.dcoGeneralIdBeforeRedirect,eVar76:{type:"string",source:$.State,path:"investUserType"},eVar80:_e.internalSource,eVar85:_e.uaParserType,eVar89:_e.queryDcoCampaign,eVar90:_e.userId,eVar91:_e.visitStartTs,eVar92:_e.visitNumber,eVar93:{type:"string",source:$.Code,code:function(e){return(0,e.collect)(_e.userIsNew)?"new":"return"}},eVar77:{type:"string",source:$.Cookie,name:"businessUserType"},eVar87:_e.dcoId,eVar88:_e.dmpId,eVar102:{type:"string",source:$.Static,value:"(All) / General / pageLoad (web-tracking)"}},Yn={prop2:{type:"string",source:$.Static,value:"D=g"},prop3:{type:"string",source:$.Static,value:"custom load"},prop4:_e.pagePath,prop5:{type:"string",source:$.Static,value:"web-tracking"},prop7:_e.referrer,prop9:_e.appName,prop11:_e.previousPageUrl,prop14:_e.errorType,prop24:{type:"string",source:$.Code,code:function(e){return(0,e.collect)(_e.adblockFlag)?"yes":"no"}},prop29:{type:"string",source:$.Code,code:function(e){return 0===(0,e.collect)(_e.mobileOrientation)?"landscape":"portrait"}},prop35:_e.queryUtmSource,prop41:_e.gaId,prop42:_e.frameUrl,prop44:_e.urlBeforeDcoRedirect,prop46:_e.documentTitle,prop47:_e.dcoGeneralId,prop49:_e.queryParamsFull,prop52:_e.pageErrorCode,prop53:_e.internalSource,prop58:_e.sessionMarketingChannel,prop64:_e.viewportHeight,prop65:_e.viewportWidth,prop66:_e.lowCardinalityPagePath,prop68:_e.dcoAppliedStatus,prop70:_e.dcoResponseStatus},Qn=t(t(t({events:{type:"string",source:$.Code,code:function(e){var n=e.tracking,r=t(t(t({},Jn),function(e){var n={event279:{type:"string",source:$.Code,code:function(){return Math.round(performance.now()).toString()}},event281:t(t({},Hn),{requiredValues:["event279"]})};return e.state.firstPage?t(t({},n),{event1:{type:"string",source:$.Code,code:function(){return Math.round(performance.now()/100).toString()}},event2:t(t({},Hn),{requiredValues:["event1"]})}):n}(n)),function(){var e,t={};try{e=JSON.parse(sessionStorage.getItem("ibdashboardWidgetsAnalytics")||"{}")}catch(e){}return e&&(e.show_widget_piechart&&(t.event438=Hn),e.show_widget_finanalyse&&(t.event439=Hn),e.show_widget_bonuses&&(t.event440=Hn),e.show_widget_bonuses_highcash&&(t.event441=Hn)),t}());return function(e){return Object.keys(e).map((function(t){var n=e[t];return""!==n?t+"="+n:t})).join(",")}(ce(n,r))}},products:{type:"string",source:$.Code,code:function(e){var t=e.tracking.state,n=t.productName,r=t.productCategory;if(n&&r)return r+";"+n}}},{pageName:_e.pagePath,server:_e.pageDomain}),Kn),Yn);!function(e){e.AppMeasurement="am-2.22.0.js",e.VisitorAPI="va-5.2.0.js"}($n||($n={}));var Xn="loadedResorucesMap";function Zn(e,t){var n=function(e){var t=e.getOr(Xn);return t||e.bind(Xn,t=new Map),t}(e),r=n.get(t);return r||(r=function(e,t){var n=e.get("config").cdnUrl;if(!n)throw new Error("cdnUrl is not specified");return Bn(n+"hosted-libs/"+t)}(e,t).catch((function(e){throw n.delete(t),e})),n.set(t,r)),r}var er={account:"tcsbank",trackingServer:"tinkoffcreditsystems.d3.sc.omtrdc.net",visitorNamespace:"tinkoffcreditsystems",orgId:"A002FFD3544F6F0A0A4C98A5@AdobeOrg"};function tr(e,n){void 0===n&&(n={});var r=t(t({},er),n),o=r.trackingServer,i=r.visitorNamespace,a=r.orgId,u=r.account;return function(e,t){return Promise.all(t.map(Zn.bind(null,e)))}(e,[$n.AppMeasurement,$n.VisitorAPI]).then((function(){var e="s_c_il"in window&&(null===s_c_il||void 0===s_c_il?void 0:s_c_il.find((function(e){return"s_c"===e._c&&e.account===u}))),t=s_gi(u);return e||(t.trackingServer=o,t.visitorNamespace=i,t.visitor=Visitor.getInstance(a),window.s=t),t}))}var nr=["tcsbank"];function rr(e){return!!e&&-1!==nr.indexOf(e)}var or;function ir(e){return r(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(o){return t=e.get("config"),n=e.get("logger"),r=t.resourceApi,(i=t.atmContainers)?[2,i]:[2,e.get("request")(r+"resources?name=analytics_config",{timeout:3e3}).then((function(e){return e.json()})).then((function(e){return e.result.value})).then((function(e){return e.atm.containers})).catch((function(e){return n.error(e,"error when fetching atm containers map")}))]}))}))}!function(e){e.Wuid="wuid",e.AppName="appName",e.Delayed="p1"}(or||(or={}));var ar=function(e){return function(t){var n=t.context,i=t.tracking;return r(void 0,void 0,void 0,(function(){var t,a,u,c,s,d,l,f,p,m,v;return o(this,(function(g){switch(g.label){case 0:t=e.loadingDelayPromise,a=n.get("logger"),g.label=1;case 1:return g.trys.push([1,9,,10]),u=void 0!==t?"delayed":"notDelayed",c=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a,u;return o(this,(function(o){switch(o.label){case 0:return n=e.get("logger"),r=t.fallbackContainer,"staticContainer"in t?(i=t.staticContainer,[3,3]):[3,1];case 1:return[4,ir(e)];case 2:if(a=o.sent(),u=t.containerName,!(i=null==a?void 0:a[u])){if(!r)throw new Error("cannot get launch container description and fallback is not provided. launch won't be loaded");n.error("cannot get launch container description, fallback will be used"),i=r}o.label=3;case 3:return[2,i]}}))}))}(n,e),s=c.then((function(e){return e.adobeAnalyticsAccount})),d=function(e,t,n,r){var o,i=t.get("logger"),a=!1;return n.then((function(e){o=rr(e)})),e.on("privatePageLoad",(function(){a||n.then((function(n){if(rr(n))return tr(t,{account:n}).then((function(t){var n=ce(e,Qn,{itemMapper:ue});Object.assign(t,n,r||{}),t.t(),t.clearVars(),i.info("adobe analytics pageview has sent to "+t.account+" account")})).catch((function(e){i.error(e,"failed to send Adobe Analytics pageview")}))}))})),window.addEventListener("pageLoad",(function(e){!function(e){var t;return"pageLoad"===e.type&&"web-tracking"===(null===(t=e.detail)||void 0===t?void 0:t.initiator)}(e)?e.stopImmediatePropagation():!0===o?e.detail.abortAdobeAnalytics=!0:a=!0}),!0),n.then((function(e){return rr(e)&&!a}))}(i,n,s,{eVar100:u}),[4,c];case 2:return l=g.sent(),(f=l.adobeAnalyticsAccount)?[4,d]:[3,7];case 3:return p=g.sent(),m=tr(n,{account:f}),p&&t?[4,t]:[3,5];case 4:g.sent(),g.label=5;case 5:return[4,m];case 6:g.sent(),g.label=7;case 7:return[4,Bn(l.src,{async:l.async,defer:l.defer,crossOrigin:l.crossOrigin})];case 8:return g.sent(),a.info("launch lib has successfully loaded"),[3,10];case 9:return v=g.sent(),a.error(v,"launch loading has failed"),[3,10];case 10:return[2]}}))}))}},ur={run:function(){}};var cr=function(e){var t=e.featureName,n=e.groups;return function(e){var r,o=e.context,i=e.tracking,a=o.get("logger"),u=function(e){void 0===e&&(e="0");var t,n=parseInt(e,16)+1;return 1>(t=n)||t>16?1:n}(Vt.run(o).slice(-1)[0]),c=Object.keys(n).find((function(e){var t;return null===(t=n[e].segments)||void 0===t?void 0:t.includes(u)}));c?(a.info('split test info: feature "'+t+'", test group: "'+c+'", user segment: '+u),r=n[c]):(a.info('split test info: feature "'+t+'", test group: "default", user segment: '+u),r=n.default||ur),i.use(r.run)}},sr="lazyLaunch",dr="https://www.tinkoff.ru/api/front/log/collect";function lr(e){try{return JSON.stringify(e)}catch(e){return"Stringify error while log try"}}function fr(e){return e instanceof Error?{message:e.message,name:e.name,stack:e.stack}:e}function pr(e){return e&&Array.isArray(e)&&e[0]&&"object"==typeof e[0]&&"message"in e[0]?e[0].message:lr(e)}var mr={id:null,wuid:null};function vr(e,n){for(var r,o,i=[],a=2;arguments.length>a;a++)i[a-2]=arguments[a];if(Math.random()<=e){var u=t(t(t({system:"ttm",appName:"ttm",component:"ttm-bundle-resolver-loader",from:"browser",buildId:null===(r=window._ttm)||void 0===r?void 0:r.buildId,trackingVersion:null===(o=window.tracking)||void 0===o?void 0:o._version,session:mr},"error"===n.level?{message:pr(i)}:{}),{data:lr(i.map(fr))}),n);return fetch(dr,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:lr(u)}).catch((function(){return null}))}}function gr(e,t){return"https://acdn.tinkoff.ru/twa/ttm/"+e+"/publications/"+t+"/bundle-resolver.js"}function hr(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Bn(gr(e,t),{crossOrigin:"anonymous"})];case 1:return n.sent(),[3,3];case 2:return vr(1,{level:"error",errorType:"loading-error",handled:!0,loadBundleResolverError:!0},n.sent()),[3,3];case 3:return[2]}}))}))}var yr=Et({sendWebuserRequest:!1});function wr(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];var n=window.dataLayer||(window.dataLayer=[]);n.push(e)}var br={name:"adwPageloadPixel",init:function(e){var t=e.context.get("logger"),n=function(e){return void 0===e&&(e=!1),function(t){return e?Promise.resolve(!0):Bn(t,{crossOrigin:"anonymous"}).then((function(){return e=!0,!1}))}}(document.querySelectorAll('script[src^="https://www.googletagmanager.com/gtag/js?id="]').length>0);return function(e){var r="AW-"+e;return n("https://www.googletagmanager.com/gtag/js?id="+r).then((function(e){e||wr("js",new Date),wr("config",r)})).catch((function(e){t.error(e,"Cannot load gtag script in adwPageloadPixel util")}))}}};var kr,Sr={name:"makeEventeaHandler",init:function(e){var t=e.tracking,n=function(e){!function(e,t){var n=t.event,r=t.config,o=void 0===r?{}:r,i=t.payload,a=n,u=void 0===i?{}:i;"pushTrack"===o.type&&(a=o.type,u.pageAction?u._event=n:u.pageAction=n),e.event.call({isSendContext:!0,fromEventea:!0},a,u)}(t,e)};return function(){return n}}},_r={name:"makeEventeaDataHandler",init:function(e){var t=e.tracking,n=function(e){!function(e,t){var n=t.payload;e.extend(void 0===n?{}:n)}(t,e)};return function(){return n}}};!function(e){e[e.awaitFetching=0]="awaitFetching",e[e.fetching=1]="fetching",e[e.success=2]="success",e[e.fail=3]="fail"}(kr||(kr={}));var xr,Ir,Pr={name:"tramSendEvent",init:function(e){var t=e.tracking,n=e.context,r=n.get("logger"),o=n.get("config"),i=o.cdnUrl+"d/tram-legacy-events.json?r=1",a=n.get("request"),u=[],c=[],s=kr.awaitFetching,d=function(e,n,r){var i,u,c,s,d,l,f,p=function(e){try{return window._satellite._container.rules.find((function(t){return t.events.some((function(t){return t.settings.type===e}))}))}catch(e){return null}}(e),m="?";null!==p&&(m=p?"yes":"no");var v={message:"ETwtInvalidServiceUsed: TrackingService is obsolete for sending new events, use eventea instead.",event:"ETwtInvalidServiceUsed",eventName:e,appName:n.appName,appVersion:n.appVersion,twtVersion:t._version,twtProxyVersion:n.proxyVersion,hasLaunchRule:m,launchRuleName:p?p.name:"",launchRuleId:p?p.id:"",containerName:(null===(c=null===(u=null===(i=window._satellite)||void 0===i?void 0:i._container)||void 0===u?void 0:u.property)||void 0===c?void 0:c.name)||"",launchBuildDate:(null===(d=null===(s=window._satellite)||void 0===s?void 0:s.buildInfo)||void 0===d?void 0:d.buildDate)||"",launchTurbineBuildDate:(null===(f=null===(l=window._satellite)||void 0===l?void 0:l.buildInfo)||void 0===f?void 0:f.turbineBuildDate)||"",sent:r};return a(o.frontLogApi+"collect",{method:"POST",keepalive:!0,body:v}).catch((function(){}))},l={isSendContext:!0,legacy:!0};return window.addEventListener("load",(function(){Promise.all([new Promise((function(e){window.requestIdleCallback?window.requestIdleCallback((function(){return e()})):window.requestAnimationFrame((function(){return e()}))})),ln()]).then((function(){a(i).then((function(e){return e.json()})).then((function(e){u=e,s=kr.success;for(var n=0,r=c;r.length>n;n++){var o=r[n];-1===u.indexOf(o.event)?d(o.event,o.meta,!0):t.event.call(l,o.event,o.payload)}c=[]})).catch((function(e){s=kr.fail,r.error(e,"Unable to fetch tram-legacy-events from "+i);for(var n=0,o=c;o.length>n;n++){var a=o[n];t.event.call(l,a.event,a.payload)}c=[]}))}))})),function(e,n,r){if(r.eventeaReady){switch(s){case kr.awaitFetching:case kr.fetching:return c.push({event:e,payload:n,meta:r}),t;case kr.success:if(-1===u.indexOf(e))return d(e,r,!1),t}t.event.call(l,e,n)}else t.event(e,n);return t}}};function Cr(e){var t="tiktokIframeLoaded",n=e.getOr(t);if(n)return n;var r=new Promise((function(t,n){var r=e.get("config").cdnUrl;if(!r)throw new Error("cdnUrl is not specified");for(var o={src:r+"modules/tiktok-iframe/v1/index.html",width:"1",height:"1",frameborder:"0",border:"0",style:"position: fixed; left: -9999px; bottom: -9999px;"},i=document.createElement("iframe"),a=0,u=at(o);u.length>a;a++){var c=u[a];i.setAttribute(c,o[c])}i.onerror=function(){return n(new Error("failed to load tiktok iframe"))},i.onload=function(){return t(i)},document.body.appendChild(i)}));return e.bind(t,r),r}function Er(e,t,n){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return r=e.get("logger"),[4,Cr(e)];case 1:return i=o.sent(),[2,new Promise((function(e,o){var a,u=t+Date.now().toString(),c=function(t){var n=t.data;n.id===u&&(n.result===Ir.Succeeded?(r.info("tiktok iframe successful response for message",t.data),e(t.data)):(r.warn("tiktok iframe bad response for message",t.data),o(new Error(t.data.reason))),window.removeEventListener("message",c))},s={id:u,type:t,data:n};r.info("message to tiktok iframe has been sent",s),window.addEventListener("message",c),null===(a=i.contentWindow)||void 0===a||a.postMessage(s,"*")}))]}}))}))}!function(e){e.Init="tiktokInit",e.Track="tiktokTrack"}(xr||(xr={})),function(e){e.Succeeded="succeeded",e.Failed="failed"}(Ir||(Ir={}));var Or,Tr,Vr,Mr,jr,Ar={name:"ttq",init:function(e){var t=this,n=e.context;return function(){for(var e=[],i=0;arguments.length>i;i++)e[i]=arguments[i];return r(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(t=e[1],e[0]){case"init":return[2,Er(n,xr.Init,{pixelId:t})];case"track":return[2,Er(n,xr.Track,{pixelId:t,event:e[2]})]}return[2]}))}))}}},Nr=t(t({},zt),Object.assign({},window.twtConfig,window.twtDebugConfig));(function(e,t,n){Array.isArray(t)||(n=t,t=[]);var r=Object.assign({},x,n);e.bind("config",r);var o=function(e){void 0===e&&(e={});var t=e.defaults,n=void 0===t?U:t,r=e.alwaysEnabled,o=void 0===r?D.Essential:r,i=n,a=_();return Object.assign(a,{once:function(e,t){var n=function(){a.off(e,n),t()};a.on(e,n)},isAllowed:function(e){return(this.getAllowedMask()&e)===e},resetAllTo:function(e){i=e,a.emit("update")},update:function(e,t){void 0===t&&(t="keep"),"enable"===t?i|=U:"disable"===t&&(i=0);for(var n=0,r=Object.keys(e);r.length>n;n++){var o=Number(r[n]);e[o]?i|=o:i&=~o}a.emit("update")},getAllowedMask:function(){return(null!=i?i:n)|o},categories:F})}({defaults:r.ucDefaults,alwaysEnabled:r.ucAlwaysEnabled});e.bind("consentVault",o);var a=function(e){var t=e.get("config"),n=e.getOr("log"),r=t.log,o=e.getOr("logger"),i=t.logger;n&&n(B),r&&r(B);var a=i||r||o||n;return"object"==typeof a?a:H("function"==typeof a?a:G)}(e);e.bind("logger",a);var u="u"!==(typeof window)[0],c={};u&&(r.recreateTracking?window[r.global]&&window[r.global]._clearAllListeners():c=window[r.global]?window[r.global]:c,window[r.global]=c,c.localStorage=Y,c.sessionStorage=Q);var s=[],d=e.emitter||_();Object.assign(c,d);var f={};c.on=function(e,t){if(e&&"event:"===e.substring(0,6)&&u){var n=e.substring(6),r=function(e){e instanceof CustomEvent&&t(e.detail)},o=f[n]||(f[n]=new Map);o.set(t,r),s.push((function(){document.body.removeEventListener(n,r),o.delete(t)})),document.body.addEventListener(n,r)}else s.push((function(){return d.off(e,t)})),d.on(e,t)},c.off=function(e,t){if("event:"===e.substring(0,6)&&u){var n=e.substring(6),r=f[n],o=null==r?void 0:r.get(t);o&&document.body.removeEventListener(n,o)}else d.off(e,t)},c._clearAllListeners=function(){return s.forEach((function(e){return e()})),c},c.state=Object.assign({},c.state,r.initialState);var p=[],v=!1;function g(e){v=!0,p.push(e)}function h(t,n,r){void 0===r&&(r={}),c.emit("event",t,n),e.getOr("event",xe)(t,n);var o=[r.legacy?"[LEGACY]":r.fromEventea?"[EVENTEA]":"","Dispatched event:"].filter((function(e){return!!e})).join(" ");a.info(o,t,n)}var w=!1,b=[];c.addEventsHandler=function(e){return b.push(e),c},c.addEventsHandler((function e(t,n){var r=this&&this.isSendContext?this:{};!u||document.body||w||(g(new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),w=!0),!1===v?h(t,n,r):Promise.all(p).then((function(r){v=r.length!==p.length,e(t,n)}))}));var I,P=function(e){var t=c.state;return t!==e&&(c.state=e,c.emit("change",e,t)),c},C=(I=[],{run:function(e,t){for(var n=[],r=2;arguments.length>r;r++)n[r-2]=arguments[r];var o=I.map((function(t){return t(e)}));return W.apply(void 0,o)(t).apply(void 0,n)},add:function(e){I.push(e)}});c.use=function(t){var n="plugin"in t?t.plugin:t;try{n({config:r,tracking:c,context:e,update:P,providersPipeline:C,addEventsBlocker:g})}catch(e){a.error(e,"Failed to initialize plugin "+t.name)}return c},c.event=function(e,t){return b.forEach((function(n){return n(e,t)})),c},c.addPixel=function(e){return function(t){return document.createElement("img").src=j(t),e}}(c),c.addPixels=function(e){return function(t,n){void 0===n&&(n={});var r=n.timeout,o=void 0===r?3e3:r,i=n.completeEvent,a=void 0===i?"pixelRequestsCompleted":i,u=t.map(j),c=u.map(R),s=!1;return q?Promise.resolve(e.event(a,{timeout:s,urls:u})):Promise.race([N(c),new Promise((function(e){return setTimeout((function(){s=!0,e(null)}),o)}))]).then((function(){return e.event(a,{timeout:s,urls:u})}))}}(c),c.utils={getConsentVault:function(){return o}},c.addUtil=function(t){var n=t.name,r=t.init;try{c.utils[n]=r({tracking:c,context:e}),c.emit("util-provided:"+n,c.utils[n])}catch(e){a.error(e,"Failed to initialize util "+n)}return c},c.callUtil=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];var o=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout has been reached"))}),r.utilTimeout)})),i=new Promise((function(n){var r;e in c.utils?n((r=c.utils)[e].apply(r,t)):c.on("util-provided:"+e,(function(e){n(e.apply(void 0,t))}))}));return Promise.race([i,o]).catch((function(t){a.error(t,'Calling tracking utility "'+e+'" has been failed')}))},c.extend=function(e){a.info("Tracking extend:",e);var t=Object.keys(e).reduce((function(t,n){return m(t,n.split("."),e[n])}),c.state);return P(t)},c.extendDeep=function(e){a.info("Tracking extendDeep:",e);var t=Object.keys(e).reduce((function(t,n){return k(t,n.split("."),(function(e,t){return z(e)&&z(t)?function(){for(var e=arguments,t=arguments.length,n=0,r=arguments[0];++n<t;)r=S(r,e[n]);return r}(e,t):t}),e[n])}),c.state);return P(t)},c.remove=function(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];a.info("Tracking remove:",e.join(", "));var n=y.apply(void 0,i([c.state],e.map((function(e){return e.split(".")})),!1));return P(n)},c.updateLocation=function(){var t=function(t){var n,r=V.run(e);return r.href!==(null===(n=t.url)||void 0===n?void 0:n.href)?m(t,"url",r):t}(c.state);return t!==c.state&&(P(t),c.emit("newLocation")),c},c.update=P;var E=r.providers||{},O=function(t,n){if(void 0===n&&(n=!1),t.needsConsent&&!o.isAllowed(t.needsConsent))return o.once("update",(function(){O(t,n)})),Promise.resolve();var r,i=t.stateKey||t.name,u=E[t.name];if(c.emit("provider-run",t.name),n){var s=void 0;if(i instanceof Array){var d=i.reduce((function(e,t){return void 0!==l(c.state,t)&&(e[t]=l(c.state,t)),e}),{});re(d)||(s=d)}else s=l(c.state,i.split("."));if(void 0!==s)return c.emit("provider-resolved",t.name,s),Promise.resolve()}try{r=Promise.resolve(C.run(t,t.run,e,u))}catch(e){r=Promise.reject(e)}return r.then((function(e){!function(e,t){var n;c.extend("string"==typeof e?((n={})[e]=t,n):t)}(i,e),c.emit("provider-resolved",t.name,e)})).catch((function(e){if(!e||"ESkipApply"!==e.code)throw c.emit("provider-error",t.name,e),a.error(e,"Provider "+t.name+" error"),e}))},T=function(t){var n=t.map((function(t){return"client"===e.env&&t.observe&&t.observe(e,(function(){O(t,!1)})),O(t,!0)}));return n.length?N(n):Promise.resolve()};return c.ready=Promise.resolve().then((function(){return T(t)})),c._prot={collectDataElements:function(e,t){return ce(c,e,t)},collectDataElement:function(e){return ae(c,e)},context:e,dataPool:_e},c.waitFor=function(e){return e in c.state?Promise.resolve(c.state[e]):new Promise((function(t,n){c.on("provider-resolved",(function(n,r){n===e&&t(r)})),c.on("provider-error",(function(t,r){t===e&&n(r)}))}))},c.fullfill=T,c._version="5.55.1",u&&h("tracking-created",c),c})(new Ie(Be()),Wt,Nr).use((function(e){var n=e.context,r=n.location.query.parent_url;if(r){var o=n.get("parseUrl"),i=o(decodeURIComponent(r)),a=t(t({},function(e,t){var n=e.query,r=t.query;if(["utm_source","utm_medium","utm_campaign"].some((function(e){return!!n[e]})))return{};for(var o={},i=0,a=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];a.length>i;i++){var u=a[i],c=r[u];"string"==typeof c&&(o[u]=c)}return o}(n.location,i)),function(e,t){var n,r=t.query;return e.query.rb_clickid||!r.rb_clickid?{}:((n={}).rb_clickid=r.rb_clickid,n)}(n.location,i));if(Object.keys(a).length>0){var u=o(n.location.href),c=t(t({},u.query),a);u.search=Pt((function(e,t){var n=c[t];return void 0!==n&&e.push(encodeURIComponent(t)+"="+encodeURIComponent(n)),e}),[],Object.keys(c)).join("&"),window.history.replaceState(window.history.state,"",u.href)}}})).use((function(e){var t=e.tracking,n=e.addEventsBlocker;window.trackingStore=t,window.addPixel=t.addPixel;var r=ln();n(r),r.then((function(){return t.event("satelliteReady")}))})).use((Mr="tinkoff-pwa",jr="main",function(e){var t=e.tracking,n=e.context;Y.getItem("_twt_ttm_disabled_")||(mr.id=Date.now()+"-"+Math.round(1e3*Math.random()),mr.wuid=yr.run(n),window._ttm={eventsQueue:[],session:mr,buildId:null},vr(.01,{level:"info",isHit:!0}),t.addEventsHandler((function(e,t){var n,r;try{null===(r=null===(n=window._ttm)||void 0===n?void 0:n.eventsQueue)||void 0===r||r.push({type:e,data:t})}catch(e){vr(1,{level:"error",errorType:"events-queue-error",handled:!0,pushEventError:!0},e)}})),"complete"===document.readyState?hr(Mr,jr):window.addEventListener("load",(function(){return hr(Mr,jr)})))})).use((function(e){var t=e.tracking;t.on("event:track-data",(function(e){t.extend(e)}))})).use((function(e){var t=e.tracking,n=performance.timing.navigationStart;t.on("newLocation",(function(){n=+new Date,t.remove("timing")}));for(var r=function(e){t.on("event:"+e,(function(){var r;n&&t.extend(((r={})["timing."+e]=+new Date-n,r))}))},o=0,i=["pageLoad"];i.length>o;o++){r(i[o])}})).use(function(e){void 0===e&&(e={});var t=Object.assign({},Gt,e),n=t.timings,r=t.stepsStartEvent,o=t.stepsEndEvent;return function(e){var t=e.tracking,i=e.context.get("logger"),a={};t.on("newLocation",(function(){t.remove("stepDurations")})),Object.keys(n).forEach((function(e){var r=n[e];t.on("event:"+r[0],(function(){a[e]=Date.now()})),t.on("event:"+r[1],(function(){var n,r=Date.now(),o=a[e];o&&r>=o&&t.extend(((n={})["stepDurations."+e]=Math.round((r-o)/1e3),n))}))})),function(e,t,n,r){var o,i={};function a(e){void 0!==e&&(o=e,i[e]=Date.now())}function u(t){var n;if(void 0!==t){var r=i[t],o="timeOnStep"+t,a=Date.now();r&&a>=r&&e.extend(((n={})["stepDurations."+o]=Math.round((a-r)/1e3),n))}}e.on("event:"+n,(function(){return a(1)})),e.on("change",(function(e,n){e.step!==n.step&&e.step>1&&(o&&e.step>o+1&&t.error(new Error("Steps has been skipped in step durations plugin: from "+o+" to "+e.step)),u(o),a(e.step))})),e.on("event:"+r,(function(){return u(o)})),e.on("newLocation",(function(){return o=void 0}))}(t,i,r,o)}}()).use(function(e){var r=Jt($t,e),o=r.eventDelay,i=r.scrollEventName;return function(e){var r=e.tracking,a={viewport:0,height:0,scroll:0};function u(){var e=Bt(),r=e.scrollTop,o=n(e,["scrollTop"]);return a=t(t({},o),{scroll:Math.max(a.scroll,r)})}function c(){a={viewport:0,height:0,scroll:0};var e=Bt().scrollTop;r.extend(t(t({scrollOnPage:e},u()),Zt()))}c(),window.addEventListener("scroll",it(o,(function(){var e=u();r.extend(e).event(i,e)}))),window.addEventListener("beforeunload",(function(){Xt(a)})),r.on("newLocation",(function(){Xt(a),c()}))}}()).use((Or={providers:{device:{key:"dpDeviceData",age:12096e5}}},Tr=Object.create(null),Vr=function(e,t){return Tr[e]||(Tr[e]=function(e,t){var n=t.key;if(!n)throw new Error("options.key is empty");return function(){for(var r=[],o=0;arguments.length>o;o++)r[o]=arguments[o];if(!cn())return e.apply(void 0,r);var i=""+n+sn,a=Number(localStorage.getItem(i)),u=localStorage.getItem(n);if(!isNaN(a)&&Date.now()<a&&u)return JSON.parse(u);localStorage.removeItem(i);var c=e.apply(void 0,r);return Promise.resolve(c).then((function(e){localStorage.setItem(n,JSON.stringify(e)),t.age&&localStorage.setItem(i,(Date.now()+1e3*t.age).toString())})),c}}(t,Or.providers[e])),Tr[e]},function(e){e.providersPipeline.add((function(e){var t=e.name;return function(e){return function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];var o=t in Or.providers?Vr(t,e):e;return o.apply(void 0,n)}}}))})).use(function(e){void 0===e&&(e={});var n,r=e.timeouts,o=void 0===r?an:r,i=e.waitFor,a=e.tracked,u=e.useEventea,c=e.eventPayload,s=!!i,d=rn({readyEvent:"pageLoad",readyEventPayload:t(t({},void 0===c?{}:c),{initiator:"web-tracking"}),action:function(e,t){if(!n)throw new Error("action call: Plugin pageLoad isn't bound");u&&(window._evnteq=window._evnteq||[],window._evnteq.push(["send",{project:"pwa",event:"pageLoad",payload:t}])),n.event("pageLoad",t)},beforeEvent:"beforePageLoad",timeouts:o,tracked:a,resetOnSPATransition:!0,blocked:s});return i&&i.then((function(){d.setBlocked(!1)})),function(e){return n=e.tracking,d.plugin(e)}}(t({timeouts:{adblock:1e3},useEventea:!0},l(Nr,["plugins","pageLoad"])))).use((function(e){var t=e.tracking,n=e.context,r=new Mn(t,n),o=n.get("logger"),i=t.waitFor("dspClickId"),a=jn?new Promise((function(e){return t.on("do:pageLoad:invalidate",e)})):Promise.resolve(),u=function(e){return o.warn("Ожидание "+e+" tracking.state завершилось с ошибкой. Dsp-пиксели могут быть потеряны")};Promise.all([a.catch((function(){return u("server")})),i.catch((function(){return u("client")}))]).then((function(){var e=In(t,n,r);pn(t,e),t.addUtil(Tn(e,r))}))})).use((function(e){var t=e.tracking;t.extend({firstPage:1}),t.on("newLocation",(function(){t.extend({firstPage:0})}))})).use((function(e){var n=e.tracking,r=e.context,o={containerName:r.get("config").atmContainerName||"tinkoff",fallbackContainer:{src:"https://www.cdn-tinkoff.ru/twa/l/latest/launch-platform.min.js",adobeAnalyticsAccount:"tcsbank"}},i=ar(o),a=ar(t(t({},o),{loadingDelayPromise:new Promise((function(e){window.addEventListener("load",(function(){return e()}))}))}));sr in r.location.query?n.use("true"===r.location.query.lazyLaunch?a:i):n.use(cr({featureName:"lazy launch",groups:{default:{run:i},"delayed to window load event":{segments:[1,2,3,4,5,6,7,8],run:a}}}))})).use((function(e){var t,n=e.tracking,r=e.context.get("logger"),o=ie(Dn,n.state);An(Fn(n),qn,Un,Rn,(t=o,function(e){var n,r=(n=t)?n.split("-")[0]:void 0;if(!r)return e;var o=e.filter((function(e){return e.id!==r}));return i(i([],o,!0),[{id:r,timestamp:Date.now()}],!1)}))(Ln(r))})).use(function(e){return void 0===e&&(e={}),function(t){var n=t.tracking,r=t.context,o=e.waitFor,i=e.timeout,a=void 0===i?2e3:i,u=r.location.hostname,c=r.get("logger"),s=n.ready;if(o){var d=new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout reached waiting for providers: "+o.join(",")))}),a)}));s=Promise.race([Promise.all(o.map((function(e){return n.waitFor(e)}))),d])}return s.then((function(){var e=u.split(".").slice(-2).join("."),t=Wn[e];t&&n.addPixel(t)})).catch((function(e){c.error(e,"failed to run cookie-duplicator plugin")}))}}({waitFor:["pageLanding","wuid"]})).use((function(e){var t=e.tracking,n=["formAutosave","formSubmit","formCompleted"],r=Gn(t,e.context);t.on("event",(function(e){var t,o=e;1===(null===(t=e.match(/\./g))||void 0===t?void 0:t.length)&&(o=e.split(".")[1]);var i=zn((function(e){return e===o}),n);i&&r(i)})),t.on("event:resultScreenShown",(function(){"pfpmvno"===t.state.appName&&r("formSubmit")})),t._tempMvnoFunnelEvent=!0,t.addUtil({name:"tcpaSendEvent",init:function(){return r}})})).addUtil(Sr).addUtil(_r).addUtil(Pr).addUtil({name:"tramExtendData",init:function(e){var t=e.tracking;return function(e,n){return t.extend(e),t}}}).addUtil({name:"tramPostData",init:function(){return function(e,t){}}}).addUtil({name:"fbq",init:function(e){return e.context.get("logger").info("fbq util has been replaced with empty function. Calls like tracking.callUtil('fbq', ...) will be ignored"),function(){}}}).addUtil(br).addUtil(Ar)}();
