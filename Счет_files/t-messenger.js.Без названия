!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["t-messenger"]=t():e["t-messenger"]=t()}(self,(function(){return(()=>{"use strict";var e={435:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OUTGOING_MESSAGE_PREFIX=t.DRAFT_MESSAGE_PREFIX=t.AUDIO_MESSAGE_TEXT=t.WIDGET_MESSAGE_TEXT=t.STICKER_MESSAGE_TEXT=t.PAYMENT_MESSAGE_TEXT=t.IMAGE_MESSAGE_TEXT=t.FILE_MESSAGE_TEXT=t.NEW_CONVERSATION_MESSAGE_ID=t.MAX_MESSAGE_LENGTH=void 0,t.MAX_MESSAGE_LENGTH=4096,t.NEW_CONVERSATION_MESSAGE_ID="NEW_MESSAGE",t.FILE_MESSAGE_TEXT="Файл",t.IMAGE_MESSAGE_TEXT="Фото",t.PAYMENT_MESSAGE_TEXT="Перевод",t.STICKER_MESSAGE_TEXT="Стикер",t.WIDGET_MESSAGE_TEXT="Виджет",t.AUDIO_MESSAGE_TEXT="Аудиосообщение",t.DRAFT_MESSAGE_PREFIX="Черновик",t.OUTGOING_MESSAGE_PREFIX="Вы"},3:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,function(e){e.Text="text",e.File="file",e.Image="image",e.Widget="widget",e.System="system",e.Payment="payment",e.Sticker="sticker",e.Audio="audio"}(t.MessageType||(t.MessageType={}))},669:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WelcomeFormScreen=void 0,function(e){e.First="first",e.Second="second"}(t.WelcomeFormScreen||(t.WelcomeFormScreen={}))},522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.escapeRegExp=t.strikeThroughRegExp=t.strongRegExp=t.italicRegExp=t.underlineRegExp=t.htmlTagRegExp=void 0;t.htmlTagRegExp=new RegExp("(?:<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:'[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>|<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)","g"),t.underlineRegExp=/__(?=[^\s_])([\s\S]*?[^\s_])__(?=[^_]|$)/g,t.italicRegExp=/_(?=[^\s_])([\s\S]*?[^\s_])_(?=[^_]|$)/g,t.strongRegExp=/\*\*(?=[^\s*])([\s\S]*?[^\s*])\*\*(?=[^*]|$)/g,t.strikeThroughRegExp=/~~(?=[^\s~])([\s\S]*?[^\s~])~~(?=[^~]|$)/g,t.escapeRegExp=/[.*+?^${}()|[\]\\]/g},10:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeMarkdownAndLinks=void 0;var s=n(522);t.sanitizeMarkdownAndLinks=function(e){return e.replace(s.htmlTagRegExp,"").replace(s.underlineRegExp,"$1").replace(s.italicRegExp,"$1").replace(s.strongRegExp,"$1").replace(s.strikeThroughRegExp,"$1")}},415:function(e,t,n){var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var M in t=arguments[n])Object.prototype.hasOwnProperty.call(t,M)&&(e[M]=t[M]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.platformAuthenticationAddon=void 0;var M=n(360),o=n(959),r=n(258),i=n(466),E=function(){function e(){}return e.prototype.loadMessenger=function(e,t){var n=t.location,o=t.autofocus,r=t.requestNotificationPermission,E=t.data;M.Helpers.tmsgInitData={location:n,autofocus:o,requestNotificationPermission:r,chatStartInfo:s(s({},E),{referer:document.location.href})},M.Helpers.messengerFrameUrl=e,i.domHandlerAddon.addWidgetStyles(!1),this.listenTmsgPlatformMessages(M.Helpers.getTmsgHostUrl(e)),this.addPreloader(),this.loadTmsg()},e.prototype.initPlatformAuthFlow=function(e,t){var n=t.user;M.Helpers.authUserPayload=n,this.listenTmsgPlatformMessages(M.Helpers.getTmsgHostUrl(e))},e.prototype.listenForGuestZoneSwitching=function(){var e=this;window.addEventListener("storage",(function(t){var n=t.storageArea,r=t.key,i=t.newValue;n===localStorage&&r===o.TMSG_STORAGE_GUEST_TOKEN&&"true"===i&&(M.Helpers.platformInfo=s(s({},M.Helpers.platformInfo),{user:null}),e.loadMessenger(M.Helpers.messengerFrameUrl,M.Helpers.platformInfo))}))},e.prototype.checkForGuestZone=function(){if(!M.Helpers.authUserPayload)try{localStorage.setItem(o.TMSG_STORAGE_GUEST_TOKEN,"true"),localStorage.removeItem(o.TMSG_STORAGE_GUEST_TOKEN)}catch(e){}},e.prototype.loadTmsg=function(){var e=M.Helpers.getAppId(M.Helpers.tmsgInitData.location,"bank"),t=M.Helpers.getTmsgHostUrl(M.Helpers.messengerFrameUrl),n=s(s({},M.Helpers.tmsgInitData),{appId:e});M.Helpers.messengerFrameEl.style.display="block",r.pubSubAddon.emit(o.widgetEvents.INIT_TMSG,M.Helpers.appContainer,t,n)},e.prototype.listenTmsgPlatformMessages=function(e){var t=M.Helpers.getOriginFromUrl(e);window.addEventListener("message",(function(e){var n=!e.origin||e.origin===t;e.data&&n&&(e.data.messageCode===o.widgetEvents.TMSG_PLATFORM_USER_REQUEST&&M.Helpers.messengerFrameEl.contentWindow.postMessage({messageCode:o.widgetEvents.TMSG_PLATFORM_USER_RESPONSE,data:M.Helpers.authUserPayload},t))}))},e.prototype.addPreloader=function(){i.domHandlerAddon.messengerPreloader||(i.domHandlerAddon.messengerPreloader=document.createElement("div"),M.Helpers.appContainer.appendChild(i.domHandlerAddon.messengerPreloader)),i.domHandlerAddon.messengerPreloader.className=o.MESSENGER_PRELOADER_CLASSES.VISIBLE},e}();t.platformAuthenticationAddon=new E},466:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.domHandlerAddon=void 0;var s=n(959),M=n(360),o=n(258),r=n(669),i=function(){function e(){this.closeMessengerOnStart=!0}return Object.defineProperty(e.prototype,"isMessengerOffPage",{get:function(){return this.messengerContainer.getBoundingClientRect().right>document.body.offsetWidth},enumerable:!1,configurable:!0}),e.prototype.listenSidebarClose=function(){var e=this;window.TCS&&s.appsWithHiddenSidebar.indexOf(window.TCS.project)<0||setInterval((function(){M.Helpers.isMessengerOpened&&e.isMessengerOffPage&&o.pubSubAddon.emit(s.widgetEvents.CLOSE_MESSENGER)}),500)},e.prototype.listenUnreadIndicatorChanges=function(){var e=this;o.pubSubAddon.on(s.callbackEvents.ON_UNREAD_INDICATOR_CHANGED,(function(t){e.unreadIndicator.className=t&&!M.Helpers.isMessengerOpened?s.UNREAD_INDICATOR_CLASSES.VISIBLE:s.UNREAD_INDICATOR_CLASSES.HIDDEN}))},e.prototype.listenUnreadMessagesCountChange=function(){var e=this;o.pubSubAddon.on(s.callbackEvents.ON_UNREAD_MESSAGES_COUNT_CHANGED,(function(t){e.unreadMessagesCount.innerText=""+(t>99?99:t)}))},e.prototype.appendElements=function(e){e.appendChild(M.Helpers.messengerFrameEl)},e.prototype.initTmsgButton=function(e,t){this.addWidgetStyles(!0,t),this.addMessengerButton(e),this.listenMessengerButtonEvents()},e.prototype.addMessengersList=function(e,t){var n=this;this.addMessengersListStyles(),this.messengersListContainer=document.createElement("div"),this.messengersListContainer.className=s.MESSENGERS_LIST_CLASSES.CLOSED,M.Helpers.getMessengersListItems(t).forEach((function(e){n.messengersListContainer.appendChild(n.getMessengersListElement(e))}));var r=this.getChatElement();r.addEventListener("click",(function(e){e.stopPropagation(),n.messengersListContainer.className=s.MESSENGERS_LIST_CLASSES.CLOSED,o.pubSubAddon.emit(s.widgetEvents.OPEN_MESSENGER)})),this.messengersListContainer.appendChild(r),e.appendChild(this.messengersListContainer)},e.prototype.hideMessengerPreloader=function(){this.messengerPreloader&&(this.messengerPreloader.className=s.MESSENGER_PRELOADER_CLASSES.HIDDEN)},e.prototype.addWidgetStyles=function(e,t){void 0===e&&(e=!0);var n=document.createElement("style"),o=(e?s.getWidgetButtonStyles(t):"")+s.getWidgetFrameContainerStyles(M.Helpers.isCheckMobileNeed)+s.widgetPreloaderStyles;n.appendChild(document.createTextNode(o)),document.head.appendChild(n)},e.prototype.addWelcomeFormStyles=function(){var e=document.createElement("style"),t=s.getWidgetFrameWelcomeFormContainerStyles(M.Helpers.isCheckMobileNeed);e.appendChild(document.createTextNode(t)),document.head.appendChild(e)},e.prototype.setMessengerOpenedStyles=function(){this.messengerContainer.className=s.MESSENGER_FRAME_CLASSES.OPENED,this.messengerButton.className=s.MESSENGER_BUTTON_CLASSES.OPENED,this.unreadIndicator.className=s.UNREAD_INDICATOR_CLASSES.HIDDEN,M.Helpers.shouldDisplayWelcomeForm&&this.addWelcomeFormClasses(),M.Helpers.isMessengerInited||(this.messengerPreloader.className=s.MESSENGER_PRELOADER_CLASSES.VISIBLE)},e.prototype.setMessengerClosedStyles=function(){this.messengerContainer.className=s.MESSENGER_FRAME_CLASSES.CLOSED,this.messengerButton.className=s.MESSENGER_BUTTON_CLASSES.CLOSED,this.unreadIndicator.className=s.UNREAD_INDICATOR_CLASSES.HIDDEN,this.messengerPreloader.className=s.MESSENGER_PRELOADER_CLASSES.HIDDEN,M.Helpers.isUnreadMessages&&(this.unreadIndicator.className=s.UNREAD_INDICATOR_CLASSES.VISIBLE)},e.prototype.onMessengerOpen=function(){this.messengerButton&&this.setMessengerOpenedStyles()},e.prototype.onMessengerClose=function(){this.messengerButton&&this.setMessengerClosedStyles()},e.prototype.onMessengersListOpen=function(){this.messengersListContainer&&(M.Helpers.isMessengersListOpened=!0,this.messengerButton.className=s.MESSENGER_BUTTON_CLASSES.OPENED,this.messengersListContainer.className=s.MESSENGERS_LIST_CLASSES.OPENED)},e.prototype.onMessengersListClose=function(){this.messengersListContainer&&(M.Helpers.isMessengersListOpened=!1,this.messengersListContainer.className=s.MESSENGERS_LIST_CLASSES.CLOSED)},e.prototype.setElementsStyle=function(){Object.keys(s.elements).forEach((function(e){var t=s.elements[e],n=t.element,M=t.styles,o=t.attrs;Object.keys(M).forEach((function(e){n.style[e]=M[e]})),Object.keys(o).forEach((function(e){n.setAttribute(e,o[e])}))}))},e.prototype.updateWelcomeFormScreen=function(e){this.removeWelcomeFormClasses(),M.Helpers.shouldDisplayWelcomeForm=!!e,M.Helpers.currentWelcomeFormScreen=e,M.Helpers.shouldDisplayWelcomeForm&&this.addWelcomeFormClasses()},e.prototype.addMessengerButton=function(e){this.messengerButton=document.createElement("div"),this.messengerButton.innerHTML=s.buttonMarkup,this.unreadIndicator=document.createElement("div"),this.unreadMessagesCount=document.createElement("div"),this.messengerContainer=document.createElement("div"),this.messengerPreloader=document.createElement("div"),this.messengerButton.className=s.MESSENGER_BUTTON_CLASSES.HIDDEN,this.messengerContainer.className=s.MESSENGER_FRAME_CLASSES.CLOSED,this.messengerPreloader.className=s.MESSENGER_PRELOADER_CLASSES.HIDDEN,this.messengerButton.appendChild(this.unreadIndicator),this.unreadIndicator.appendChild(this.unreadMessagesCount),e.appendChild(this.messengerButton),e.appendChild(this.messengerContainer),this.messengerContainer.appendChild(this.messengerPreloader),M.Helpers.appContainer=this.messengerContainer,this.messengerContainer.appendChild(M.Helpers.messengerFrameEl)},e.prototype.listenMessengerButtonEvents=function(){this.messengerButton.addEventListener("click",(function(e){e.stopPropagation(),o.pubSubAddon.emit(s.widgetEvents.TOGGLE_MESSENGER)}))},e.prototype.getMessengersListElement=function(e){var t=e.icon,n=e.href,s=e.name,M=document.createElement("a");return M.innerHTML='<a class="tmsg-messengers-list__item" href="'+n+'" target="_blank" rel="noopener">\n            <div class="tmsg-messengers-list__icon" style="background-image: url(\''+t+"')\"></div>\n            <span>"+s+"</span>\n        </a>",M},e.prototype.getChatElement=function(){var e=document.createElement("div");return e.innerHTML='<div class="tmsg-messengers-list__item">\n            <div class="tmsg-messengers-list__icon" style="background-image: url(\'https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/tmsg.svg\')"></div>\n            <span>Чат</span>\n        </div>',e},e.prototype.addMessengersListStyles=function(){var e=document.createElement("style");e.appendChild(document.createTextNode(s.widgetMessengersListStyles)),document.head.appendChild(e)},e.prototype.addWelcomeFormClasses=function(){var e,t=this.getCurrentWelcomeFormClasses();(e=this.messengerContainer.classList).add.apply(e,t.split(" "))},e.prototype.removeWelcomeFormClasses=function(){var e,t=this.getCurrentWelcomeFormClasses();(e=this.messengerContainer.classList).remove.apply(e,t.split(" "))},e.prototype.getCurrentWelcomeFormClasses=function(){switch(M.Helpers.currentWelcomeFormScreen){case r.WelcomeFormScreen.First:return s.MESSENGER_WELCOME_FORM_CLASSES.FIRST_SCREEN;case r.WelcomeFormScreen.Second:var e=Object.keys(M.Helpers.welcomeFormConfig.secondScreen.controls).length;return s.MESSENGER_WELCOME_FORM_CLASSES.SECOND_SCREEN+" welcome-form_"+e+"-control";default:return""}},e}();t.domHandlerAddon=new i},776:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.messengerInitAddon=void 0;var s=n(466),M=function(){function e(){this.isInitFnInvoked=!1,this.initFn=function(){},this.timer=null}return e.prototype.initMessenger=function(e,t){var n=this;this.initFn=e;var s=t&&t.startOnClick,M=t&&t.startDelay;if(!s)return M?(this.showMessengerButton(),void(this.timer=setTimeout((function(){n.invokeInitFn()}),M))):void this.invokeInitFn();this.showMessengerButton()},e.prototype.onMessengerOpen=function(){s.domHandlerAddon.messengerButton&&!this.isInitFnInvoked&&(clearTimeout(this.timer),this.invokeInitFn())},e.prototype.invokeInitFn=function(){this.initFn(),this.isInitFnInvoked=!0},e.prototype.showMessengerButton=function(){s.domHandlerAddon.closeMessengerOnStart=!1,s.domHandlerAddon.setMessengerClosedStyles(),s.domHandlerAddon.setElementsStyle()},e}();t.messengerInitAddon=new M},943:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.widgetNotificationAddon=void 0;var s=n(258),M=n(959),o=n(360),r="active_tab",i=function(){function e(){this.canCreateNotifications=!0,s.pubSubAddon.on(M.notificationEvents.NOTIFY,this.notify,this),s.pubSubAddon.on(M.notificationEvents.RECALCULATE_ACTIVE_TAB,this.recalculateActiveTab,this)}return Object.defineProperty(e.prototype,"notificationsApi",{get:function(){return window.Notification},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notificationsAvailable",{get:function(){return!!this.notificationsApi&&this.canCreateNotifications},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPermission",{get:function(){return this.notificationsAvailable&&"granted"===this.notificationsApi.permission},enumerable:!1,configurable:!0}),e.prototype.recalculateActiveTab=function(){document.hasFocus()?setTimeout((function(){localStorage.setItem(r,"true")})):localStorage.removeItem(r)},e.prototype.initialize=function(){var e=this;this.notificationsAvailable&&(this.recalculateActiveTab(),this.askForNotifications(),window.addEventListener("beforeunload",(function(){e.recalculateActiveTab()})),window.addEventListener("focus",this.recalculateActiveTab.bind(this,!0)),window.addEventListener("blur",this.recalculateActiveTab.bind(this,!1)))},e.prototype.notify=function(e,t,n,s){if(!localStorage.getItem(r)&&this.notificationsAvailable){var M;try{M=new this.notificationsApi(e,{body:t,tag:n,data:s,icon:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/general/push-notification-icon.png"})}catch(e){return void(this.canCreateNotifications=!1)}M.onclick=function(){window.focus(),window["t-messenger"].api.openMessenger(),s&&s.conversation&&window["t-messenger"].api.openConversation(s.conversation),this.close()}}},e.prototype.askForNotifications=function(){var e=!1!==o.Helpers.tmsgInitData.requestNotificationPermission;this.notificationsAvailable&&!this.hasPermission&&e&&this.notificationsApi.requestPermission()},e}();t.widgetNotificationAddon=new i},264:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.postMessageListenersAddon=void 0;var s=n(959),M=n(360),o=n(258),r=n(3),i=function(){function e(){}return e.prototype.listenMessages=function(){window.addEventListener("message",(function(e){if(e.data){var t=e.data,n=t.messageCode,i=t.data;switch(n){case s.messengerEvents.UPDATE_UNREAD_COUNTER:o.pubSubAddon.emit(s.callbackEvents.ON_UNREAD_INDICATOR_CHANGED,!!i),M.Helpers.isUnreadMessages=!!i;break;case s.messengerEvents.UPDATE_UNREAD_MESSAGES_COUNT:o.pubSubAddon.emit(s.callbackEvents.ON_UNREAD_MESSAGES_COUNT_CHANGED,i);break;case s.messengerEvents.NEW_MESSAGE:o.pubSubAddon.emit(s.callbackEvents.ON_NEW_MESSAGE,i);break;case s.messengerEvents.TMSG_INIT:M.Helpers.isMessengerInited=!0,M.Helpers.sendQueuedMessages(),o.pubSubAddon.emit(s.callbackEvents.ON_MESSENGER_INIT),o.pubSubAddon.emit(s.callbackEvents.ON_MESSENGER_INITED);break;case s.messengerEvents.TMSG_CLOSE:o.pubSubAddon.emit(s.widgetEvents.CLOSE_MESSENGER);break;case s.messengerEvents.OPEN_CHAT:case s.messengerEvents.CONVERSATION_CREATION:o.pubSubAddon.emit(s.widgetEvents.OPEN_MESSENGER),M.Helpers.sendPostMessage(s.messengerEvents.TMSG_OPEN_DRAFT,i);break;case s.messengerEvents.COMPANY_CHANGED:M.Helpers.sendPostMessage(s.messengerEvents.UPDATE_COMPANY_ID,i.selectedCompany.id);break;case s.messengerEvents.FOCUS_EVENT:o.pubSubAddon.emit(s.notificationEvents.RECALCULATE_ACTIVE_TAB);break;case s.messengerEvents.PUSH_NOTIFICATION:var E=i.message,g=i.conversation,a=i.content;if(E.messageType===r.MessageType.System)break;var N=a||M.Helpers.getMessageContentForWebPush(E);o.pubSubAddon.emit(s.notificationEvents.NOTIFY,E.author.name,N,E.id,{conversation:g});break;case s.messengerEvents.TMSG_UPDATE_SESSION:o.pubSubAddon.emit(s.callbackEvents.ON_MESSENGER_UPDATE_SESSION);break;case s.messengerEvents.TMSG_URL_REQUEST:M.Helpers.sendPostMessage(s.messengerEvents.TMSG_URL_RESPONSE,M.Helpers.messengerFrameUrl);break;case s.messengerEvents.TMSG_WELCOME_FORM_DISPLAY_STATUS:M.Helpers.shouldDisplayWelcomeForm=i;break;case s.messengerEvents.TMSG_WELCOME_FORM_SCREEN_CHANGE:o.pubSubAddon.emit(s.widgetEvents.UPDATE_WELCOME_FORM_SCREEN,i);break;default:return}}}))},e}();t.postMessageListenersAddon=new i},258:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pubSubAddon=void 0;var n=function(){function e(){this.eventObj={}}return e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s=this.eventObj[e];s&&s.apply(void 0,t)},e.prototype.on=function(e,t,n){this.eventObj[e]=t.bind(n)},e}();t.pubSubAddon=new n},754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSystem=void 0,function(e){e.Sso="sso",e.Webim="webim"}(t.AuthSystem||(t.AuthSystem={}))},360:function(e,t,n){var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var M in t=arguments[n])Object.prototype.hasOwnProperty.call(t,M)&&(e[M]=t[M]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Helpers=void 0;var M,o,r=n(959),i=n(435),E=n(3),g=n(669),a=n(10),N=function(){function e(){}return Object.defineProperty(e,"messengerFrameEl",{get:function(){return r.elements.messengerContent.element},enumerable:!1,configurable:!0}),Object.defineProperty(e,"messengerFrameOrigin",{get:function(){return o},enumerable:!1,configurable:!0}),Object.defineProperty(e,"messengerFrameUrl",{get:function(){return M},set:function(t){o=e.getOriginFromUrl(t),M=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"audioMessagesEnabled",{get:function(){return!(e.isSafari()||e.isIE())},enumerable:!1,configurable:!0}),e.getOriginFromUrl=function(e){var t=e.split("/");return t[0]+"//"+t[2].split("?")[0]},e.checkIfMobileVersion=function(){var t=window.innerWidth<r.MOBILE_WIDTH_BEGIN;t!==e.isMobileMode&&(e.isMobileMode=t,e.sendPostMessage(r.messengerEvents.PLATFORM_RESIZE,e.isMobileMode))},e.sendQueuedMessages=function(){e.postMessagesQueue.length&&e.isMessengerInited&&(e.postMessagesQueue.forEach((function(t){var n=t.messageCode,s=t.data;return e.sendPostMessage(n,s)})),e.postMessagesQueue=[])},e.sendPostMessage=function(t,n){e.messengerFrameEl.contentWindow&&e.isMessengerInited?e.messengerFrameEl.contentWindow.postMessage({messageCode:t,data:n},e.messengerFrameOrigin):e.postMessagesQueue.push({messageCode:t,data:n})},e.mapUserFields=function(e){var t=s({},e);return delete t.crc,{fields:t,hash:e.crc}},e.getTmsgHostUrl=function(e){return e.replace(/(business|webim)/g,"tmsg").replace(/\/messenger\/(sme|platform)\/?/g,"").split("?")[0]},e.getMessageContentForWebPush=function(e){switch(e.messageType){case E.MessageType.Payment:return i.PAYMENT_MESSAGE_TEXT;case E.MessageType.Image:return i.IMAGE_MESSAGE_TEXT;case E.MessageType.File:return i.FILE_MESSAGE_TEXT;case E.MessageType.Sticker:return i.STICKER_MESSAGE_TEXT+" "+e.content.text;case E.MessageType.Widget:return i.WIDGET_MESSAGE_TEXT;case E.MessageType.Audio:return i.AUDIO_MESSAGE_TEXT;default:return a.sanitizeMarkdownAndLinks(e.content.text)}},e.getAppId=function(e,t){return void 0===t&&(t="business"),Object.keys(r.productsLocation).find((function(t){return-1!==r.productsLocation[t].indexOf(e)}))||t},e.getMessengersListItems=function(e){var t={telegram:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/telegram.svg",viber:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/viber.svg",whatsapp:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/whatsapp.svg"},n=[],s={telegram:"Телеграм",viber:"Viber",whatsapp:"WhatsApp"};return Object.keys(t).forEach((function(M){e[M]&&n.push({name:s[M],href:e[M],icon:t[M]})})),n},e.isSafari=function(){var e=document&&document.defaultView;return!!e&&"safari"in e},e.isIE=function(){return-1!==e.getUserAgent().indexOf("trident")},e.getUserAgent=function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():""},e.isMessengerInited=!1,e.isMessengerOpened=!1,e.isMessengersListOpened=!1,e.isUnreadMessages=!1,e.postMessagesQueue=[],e.isCheckMobileNeed=!1,e.isMobileMode=!1,e.shouldDisplayWelcomeForm=!1,e.currentWelcomeFormScreen=g.WelcomeFormScreen.First,e}();t.Helpers=N},959:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var M in t=arguments[n])Object.prototype.hasOwnProperty.call(t,M)&&(e[M]=t[M]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getWidgetFrameWelcomeFormContainerStyles=t.getWidgetFrameContainerStyles=t.getWidgetButtonStyles=t.elements=t.widgetWelcomeFormStyles=t.widgetMessengersListStyles=t.widgetPreloaderStyles=t.defaultWidgetButtonConfig=t.buttonMarkup=t.appsWithHiddenSidebar=t.messengerPosition=t.applicationInCorner=t.applicationsWithButtonInCorner=t.MESSENGERS_LIST_CLASSES=t.UNREAD_INDICATOR_CLASSES=t.MESSENGER_PRELOADER_CLASSES=t.MESSENGER_BUTTON_CLASSES=t.MESSENGER_WELCOME_FORM_CLASSES=t.MESSENGER_FRAME_CLASSES=t._noop=t.productsLocation=t.notificationEvents=t.callbackEvents=t.widgetEvents=t.messengerEvents=t.TMSG_STORAGE_GUEST_TOKEN=t.MOBILE_WIDTH_BEGIN=void 0,t.MOBILE_WIDTH_BEGIN=768,t.TMSG_STORAGE_GUEST_TOKEN="isTmsgGuestZone",t.messengerEvents={UPDATE_UNREAD_COUNTER:"updateUnreadCounter",UPDATE_UNREAD_MESSAGES_COUNT:"updateUnreadMessagesCount",NEW_MESSAGE:"tmsg-newMessage",TMSG_INIT:"tmsg-init",TMSG_CLOSE:"tmsg-close",TMSG_USER_INFO:"tmsg-userInfo",OPEN_CHAT:"OPEN_CHAT",CONVERSATION_CREATION:"conversationCreation",MESSENGER_OPENED_STATUS:"messengerOpenedStatus",PLATFORM_RESIZE:"platformResize",PLATFORM_INFO:"platformInfo",TMSG_USER_CHANGED:"tmsg-user-changed",TMSG_CONFIG_INFO:"tmsg-config-info",TMSG_UPDATE_SESSION:"tmsg-update-session",UPDATE_SESSION:"update-session",COMPANY_CHANGED:"companySelectedEvent",UPDATE_COMPANY_ID:"update-companyId",FOCUS_EVENT:"focus-event",PUSH_NOTIFICATION:"push-notification",OPEN_CONVERSATION:"open-conversation",OPEN_CONVERSATION_BY_ID:"open-conversation-by-id",OPEN_CONVERSATION_BY_APP_ID:"open-conversation-by-app-id",UPDATE_LOCATION:"update-location",UPDATE_APPLICATIONS:"update-applications",TMSG_OPEN_DRAFT:"tmsg-openDraft",TMSG_URL_REQUEST:"tmsg-url-request",TMSG_URL_RESPONSE:"tmsg-url-response",SEND_MESSAGE:"tmsg-send-message",TMSG_WIDGET_TITLE:"tmsg-widget-title",TMSG_COLOR_CONFIG:"tmsg-color-config",TMSG_WELCOME_FORM_CONFIG:"tmsg-welcome-form-config",TMSG_WELCOME_FORM_DISPLAY_STATUS:"tmsg-welcome-form-display-status",TMSG_WELCOME_FORM_SCREEN_CHANGE:"tmsg-welcome-form-screen-changed",UPDATE_LOCALE:"tmsg-update-locale"},t.widgetEvents={LISTEN_MESSAGES:"LISTEN_MESSAGES",LISTEN_AUTH_MESSAGES:"LISTEN_AUTH_MESSAGES",SET_ELEMENTS_STYLE:"SET_ELEMENTS_STYLE",TOGGLE_MESSENGER:"TOGGLE_MESSENGER",OPEN_MESSENGER:"OPEN_MESSENGER",CLOSE_MESSENGER:"CLOSE_MESSENGER",INIT_TMSG:"INIT_TMSG",INIT_PLATFORM:"INIT_PLATFORM",TMSG_PLATFORM_USER_REQUEST:"tmsg-platform-user-request",TMSG_PLATFORM_USER_RESPONSE:"tmsg-platform-user-response",UPDATE_WELCOME_FORM_SCREEN:"UPDATE_WELCOME_FORM_SCREEN"},t.callbackEvents={ON_MESSENGER_FAIL:"ON_MESSENGER_FAIL",ON_MESSENGER_INITED:"ON_MESSENGER_INITED",ON_USER_CHANGED:"ON_USER_CHANGED",ON_MESSENGER_CLOSE:"ON_MESSENGER_CLOSE",ON_MESSENGER_OPEN:"ON_MESSENGER_OPEN",ON_UNREAD_INDICATOR_CHANGED:"ON_UNREAD_INDICATOR_CHANGED",ON_UNREAD_MESSAGES_COUNT_CHANGED:"ON_UNREAD_MESSAGES_COUNT_CHANGED",ON_NEW_MESSAGE:"ON_NEW_MESSAGE",ON_MESSENGER_INIT:"ON_MESSENGER_INIT",ON_MESSENGER_UPDATE_SESSION:"ON_MESSENGER_UPDATE_SESSION"},t.notificationEvents={NOTIFY:"NOTIFY",RECALCULATE_ACTIVE_TAB:"RECALCULATE_ACTIVE_TAB"},t.productsLocation={invest:["web_terminal"],accounting:["accounting"],tcb_carloans:["carloans_help"],hr_rabota:["rmr_wof_hr","DKO_EL_CLOUD_INV_PERVICHKA","DKO_EL_CLOUD_OKK_PERVICHKA","DKO_EL_CLOUD_SME_PERVICHKA","DKO_EL_CLOUD_TM_PERVICHKA","DKO_EL_CLOUD_TM_SAVE_PERVICHKA","DKO_EL_CLOUD_TC_PERVICHKA","HCC_EL_KNZ","HCC_EL_UOP","HCC_EL_USP","help_recruiting","learn_recruiting","e-learning_sme_ab_test","elearningsmeabtest","Partners_KK","Partners_KNZ","Partners_SU","WT_collection","WT_collection_wg","b2b_education","verif_chat","Internet_acquiring","identification_chat","education_chat_1","education_chat_2"],tinkoff_edu:["fintech"]};t._noop=function(){},function(e){e.OPENED="messenger-frame messenger-frame-opened",e.CLOSED="messenger-frame messenger-frame-closed"}(t.MESSENGER_FRAME_CLASSES||(t.MESSENGER_FRAME_CLASSES={})),function(e){e.FIRST_SCREEN="welcome-form welcome-form_first-screen",e.SECOND_SCREEN="welcome-form welcome-form_second-screen"}(t.MESSENGER_WELCOME_FORM_CLASSES||(t.MESSENGER_WELCOME_FORM_CLASSES={})),function(e){e.OPENED="messenger-button messenger-opened",e.CLOSED="messenger-button messenger-closed",e.HIDDEN="messenger-button messenger-button-hidden"}(t.MESSENGER_BUTTON_CLASSES||(t.MESSENGER_BUTTON_CLASSES={})),function(e){e.VISIBLE="messenger-preloader",e.HIDDEN="messenger-preloader messenger-preloader-hidden"}(t.MESSENGER_PRELOADER_CLASSES||(t.MESSENGER_PRELOADER_CLASSES={})),function(e){e.VISIBLE="unread-indicator",e.HIDDEN="unread-indicator unread-indicator-hidden"}(t.UNREAD_INDICATOR_CLASSES||(t.UNREAD_INDICATOR_CLASSES={})),function(e){e.OPENED="tmsg-messengers-list-container tmsg-messengers-list-container_opened",e.CLOSED="tmsg-messengers-list-container tmsg-messengers-list-container_closed"}(t.MESSENGERS_LIST_CLASSES||(t.MESSENGERS_LIST_CLASSES={})),t.applicationsWithButtonInCorner=["shopwindow"],t.applicationInCorner=!window.TCS||t.applicationsWithButtonInCorner.indexOf(window.TCS.project)>-1,t.messengerPosition=t.applicationInCorner?"fixed":"absolute",t.appsWithHiddenSidebar=["sme-t-store","sme-saas-crm","sme-sites","sme-telephony","sme-notification","encashment"],t.buttonMarkup='<div class="messenger-button__inner-wrapper">\n        <div class="messenger-button__icon messenger-button__icon-chat"></div>\n        <div class="messenger-button__icon messenger-button__icon-close"></div>\n    </div>',t.defaultWidgetButtonConfig={backgroundColor:"#ffdd2d",backgroundHoverColor:"#ffce1c",unreadIndicatorColor:"#e31c1c",iconOpen:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMjkiIHZpZXdCb3g9IjAgMCAzMCAyOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDYuNzVDMCA0LjY0OTggMCAzLjU5OTcgMC40MDg3MjYgMi43OTc1NEMwLjc2ODI1MSAyLjA5MTkzIDEuMzQxOTMgMS41MTgyNSAyLjA0NzU0IDEuMTU4NzNDMi44NDk3IDAuNzUgMy44OTk4IDAuNzUgNiAwLjc1SDI0QzI2LjEwMDIgMC43NSAyNy4xNTAzIDAuNzUgMjcuOTUyNSAxLjE1ODczQzI4LjY1ODEgMS41MTgyNSAyOS4yMzE3IDIuMDkxOTMgMjkuNTkxMyAyLjc5NzU0QzMwIDMuNTk5NyAzMCA0LjY0OTggMzAgNi43NVYxNy4yNUMzMCAxOS4zNTAyIDMwIDIwLjQwMDMgMjkuNTkxMyAyMS4yMDI1QzI5LjIzMTcgMjEuOTA4MSAyOC42NTgxIDIyLjQ4MTcgMjcuOTUyNSAyMi44NDEzQzI3LjE1MDMgMjMuMjUgMjYuMTAwMiAyMy4yNSAyNCAyMy4yNUgxNi4yNUwxMS4wNjY5IDI4LjA2NjlDMTAuNjczMiAyOC40NjA3IDEwIDI4LjE4MTggMTAgMjcuNjI1VjIzLjI1SDZDMy44OTk4IDIzLjI1IDIuODQ5NyAyMy4yNSAyLjA0NzU0IDIyLjg0MTNDMS4zNDE5MyAyMi40ODE3IDAuNzY4MjUxIDIxLjkwODEgMC40MDg3MjYgMjEuMjAyNUMwIDIwLjQwMDMgMCAxOS4zNTAyIDAgMTcuMjVWNi43NVpNNi4yNSA4LjI1QzYuMjUgNy41NTk2NCA2LjgwOTY0IDcgNy41IDdINy41Mjg1OEg3LjU1NzExSDcuNTg1NTlINy42MTQwMkg3LjY0MjRINy42NzA3NEg3LjY5OTAzSDcuNzI3MjdINy43NTU0Nkg3Ljc4MzYxSDcuODExN0g3LjgzOTc2SDcuODY3NzZINy44OTU3Mkg3LjkyMzYzSDcuOTUxNDlINy45NzkzMUg4LjAwNzA5SDguMDM0ODFIOC4wNjI1SDguMDkwMTNIOC4xMTc3Mkg4LjE0NTI3SDguMTcyNzdIOC4yMDAyM0g4LjIyNzY0SDguMjU1MDFIOC4yODIzNEg4LjMwOTYySDguMzM2ODZIOC4zNjQwNUg4LjM5MTIxSDguNDE4MzFIOC40NDUzOEg4LjQ3MjRIOC40OTkzOEg4LjUyNjMySDguNTUzMjJIOC41ODAwOEg4LjYwNjg5SDguNjMzNjZIOC42NjAzOUg4LjY4NzA4SDguNzEzNzNIOC43NDAzNEg4Ljc2NjkxSDguNzkzNDRIOC44MTk5Mkg4Ljg0NjM3SDguODcyNzhIOC44OTkxNUg4LjkyNTQ4SDguOTUxNzdIOC45NzgwMkg5LjAwNDIzSDkuMDMwNEg5LjA1NjU0SDkuMDgyNjRIOS4xMDg3SDkuMTM0NzJIOS4xNjA3SDkuMTg2NjVIOS4yMTI1Nkg5LjIzODQzSDkuMjY0MjdIOS4yOTAwNkg5LjMxNTgzSDkuMzQxNTVIOS4zNjcyNEg5LjM5MjlIOS40MTg1Mkg5LjQ0NDFIOS40Njk2NUg5LjQ5NTE2SDkuNTIwNjRIOS41NDYwOEg5LjU3MTQ5SDkuNTk2ODZIOS42MjIySDkuNjQ3NTFIOS42NzI3OEg5LjY5ODAySDkuNzIzMjNIOS43NDg0SDkuNzczNTRIOS43OTg2NUg5LjgyMzcySDkuODQ4NzZIOS44NzM3N0g5Ljg5ODc1SDkuOTIzN0g5Ljk0ODYxSDkuOTczNDlIOS45OTgzNEgxMC4wMjMySDEwLjA0OEgxMC4wNzI3SDEwLjA5NzRIMTAuMTIyMUgxMC4xNDY4SDEwLjE3MTRIMTAuMTk2MUgxMC4yMjA2SDEwLjI0NTJIMTAuMjY5N0gxMC4yOTQySDEwLjMxODdIMTAuMzQzMUgxMC4zNjc1SDEwLjM5MTlIMTAuNDE2MkgxMC40NDA1SDEwLjQ2NDhIMTAuNDg5MUgxMC41MTMzSDEwLjUzNzZIMTAuNTYxN0gxMC41ODU5SDEwLjYxSDEwLjYzNDFIMTAuNjU4MkgxMC42ODIzSDEwLjcwNjNIMTAuNzMwM0gxMC43NTQzSDEwLjc3ODJIMTAuODAyMkgxMC44MjYxSDEwLjg0OTlIMTAuODczOEgxMC44OTc2SDEwLjkyMTRIMTAuOTQ1MkgxMC45NjlIMTAuOTkyN0gxMS4wMTY0SDExLjA0MDFIMTEuMDYzOEgxMS4wODc0SDExLjExMUgxMS4xMzQ2SDExLjE1ODJIMTEuMTgxOEgxMS4yMDUzSDExLjIyODhIMTEuMjUyM0gxMS4yNzU4SDExLjI5OTJIMTEuMzIyNkgxMS4zNDYxSDExLjM2OTRIMTEuMzkyOEgxMS40MTYySDExLjQzOTVIMTEuNDYyOEgxMS40ODYxSDExLjUwOTNIMTEuNTMyNkgxMS41NTU4SDExLjU3OUgxMS42MDIySDExLjYyNTRIMTEuNjQ4NkgxMS42NzE3SDExLjY5NDhIMTEuNzE3OUgxMS43NDFIMTEuNzY0MUgxMS43ODcxSDExLjgxMDJIMTEuODMzMkgxMS44NTYySDExLjg3OTJIMTEuOTAyMkgxMS45MjUxSDExLjk0ODFIMTEuOTcxSDExLjk5MzlIMTIuMDE2OEgxMi4wMzk3SDEyLjA2MjVIMTIuMDg1NEgxMi4xMDgySDEyLjEzMTFIMTIuMTUzOUgxMi4xNzY3SDEyLjE5OTRIMTIuMjIyMkgxMi4yNDVIMTIuMjY3N0gxMi4yOTA0SDEyLjMxMzJIMTIuMzM1OUgxMi4zNTg2SDEyLjM4MTJIMTIuNDAzOUgxMi40MjY2SDEyLjQ0OTJIMTIuNDcxOUgxMi40OTQ1SDEyLjUxNzFIMTIuNTM5N0gxMi41NjIzSDEyLjU4NDlIMTIuNjA3NUgxMi42M0gxMi42NTI2SDEyLjY3NTFIMTIuNjk3N0gxMi43MjAySDEyLjc0MjdIMTIuNzY1MkgxMi43ODc3SDEyLjgxMDJIMTIuODMyN0gxMi44NTUySDEyLjg3NzZIMTIuOTAwMUgxMi45MjI2SDEyLjk0NUgxMi45Njc0SDEyLjk4OTlIMTMuMDEyM0gxMy4wMzQ3SDEzLjA1NzFIMTMuMDc5NUgxMy4xMDE5SDEzLjEyNDNIMTMuMTQ2N0gxMy4xNjkxSDEzLjE5MTVIMTMuMjEzOUgxMy4yMzYzSDEzLjI1ODZIMTMuMjgxSDEzLjMwMzRIMTMuMzI1N0gxMy4zNDgxSDEzLjM3MDRIMTMuMzkyOEgxMy40MTUxSDEzLjQzNzRIMTMuNDU5OEgxMy40ODIxSDEzLjUwNDRIMTMuNTI2OEgxMy41NDkxSDEzLjU3MTRIMTMuNTkzOEgxMy42MTYxSDEzLjYzODRIMTMuNjYwN0gxMy42ODNIMTMuNzA1NEgxMy43Mjc3SDEzLjc1SDEzLjc3MjNIMTMuNzk0NkgxMy44MTdIMTMuODM5M0gxMy44NjE2SDEzLjg4MzlIMTMuOTA2MkgxMy45Mjg2SDEzLjk1MDlIMTMuOTczMkgxMy45OTU2SDE0LjAxNzlIMTQuMDQwMkgxNC4wNjI2SDE0LjA4NDlIMTQuMTA3MkgxNC4xMjk2SDE0LjE1MTlIMTQuMTc0M0gxNC4xOTY2SDE0LjIxOUgxNC4yNDE0SDE0LjI2MzdIMTQuMjg2MUgxNC4zMDg1SDE0LjMzMDlIMTQuMzUzM0gxNC4zNzU3SDE0LjM5ODFIMTQuNDIwNUgxNC40NDI5SDE0LjQ2NTNIMTQuNDg3N0gxNC41MTAxSDE0LjUzMjZIMTQuNTU1SDE0LjU3NzRIMTQuNTk5OUgxNC42MjI0SDE0LjY0NDhIMTQuNjY3M0gxNC42ODk4SDE0LjcxMjNIMTQuNzM0OEgxNC43NTczSDE0Ljc3OThIMTQuODAyM0gxNC44MjQ5SDE0Ljg0NzRIMTQuODdIMTQuODkyNUgxNC45MTUxSDE0LjkzNzdIMTQuOTYwM0gxNC45ODI5SDE1LjAwNTVIMTUuMDI4MUgxNS4wNTA4SDE1LjA3MzRIMTUuMDk2MUgxNS4xMTg4SDE1LjE0MTRIMTUuMTY0MUgxNS4xODY4SDE1LjIwOTZIMTUuMjMyM0gxNS4yNTVIMTUuMjc3OEgxNS4zMDA2SDE1LjMyMzNIMTUuMzQ2MUgxNS4zNjg5SDE1LjM5MThIMTUuNDE0NkgxNS40Mzc1SDE1LjQ2MDNIMTUuNDgzMkgxNS41MDYxSDE1LjUyOUgxNS41NTE5SDE1LjU3NDlIMTUuNTk3OEgxNS42MjA4SDE1LjY0MzhIMTUuNjY2OEgxNS42ODk4SDE1LjcxMjlIMTUuNzM1OUgxNS43NTlIMTUuNzgyMUgxNS44MDUySDE1LjgyODNIMTUuODUxNEgxNS44NzQ2SDE1Ljg5NzhIMTUuOTIxSDE1Ljk0NDJIMTUuOTY3NEgxNS45OTA3SDE2LjAxMzlIMTYuMDM3MkgxNi4wNjA1SDE2LjA4MzhIMTYuMTA3MkgxNi4xMzA2SDE2LjE1MzlIMTYuMTc3NEgxNi4yMDA4SDE2LjIyNDJIMTYuMjQ3N0gxNi4yNzEySDE2LjI5NDdIMTYuMzE4MkgxNi4zNDE4SDE2LjM2NTRIMTYuMzg5SDE2LjQxMjZIMTYuNDM2MkgxNi40NTk5SDE2LjQ4MzZIMTYuNTA3M0gxNi41MzFIMTYuNTU0OEgxNi41Nzg2SDE2LjYwMjRIMTYuNjI2MkgxNi42NTAxSDE2LjY3MzlIMTYuNjk3OEgxNi43MjE4SDE2Ljc0NTdIMTYuNzY5N0gxNi43OTM3SDE2LjgxNzdIMTYuODQxOEgxNi44NjU5SDE2Ljg5SDE2LjkxNDFIMTYuOTM4M0gxNi45NjI0SDE2Ljk4NjdIMTcuMDEwOUgxNy4wMzUySDE3LjA1OTVIMTcuMDgzOEgxNy4xMDgxSDE3LjEzMjVIMTcuMTU2OUgxNy4xODEzSDE3LjIwNThIMTcuMjMwM0gxNy4yNTQ4SDE3LjI3OTRIMTcuMzAzOUgxNy4zMjg2SDE3LjM1MzJIMTcuMzc3OUgxNy40MDI2SDE3LjQyNzNIMTcuNDUySDE3LjQ3NjhIMTcuNTAxN0gxNy41MjY1SDE3LjU1MTRIMTcuNTc2M0gxNy42MDEySDE3LjYyNjJIMTcuNjUxMkgxNy42NzYzSDE3LjcwMTRIMTcuNzI2NUgxNy43NTE2SDE3Ljc3NjhIMTcuODAySDE3LjgyNzJIMTcuODUyNUgxNy44Nzc4SDE3LjkwMzFIMTcuOTI4NUgxNy45NTM5SDE3Ljk3OTRIMTguMDA0OEgxOC4wMzA0SDE4LjA1NTlIMTguMDgxNUgxOC4xMDcxSDE4LjEzMjhIMTguMTU4NEgxOC4xODQySDE4LjIwOTlIMTguMjM1N0gxOC4yNjE2SDE4LjI4NzRIMTguMzEzNEgxOC4zMzkzSDE4LjM2NTNIMTguMzkxM0gxOC40MTc0SDE4LjQ0MzVIMTguNDY5NkgxOC40OTU4SDE4LjUyMkgxOC41NDgySDE4LjU3NDVIMTguNjAwOUgxOC42MjcySDE4LjY1MzZIMTguNjgwMUgxOC43MDY2SDE4LjczMzFIMTguNzU5N0gxOC43ODYzSDE4LjgxMjlIMTguODM5NkgxOC44NjYzSDE4Ljg5MzFIMTguOTE5OUgxOC45NDY4SDE4Ljk3MzdIMTkuMDAwNkgxOS4wMjc2SDE5LjA1NDZIMTkuMDgxN0gxOS4xMDg4SDE5LjEzNTlIMTkuMTYzMUgxOS4xOTA0SDE5LjIxNzdIMTkuMjQ1SDE5LjI3MjRIMTkuMjk5OEgxOS4zMjcySDE5LjM1NDdIMTkuMzgyM0gxOS40MDk5SDE5LjQzNzVIMTkuNDY1MkgxOS40OTI5SDE5LjUyMDdIMTkuNTQ4NUgxOS41NzY0SDE5LjYwNDNIMTkuNjMyMkgxOS42NjAySDE5LjY4ODNIMTkuNzE2NEgxOS43NDQ1SDE5Ljc3MjdIMTkuODAxSDE5LjgyOTNIMTkuODU3NkgxOS44ODZIMTkuOTE0NEgxOS45NDI5SDE5Ljk3MTRIMjBDMjAuNjkwNCA3IDIxLjI1IDcuNTU5NjQgMjEuMjUgOC4yNUMyMS4yNSA4Ljk0MDM2IDIwLjY5MDQgOS41IDIwIDkuNUgxOS45NzE0SDE5Ljk0MjlIMTkuOTE0NEgxOS44ODZIMTkuODU3NkgxOS44MjkzSDE5LjgwMUgxOS43NzI3SDE5Ljc0NDVIMTkuNzE2NEgxOS42ODgzSDE5LjY2MDJIMTkuNjMyMkgxOS42MDQzSDE5LjU3NjRIMTkuNTQ4NUgxOS41MjA3SDE5LjQ5MjlIMTkuNDY1MkgxOS40Mzc1SDE5LjQwOTlIMTkuMzgyM0gxOS4zNTQ3SDE5LjMyNzJIMTkuMjk5OEgxOS4yNzI0SDE5LjI0NUgxOS4yMTc3SDE5LjE5MDRIMTkuMTYzMUgxOS4xMzU5SDE5LjEwODhIMTkuMDgxN0gxOS4wNTQ2SDE5LjAyNzZIMTkuMDAwNkgxOC45NzM3SDE4Ljk0NjhIMTguOTE5OUgxOC44OTMxSDE4Ljg2NjNIMTguODM5NkgxOC44MTI5SDE4Ljc4NjNIMTguNzU5N0gxOC43MzMxSDE4LjcwNjZIMTguNjgwMUgxOC42NTM2SDE4LjYyNzJIMTguNjAwOUgxOC41NzQ1SDE4LjU0ODJIMTguNTIySDE4LjQ5NThIMTguNDY5NkgxOC40NDM1SDE4LjQxNzRIMTguMzkxM0gxOC4zNjUzSDE4LjMzOTNIMTguMzEzNEgxOC4yODc0SDE4LjI2MTZIMTguMjM1N0gxOC4yMDk5SDE4LjE4NDJIMTguMTU4NEgxOC4xMzI4SDE4LjEwNzFIMTguMDgxNUgxOC4wNTU5SDE4LjAzMDRIMTguMDA0OEgxNy45Nzk0SDE3Ljk1MzlIMTcuOTI4NUgxNy45MDMxSDE3Ljg3NzhIMTcuODUyNUgxNy44MjcySDE3LjgwMkgxNy43NzY4SDE3Ljc1MTZIMTcuNzI2NUgxNy43MDE0SDE3LjY3NjNIMTcuNjUxMkgxNy42MjYySDE3LjYwMTJIMTcuNTc2M0gxNy41NTE0SDE3LjUyNjVIMTcuNTAxN0gxNy40NzY4SDE3LjQ1MkgxNy40MjczSDE3LjQwMjZIMTcuMzc3OUgxNy4zNTMySDE3LjMyODZIMTcuMzAzOUgxNy4yNzk0SDE3LjI1NDhIMTcuMjMwM0gxNy4yMDU4SDE3LjE4MTNIMTcuMTU2OUgxNy4xMzI1SDE3LjEwODFIMTcuMDgzOEgxNy4wNTk1SDE3LjAzNTJIMTcuMDEwOUgxNi45ODY3SDE2Ljk2MjRIMTYuOTM4M0gxNi45MTQxSDE2Ljg5SDE2Ljg2NTlIMTYuODQxOEgxNi44MTc3SDE2Ljc5MzdIMTYuNzY5N0gxNi43NDU3SDE2LjcyMThIMTYuNjk3OEgxNi42NzM5SDE2LjY1MDFIMTYuNjI2MkgxNi42MDI0SDE2LjU3ODZIMTYuNTU0OEgxNi41MzFIMTYuNTA3M0gxNi40ODM2SDE2LjQ1OTlIMTYuNDM2MkgxNi40MTI2SDE2LjM4OUgxNi4zNjU0SDE2LjM0MThIMTYuMzE4MkgxNi4yOTQ3SDE2LjI3MTJIMTYuMjQ3N0gxNi4yMjQySDE2LjIwMDhIMTYuMTc3NEgxNi4xNTM5SDE2LjEzMDZIMTYuMTA3MkgxNi4wODM4SDE2LjA2MDVIMTYuMDM3MkgxNi4wMTM5SDE1Ljk5MDdIMTUuOTY3NEgxNS45NDQySDE1LjkyMUgxNS44OTc4SDE1Ljg3NDZIMTUuODUxNEgxNS44MjgzSDE1LjgwNTJIMTUuNzgyMUgxNS43NTlIMTUuNzM1OUgxNS43MTI5SDE1LjY4OThIMTUuNjY2OEgxNS42NDM4SDE1LjYyMDhIMTUuNTk3OEgxNS41NzQ5SDE1LjU1MTlIMTUuNTI5SDE1LjUwNjFIMTUuNDgzMkgxNS40NjAzSDE1LjQzNzVIMTUuNDE0NkgxNS4zOTE4SDE1LjM2ODlIMTUuMzQ2MUgxNS4zMjMzSDE1LjMwMDZIMTUuMjc3OEgxNS4yNTVIMTUuMjMyM0gxNS4yMDk2SDE1LjE4NjhIMTUuMTY0MUgxNS4xNDE0SDE1LjExODhIMTUuMDk2MUgxNS4wNzM0SDE1LjA1MDhIMTUuMDI4MUgxNS4wMDU1SDE0Ljk4MjlIMTQuOTYwM0gxNC45Mzc3SDE0LjkxNTFIMTQuODkyNUgxNC44N0gxNC44NDc0SDE0LjgyNDlIMTQuODAyM0gxNC43Nzk4SDE0Ljc1NzNIMTQuNzM0OEgxNC43MTIzSDE0LjY4OThIMTQuNjY3M0gxNC42NDQ4SDE0LjYyMjRIMTQuNTk5OUgxNC41Nzc0SDE0LjU1NUgxNC41MzI2SDE0LjUxMDFIMTQuNDg3N0gxNC40NjUzSDE0LjQ0MjlIMTQuNDIwNUgxNC4zOTgxSDE0LjM3NTdIMTQuMzUzM0gxNC4zMzA5SDE0LjMwODVIMTQuMjg2MUgxNC4yNjM3SDE0LjI0MTRIMTQuMjE5SDE0LjE5NjZIMTQuMTc0M0gxNC4xNTE5SDE0LjEyOTZIMTQuMTA3MkgxNC4wODQ5SDE0LjA2MjZIMTQuMDQwMkgxNC4wMTc5SDEzLjk5NTZIMTMuOTczMkgxMy45NTA5SDEzLjkyODZIMTMuOTA2MkgxMy44ODM5SDEzLjg2MTZIMTMuODM5M0gxMy44MTdIMTMuNzk0NkgxMy43NzIzSDEzLjc1SDEzLjcyNzdIMTMuNzA1NEgxMy42ODNIMTMuNjYwN0gxMy42Mzg0SDEzLjYxNjFIMTMuNTkzOEgxMy41NzE0SDEzLjU0OTFIMTMuNTI2OEgxMy41MDQ0SDEzLjQ4MjFIMTMuNDU5OEgxMy40Mzc0SDEzLjQxNTFIMTMuMzkyOEgxMy4zNzA0SDEzLjM0ODFIMTMuMzI1N0gxMy4zMDM0SDEzLjI4MUgxMy4yNTg2SDEzLjIzNjNIMTMuMjEzOUgxMy4xOTE1SDEzLjE2OTFIMTMuMTQ2N0gxMy4xMjQzSDEzLjEwMTlIMTMuMDc5NUgxMy4wNTcxSDEzLjAzNDdIMTMuMDEyM0gxMi45ODk5SDEyLjk2NzRIMTIuOTQ1SDEyLjkyMjZIMTIuOTAwMUgxMi44Nzc2SDEyLjg1NTJIMTIuODMyN0gxMi44MTAySDEyLjc4NzdIMTIuNzY1MkgxMi43NDI3SDEyLjcyMDJIMTIuNjk3N0gxMi42NzUxSDEyLjY1MjZIMTIuNjNIMTIuNjA3NUgxMi41ODQ5SDEyLjU2MjNIMTIuNTM5N0gxMi41MTcxSDEyLjQ5NDVIMTIuNDcxOUgxMi40NDkySDEyLjQyNjZIMTIuNDAzOUgxMi4zODEySDEyLjM1ODZIMTIuMzM1OUgxMi4zMTMySDEyLjI5MDRIMTIuMjY3N0gxMi4yNDVIMTIuMjIyMkgxMi4xOTk0SDEyLjE3NjdIMTIuMTUzOUgxMi4xMzExSDEyLjEwODJIMTIuMDg1NEgxMi4wNjI1SDEyLjAzOTdIMTIuMDE2OEgxMS45OTM5SDExLjk3MUgxMS45NDgxSDExLjkyNTFIMTEuOTAyMkgxMS44NzkySDExLjg1NjJIMTEuODMzMkgxMS44MTAySDExLjc4NzFIMTEuNzY0MUgxMS43NDFIMTEuNzE3OUgxMS42OTQ4SDExLjY3MTdIMTEuNjQ4NkgxMS42MjU0SDExLjYwMjJIMTEuNTc5SDExLjU1NThIMTEuNTMyNkgxMS41MDkzSDExLjQ4NjFIMTEuNDYyOEgxMS40Mzk1SDExLjQxNjJIMTEuMzkyOEgxMS4zNjk0SDExLjM0NjFIMTEuMzIyNkgxMS4yOTkySDExLjI3NThIMTEuMjUyM0gxMS4yMjg4SDExLjIwNTNIMTEuMTgxOEgxMS4xNTgySDExLjEzNDZIMTEuMTExSDExLjA4NzRIMTEuMDYzOEgxMS4wNDAxSDExLjAxNjRIMTAuOTkyN0gxMC45NjlIMTAuOTQ1MkgxMC45MjE0SDEwLjg5NzZIMTAuODczOEgxMC44NDk5SDEwLjgyNjFIMTAuODAyMkgxMC43NzgySDEwLjc1NDNIMTAuNzMwM0gxMC43MDYzSDEwLjY4MjNIMTAuNjU4MkgxMC42MzQxSDEwLjYxSDEwLjU4NTlIMTAuNTYxN0gxMC41Mzc2SDEwLjUxMzNIMTAuNDg5MUgxMC40NjQ4SDEwLjQ0MDVIMTAuNDE2MkgxMC4zOTE5SDEwLjM2NzVIMTAuMzQzMUgxMC4zMTg3SDEwLjI5NDJIMTAuMjY5N0gxMC4yNDUySDEwLjIyMDZIMTAuMTk2MUgxMC4xNzE0SDEwLjE0NjhIMTAuMTIyMUgxMC4wOTc0SDEwLjA3MjdIMTAuMDQ4SDEwLjAyMzJIOS45OTgzNEg5Ljk3MzQ5SDkuOTQ4NjFIOS45MjM3SDkuODk4NzVIOS44NzM3N0g5Ljg0ODc2SDkuODIzNzJIOS43OTg2NUg5Ljc3MzU0SDkuNzQ4NEg5LjcyMzIzSDkuNjk4MDJIOS42NzI3OEg5LjY0NzUxSDkuNjIyMkg5LjU5Njg2SDkuNTcxNDlIOS41NDYwOEg5LjUyMDY0SDkuNDk1MTZIOS40Njk2NUg5LjQ0NDFIOS40MTg1Mkg5LjM5MjlIOS4zNjcyNEg5LjM0MTU1SDkuMzE1ODNIOS4yOTAwNkg5LjI2NDI3SDkuMjM4NDNIOS4yMTI1Nkg5LjE4NjY1SDkuMTYwN0g5LjEzNDcySDkuMTA4N0g5LjA4MjY0SDkuMDU2NTRIOS4wMzA0SDkuMDA0MjNIOC45NzgwMkg4Ljk1MTc3SDguOTI1NDhIOC44OTkxNUg4Ljg3Mjc4SDguODQ2MzdIOC44MTk5Mkg4Ljc5MzQ0SDguNzY2OTFIOC43NDAzNEg4LjcxMzczSDguNjg3MDhIOC42NjAzOUg4LjYzMzY2SDguNjA2ODlIOC41ODAwOEg4LjU1MzIySDguNTI2MzJIOC40OTkzOEg4LjQ3MjRIOC40NDUzOEg4LjQxODMxSDguMzkxMjFIOC4zNjQwNUg4LjMzNjg2SDguMzA5NjJIOC4yODIzNEg4LjI1NTAxSDguMjI3NjRIOC4yMDAyM0g4LjE3Mjc3SDguMTQ1MjdIOC4xMTc3Mkg4LjA5MDEzSDguMDYyNUg4LjAzNDgxSDguMDA3MDlINy45NzkzMUg3Ljk1MTQ5SDcuOTIzNjNINy44OTU3Mkg3Ljg2Nzc2SDcuODM5NzZINy44MTE3SDcuNzgzNjFINy43NTU0Nkg3LjcyNzI3SDcuNjk5MDNINy42NzA3NEg3LjY0MjRINy42MTQwMkg3LjU4NTU5SDcuNTU3MTFINy41Mjg1OEg3LjVDNi44MDk2NCA5LjUgNi4yNSA4Ljk0MDM2IDYuMjUgOC4yNVpNNi4yNSAxMy4yNUM2LjI1IDEyLjU1OTYgNi44MDk2NCAxMiA3LjUgMTJIMTUuODMzM0MxNi41MjM3IDEyIDE3LjA4MzMgMTIuNTU5NiAxNy4wODMzIDEzLjI1QzE3LjA4MzMgMTMuOTQwNCAxNi41MjM3IDE0LjUgMTUuODMzMyAxNC41SDcuNUM2LjgwOTY0IDE0LjUgNi4yNSAxMy45NDA0IDYuMjUgMTMuMjVaIiBmaWxsPSIjMzMzMzMzIi8+Cjwvc3ZnPgo=",iconClose:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xLjcwNzExIDAuMjkyODkzQzEuMzE2NTggLTAuMDk3NjMxMSAwLjY4MzQxOCAtMC4wOTc2MzExIDAuMjkyODkzIDAuMjkyODkzQy0wLjA5NzYzMTEgMC42ODM0MTggLTAuMDk3NjMxMSAxLjMxNjU4IDAuMjkyODkzIDEuNzA3MTFMNS41ODU3OSA3TDAuMjkyODkzIDEyLjI5MjlDLTAuMDk3NjMxMSAxMi42ODM0IC0wLjA5NzYzMTEgMTMuMzE2NiAwLjI5Mjg5MyAxMy43MDcxQzAuNjgzNDE4IDE0LjA5NzYgMS4zMTY1OCAxNC4wOTc2IDEuNzA3MTEgMTMuNzA3MUw3IDguNDE0MjFMMTIuMjkyOSAxMy43MDcxQzEyLjY4MzQgMTQuMDk3NiAxMy4zMTY2IDE0LjA5NzYgMTMuNzA3MSAxMy43MDcxQzE0LjA5NzYgMTMuMzE2NiAxNC4wOTc2IDEyLjY4MzQgMTMuNzA3MSAxMi4yOTI5TDguNDE0MjEgN0wxMy43MDcxIDEuNzA3MTFDMTQuMDk3NiAxLjMxNjU4IDE0LjA5NzYgMC42ODM0MTggMTMuNzA3MSAwLjI5Mjg5M0MxMy4zMTY2IC0wLjA5NzYzMTEgMTIuNjgzNCAtMC4wOTc2MzExIDEyLjI5MjkgMC4yOTI4OTNMNyA1LjU4NTc5TDEuNzA3MTEgMC4yOTI4OTNaIiBmaWxsPSIjMzMzMzMzIi8+Cjwvc3ZnPgo="},t.widgetPreloaderStyles=".messenger-preloader{box-sizing: border-box; z-index:3000;height: 30px; width: 30px; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ffdd2d; position: absolute; display:inline-block; border:3px solid; border-radius:50%; border-top-color:transparent;-webkit-animation:tmsg-rotate 1s linear infinite;animation:tmsg-rotate 1s linear infinite}.messenger-preloader-hidden{display: none}@-webkit-keyframes tmsg-rotate{0%{-webkit-transform: translate(-50%, -50%) rotate(0); transform: translate(-50%, -50%) rotate(0);}100%{-webkit-transform: translate(-50%, -50%) rotate(360deg);transform: translate(-50%, -50%) rotate(360deg);}}@keyframes tmsg-rotate{0%{-webkit-transform: translate(-50%, -50%) rotate(0);transform: translate(-50%, -50%) rotate(0);}100%{-webkit-transform: translate(-50%, -50%) rotate(360deg); transform: translate(-50%, -50%) rotate(360deg);}}",t.widgetMessengersListStyles=".tmsg-messengers-list-container {position: fixed; display: flex; justify-content: flex-end; flex-wrap: wrap; max-width: 360px; bottom: 92px; right: 12px; z-index: 1001;}\n     .tmsg-messengers-list-container_closed {display: none;}\n     .tmsg-messengers-list__item {display: flex; align-items: center; width: max-content; margin: 6px; padding: 4px; border-radius: 14px; color: #000; text-decoration: none; background: #eaecee; cursor: pointer;}\n     .tmsg-messengers-list__item:hover {background: #c7c9cc;}\n     .tmsg-messengers-list__item span {padding: 8px 12px;}\n     .tmsg-messengers-list__icon {width: 36px; height: 36px; border-radius: 14px; background-color: #fff; background-repeat: no-repeat; background-position: 50% 50%;}",t.widgetWelcomeFormStyles=".welcome-form.welcome-form_first-screen {height: 144px; min-height: 144px}\n     .welcome-form.welcome-form_second-screen.welcome-form_1-control {height: 316px; min-height: 316px}\n     .welcome-form.welcome-form_second-screen.welcome-form_2-control {height: 372px; min-height: 372px}\n     .welcome-form.welcome-form_second-screen.welcome-form_3-control {height: 430px; min-height: 430px}",t.elements={messengerContent:{element:document.createElement("iframe"),styles:{height:"100%",width:"100%",boxShadow:"4px 0px 24px rgba(0, 0, 0, 0.12)",borderRadius:"12px",background:"#fff"},attrs:{frameBorder:"0",allow:"clipboard-read; clipboard-write"}}},t.getWidgetButtonStyles=function(e){var s=n(n({},t.defaultWidgetButtonConfig),e),M=s.backgroundColor,o=s.backgroundHoverColor,r=s.iconOpen,i=s.iconClose,E=s.unreadIndicatorColor||t.defaultWidgetButtonConfig.unreadIndicatorColor;return":root {--mess-font-text: tuiText, -apple-system, 'BlinkMacSystemFont', system-ui, 'Roboto', 'Segoe UI', 'Helvetica Neue', sans-serif;--mess-font-text-s: normal 0.8125rem/1.25rem var(--mess-font-text);}html {font-size: 16px}.messenger-button{width:60px;height:60px;position:"+t.messengerPosition+";bottom:18px;right:18px; z-index: 1000;}.messenger-button__inner-wrapper{width:60px;height:60px;position:relative}.messenger-button__inner-wrapper:hover .messenger-button__icon{background-color:"+o+"}.messenger-button__icon{width:60px;height:60px;background-color:"+M+";background-repeat:no-repeat;background-position:50% 50%;position:absolute;left:0;right:0;top:0;bottom:0;border-radius:40px;box-shadow:0 10px 25px 0 rgba(0,0,0,.1);cursor:pointer;will-change:transform;-webkit-transition:all .2s cubic-bezier(.25,0,.25,1);-o-transition:all .2s cubic-bezier(.25,0,.25,1);transition:all .2s cubic-bezier(.25,0,.25,1);transition-property:transform,opacity,background-color,-webkit-transform;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.messenger-button__icon-chat{background-image:url("+r+")}.messenger-button__icon-close{background-image:url("+i+")}.messenger-opened .messenger-button__icon-close{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);opacity:1;}.messenger-closed .messenger-button__icon-close{opacity:0;}.messenger-opened .messenger-button__icon-chat{-webkit-transform:scale(.3);-ms-transform:scale(.3);transform:scale(.3);opacity:0;}.messenger-closed .messenger-button__icon-chat{opacity:1;}.messenger-button-hidden {display: none}.unread-indicator {position: absolute; right: -4px; top: -2px; background-color: "+E+"; width: 24px; height: 24px; border-radius: 50%; text-align: center; color: #fff; font: var(--mess-font-text-s); user-select: none; cursor: pointer; display: flex; align-items: center; justify-content: center;} .unread-indicator-hidden {display: none}"},t.getWidgetFrameContainerStyles=function(e){return(e?".messenger-frame {position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 2001;}@media (min-width: "+t.MOBILE_WIDTH_BEGIN+"px) {.messenger-frame { position: "+t.messengerPosition+"; width: 400px; height: 600px; max-height: calc(100vh - 212px); min-height: 360px; bottom: 92px; right: 18px; top: initial; left: initial; } }":".messenger-frame { position: "+t.messengerPosition+"; width: 400px; height: 600px; max-height: calc(100vh - 212px); min-height: 360px; bottom: 92px; right: 18px; top: initial; left: initial; }")+".messenger-frame-closed {visibility: hidden; height: 0}.messenger-frame-opened {visibility: visible; opacity: 1;}"},t.getWidgetFrameWelcomeFormContainerStyles=function(e){return e?"@media (min-width: "+t.MOBILE_WIDTH_BEGIN+"px) {"+t.widgetWelcomeFormStyles+"}":t.widgetWelcomeFormStyles}},177:function(e,t,n){var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var M in t=arguments[n])Object.prototype.hasOwnProperty.call(t,M)&&(e[M]=t[M]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.api=void 0;var M=n(959),o=n(943),r=n(360),i=n(258),E=n(466),g=n(264),a=n(415),N=n(754),S=n(776);function u(){r.Helpers.isCheckMobileNeed&&(r.Helpers.checkIfMobileVersion(),window.addEventListener("resize",(function(){r.Helpers.checkIfMobileVersion()})))}var d=function(){function e(){i.pubSubAddon.on(M.widgetEvents.CLOSE_MESSENGER,this.closeMessenger,this),i.pubSubAddon.on(M.widgetEvents.OPEN_MESSENGER,this.openMessenger,this),i.pubSubAddon.on(M.widgetEvents.TOGGLE_MESSENGER,this.toggleMessenger,this),i.pubSubAddon.on(M.widgetEvents.INIT_TMSG,this.initTmsg,this),i.pubSubAddon.on(M.widgetEvents.UPDATE_WELCOME_FORM_SCREEN,(function(e){E.domHandlerAddon.updateWelcomeFormScreen(e)}))}return e.prototype.initSmeButton=function(e,t){void 0===t&&(t=!1),r.Helpers.isCheckMobileNeed=!0,E.domHandlerAddon.initTmsgButton(e),t&&(E.domHandlerAddon.closeMessengerOnStart=!1,E.domHandlerAddon.setMessengerClosedStyles(),E.domHandlerAddon.setElementsStyle())},e.prototype.initSmeFrame=function(e,t){this.initSme(r.Helpers.appContainer,e,t),E.domHandlerAddon.listenUnreadIndicatorChanges(),E.domHandlerAddon.listenUnreadMessagesCountChange(),E.domHandlerAddon.listenSidebarClose()},e.prototype.initSmeWithButton=function(e,t,n){this.initSmeButton(e),this.initSmeFrame(t,n)},e.prototype.initSme=function(e,t,n){E.domHandlerAddon.messengerContainer||(r.Helpers.appContainer=e);var M=r.Helpers.getAppId(n.location,"business"),o=s(s({},n),{appId:M});this.initTmsg(r.Helpers.appContainer,t,o)},e.prototype.initTmsg=function(e,t,n,a){void 0===a&&(a={}),r.Helpers.tmsgInitData=n,r.Helpers.widgetOptions=a;var N=n.appId||r.Helpers.getAppId(r.Helpers.tmsgInitData.location,"default");!function(e,t){r.Helpers.messengerFrameUrl=t,g.postMessageListenersAddon.listenMessages(),E.domHandlerAddon.setElementsStyle(),r.Helpers.messengerFrameEl.src=r.Helpers.messengerFrameUrl,o.widgetNotificationAddon.initialize(),r.Helpers.messengerFrameEl.onload=function(){E.domHandlerAddon.messengerButton&&E.domHandlerAddon.closeMessengerOnStart&&E.domHandlerAddon.setMessengerClosedStyles(),window.addEventListener("beforeunload",(function(){i.pubSubAddon.emit(M.widgetEvents.CLOSE_MESSENGER)})),setTimeout((function(){r.Helpers.isMessengerInited||(i.pubSubAddon.emit(M.callbackEvents.ON_MESSENGER_FAIL),E.domHandlerAddon.hideMessengerPreloader())}),3e3)},E.domHandlerAddon.appendElements(e)}(e,r.Helpers.tmsgInitData.authSystem?t+"?app="+N+"&auth="+r.Helpers.tmsgInitData.authSystem:t+"?app="+N),u(),i.pubSubAddon.on(M.callbackEvents.ON_MESSENGER_INIT,(function(){var e=a.title,t=a.colorConfig,n=a.welcomeFormConfig;r.Helpers.tmsgInitData&&r.Helpers.sendPostMessage(M.messengerEvents.TMSG_USER_INFO,s(s({},r.Helpers.tmsgInitData),{audioMessagesEnabled:r.Helpers.audioMessagesEnabled})),e&&r.Helpers.sendPostMessage(M.messengerEvents.TMSG_WIDGET_TITLE,e),t&&r.Helpers.sendPostMessage(M.messengerEvents.TMSG_COLOR_CONFIG,t),n&&r.Helpers.sendPostMessage(M.messengerEvents.TMSG_WELCOME_FORM_CONFIG,n),E.domHandlerAddon.hideMessengerPreloader()}))},e.prototype.initTmsgWithButton=function(e,t,n,s){void 0===s&&(s={});var M=s.messengers,o=s.widgetButtonConfig,i=s.welcomeFormConfig;r.Helpers.isCheckMobileNeed=!0,E.domHandlerAddon.initTmsgButton(e,o),M&&E.domHandlerAddon.addMessengersList(e,M),i&&(r.Helpers.welcomeFormConfig=i,E.domHandlerAddon.addWelcomeFormStyles()),E.domHandlerAddon.listenUnreadIndicatorChanges(),E.domHandlerAddon.listenUnreadMessagesCountChange(),!!n.authSystem&&n.authSystem===N.AuthSystem.Webim&&a.platformAuthenticationAddon.initPlatformAuthFlow(t,n);var g=this.initTmsg.bind(this,r.Helpers.appContainer,t,n,s);S.messengerInitAddon.initMessenger(g,n.messengerStartConfig)},e.prototype.initPlatform=function(e,t,n,s){void 0===s&&(s=!0),r.Helpers.appContainer=e,r.Helpers.isCheckMobileNeed=s,r.Helpers.platformInfo=n,r.Helpers.authUserPayload=n.user,r.Helpers.initialPlatformUrl=t,u(),a.platformAuthenticationAddon.listenForGuestZoneSwitching(),a.platformAuthenticationAddon.loadMessenger(t,n)},e.prototype.onMessengerUpdateSession=function(e){i.pubSubAddon.on(M.callbackEvents.ON_MESSENGER_UPDATE_SESSION,e)},e.prototype.openMessenger=function(){r.Helpers.isMessengerOpened=!0,E.domHandlerAddon.closeMessengerOnStart=!1,E.domHandlerAddon.onMessengerOpen(),S.messengerInitAddon.onMessengerOpen(),E.domHandlerAddon.onMessengersListClose(),i.pubSubAddon.emit(M.callbackEvents.ON_MESSENGER_OPEN),r.Helpers.sendPostMessage(M.messengerEvents.MESSENGER_OPENED_STATUS,r.Helpers.isMessengerOpened)},e.prototype.closeMessenger=function(){r.Helpers.isMessengerOpened=!1,E.domHandlerAddon.onMessengerClose(),E.domHandlerAddon.onMessengersListClose(),i.pubSubAddon.emit(M.callbackEvents.ON_MESSENGER_CLOSE),r.Helpers.sendPostMessage(M.messengerEvents.MESSENGER_OPENED_STATUS,r.Helpers.isMessengerOpened)},e.prototype.toggleMessenger=function(){r.Helpers.isMessengerOpened||r.Helpers.isMessengersListOpened?this.closeMessenger():!E.domHandlerAddon.messengersListContainer||r.Helpers.isUnreadMessages?this.openMessenger():E.domHandlerAddon.onMessengersListOpen()},e.prototype.setAppLocation=function(e){r.Helpers.sendPostMessage(M.messengerEvents.UPDATE_LOCATION,e)},e.prototype.onNewMessage=function(e){i.pubSubAddon.on(M.callbackEvents.ON_NEW_MESSAGE,e)},e.prototype.onUnreadIndicatorChanged=function(e){i.pubSubAddon.on(M.callbackEvents.ON_UNREAD_INDICATOR_CHANGED,e)},e.prototype.onUnreadMessagesCountChange=function(e){i.pubSubAddon.on(M.callbackEvents.ON_UNREAD_MESSAGES_COUNT_CHANGED,e)},e.prototype.onMessengerOpen=function(e){i.pubSubAddon.on(M.callbackEvents.ON_MESSENGER_OPEN,e)},e.prototype.onMessengerClose=function(e){i.pubSubAddon.on(M.callbackEvents.ON_MESSENGER_CLOSE,e)},e.prototype.onMessengerInited=function(e){i.pubSubAddon.on(M.callbackEvents.ON_MESSENGER_INITED,e)},e.prototype.onMessengerFail=function(e){i.pubSubAddon.on(M.callbackEvents.ON_MESSENGER_FAIL,e)},e.prototype.onUserChanged=function(e,t){var n=e.user,M=e.location;if(r.Helpers.isMessengerInited){if(r.Helpers.authUserPayload=n,t)return r.Helpers.tmsgInitData.location=M||r.Helpers.tmsgInitData.location,void this.initTmsg(r.Helpers.appContainer,r.Helpers.messengerFrameUrl,r.Helpers.tmsgInitData,r.Helpers.widgetOptions);r.Helpers.platformInfo=s(s({},r.Helpers.platformInfo),{user:n,location:M}),a.platformAuthenticationAddon.checkForGuestZone(),a.platformAuthenticationAddon.loadMessenger(r.Helpers.messengerFrameUrl.split("?")[0],r.Helpers.platformInfo)}},e.prototype.updateCompanyId=function(e){r.Helpers.sendPostMessage(M.messengerEvents.UPDATE_COMPANY_ID,e)},e.prototype.updateApplications=function(e){r.Helpers.sendPostMessage(M.messengerEvents.UPDATE_APPLICATIONS,e)},e.prototype.updateLocale=function(e){r.Helpers.sendPostMessage(M.messengerEvents.UPDATE_LOCALE,e)},e.prototype.openConversation=function(e){this.openConversationById(null==e?void 0:e.conversationId)},e.prototype.openConversationById=function(e){r.Helpers.sendPostMessage(M.messengerEvents.OPEN_CONVERSATION_BY_ID,e)},e.prototype.openConversationByAppId=function(e){r.Helpers.sendPostMessage(M.messengerEvents.OPEN_CONVERSATION_BY_APP_ID,e)},e.prototype.insertMessage=function(e,t){this.openConversationWithDraftMessage(e,t)},e.prototype.openConversationWithDraftMessage=function(e,t){r.Helpers.sendPostMessage(M.messengerEvents.TMSG_OPEN_DRAFT,{messageDraft:e,appId:t})},e.prototype.sendMessage=function(e,t){var n=e.message;r.Helpers.sendPostMessage(M.messengerEvents.SEND_MESSAGE,{message:n,appId:t})},e}();t.api=new d}},t={};var n=function n(s){var M=t[s];if(void 0!==M)return M.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}(177);return n})()}));