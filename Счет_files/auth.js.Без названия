!function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=33)}([function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"i",function(){return c}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return h}),n.d(e,"g",function(){return d}),n.d(e,"h",function(){return p}),n.d(e,"k",function(){return l}),n.d(e,"j",function(){return v}),n.d(e,"e",function(){return m}),n.d(e,"b",function(){return g}),n.d(e,"l",function(){return y}),n.d(e,"f",function(){return b});var r=n(12),i=n(8),o=n(1);function s(t){if("string"==typeof t||!t){var e=t&&"?"===t[0]?t.substr(1):t;return new r(e)}var n=new r;for(var i in t)t.hasOwnProperty(i)&&n.append(i,t[i]);return n}var a=["authToken","code","state","session_state"];function u(){var e,t=(e=s(location.search),a.forEach(function(t){e.has(t)&&("code"!==t&&"state"!==t||e.append("_"+t,e.get(t)),e.delete(t))}),e.toString());return t?"?"+t:""}function c(t){window.location.replace(t)}function f(t,e,n){var i=decodeURIComponent(t);return decodeURIComponent(i+(/\?\S+$/.test(i)?"&":"?")+e+"="+n)}function h(){if(e=s(location.search),a.some(function(t){return e.has(t)})){var e,t=window.location.pathname+u();window.history.replaceState({},"",t)}}function d(t){void 0===t&&(t=location.search);var e=s(t);return{authToken:e.get("authToken"),code:e.get("code"),state:e.get("state"),sessionState:e.get("session_state")}}function p(){return window.location.href.split("?")[0]+u()}function l(t){return(t||"").replace(/^\/|\/$/g,"")}function v(t){var e=document.getElementById(t);e&&e.remove()}function m(t){var e=document.createElement("iframe");return e.style.width="0px",e.style.height="0px",e.style.position="absolute",e.style.left="-4000px",e.src=t,e}function g(t){document.body?document.body.appendChild(t):document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(t)})}function y(t){window.top===window.self&&localStorage.setItem(i.a,t)}function b(t){var e={detail:t},n=new CustomEvent(o.a,e);window.dispatchEvent(n)}},function(t,e,n){"use strict";n.d(e,"l",function(){return o}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"k",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"e",function(){return f}),n.d(e,"b",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"c",function(){return p}),n.d(e,"d",function(){return l}),n.d(e,"i",function(){return v}),n.d(e,"h",function(){return i});var i,r,o="storage",s="EXPIRES_IN",a=1e3,u="ROLES_MISSING",c="authenticateErrorHandler",f="business",h="https://business.tinkoff.ru/account?access=denied",d="/account?access=denied",p="https://www.tinkoff.ru/business/",l="https://business",v="redirectReason";(r=i=i||{}).VALIDATE_REQUEST_ERROR="validateReqError",r.NO_ROLES="noRoles",r.UNKNOWN="unknown"},function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"e",function(){return c});var i=n(0),r=n(1);function o(){return window.TCS||{}}function s(){var t=o();return t.ssoUrl?t.ssoUrl.replace("sso.tinkoff.ru","id.tinkoff.ru"):"https://id.tinkoff.ru"}function a(t){return(o().appName?"/"+Object(i.k)(o().appName):"")+"/"+t}function u(){return o().appName}function c(){return o().project===r.e||"account/appx"===u()||"account"===u()}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return f}),n.d(e,"d",function(){return h});var i=n(4),r=n(0),o=n(2),s="api/v1/session/authorize",a="none";function u(t,e){return void 0===e&&(e=c()),i.a.get(e).setHeaders("Accept","application/json").withCredentials(!0).send(t)}function c(){return Object(o.a)(s)}function f(){var t=c()+"?"+Object(r.a)({returnTo:Object(r.h)()});Object(r.i)(t)}function h(){var t=c()+"?"+Object(r.a)({prompt:"login"});Object(r.i)(t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0),r=(o.get=function(t){return new o(t,"GET")},o.post=function(t){return new o(t,"POST")},o.put=function(t){return new o(t,"PUT")},o.delete=function(t){return new o(t,"DELETE")},o.prototype.send=function(t,e,a){var u,c=this;void 0===a&&(a=[401]);var n=this.httpRequest,i=this.method,r=new Promise(function(o,s){n.addEventListener("load",function(t){var e=t.target,n=e.status,i=e.response,r=c.parseResponse(i);-1!==a.indexOf(n)||r&&!1===r.success||r.errorCode?s(r):(u&&clearTimeout(u),o(r))}),n.addEventListener("error",function(t){var e=t.target.response;s(c.parseResponse(e))})});return n.open(i,this.getRequestUrl(t),!0),this.applyHeaders(),n.send(t),e&&(u=setTimeout(function(){var t=new CustomEvent("error");n.dispatchEvent(t),n.abort()},e)),r},o.prototype.sendAsJSON=function(t){return this.setHeaders("Content-Type","application/json").send(JSON.stringify(t))},o.prototype.sendAsFormUrlEncoded=function(t){var e=Object(i.a)(t);return this.setHeaders("Content-Type","application/x-www-form-urlencoded").send(e.toString())},o.prototype.withCredentials=function(t){return this.httpRequest.withCredentials=t,this},o.prototype.setHeaders=function(t,e){return this.headers[t]=e,this},o.prototype.parseResponse=function(e){try{return JSON.parse(e)}catch(t){return e}},o.prototype.getRequestUrl=function(t){if("GET"!==this.method)return this.url;var e=!t||Object.keys(t).length<1?"":"?"+Object(i.a)(t);return this.url+e},o.prototype.applyHeaders=function(){for(var t in this.headers)if(this.headers.hasOwnProperty(t)){var e=this.headers[t];this.httpRequest.setRequestHeader(t,e)}},o);function o(t,e){this.url=t,this.method=e,this.httpRequest=new XMLHttpRequest,this.headers={}}},function(t,e,n){"use strict";n.d(e,"g",function(){return i}),n.d(e,"h",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return f}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d});var i="sessionValidateRequest",r="sessionValidateResponse",o="logoutRequest",s="logoutResponse",a="loginRequest",u="loginResponse",c="toLoginRequest",f="toLoginResponse",h="ssoAuthDataRequest",d="ssoAuthDataResponse"},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i="authErrorResponse",r="authParamsResponse"},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return o});var i="PROLONGATION_TOKEN_IN_PROGRESS",r=1e4,o=6e4},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i="sessionID"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"e",function(){return r}),n.d(e,"f",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return u});var i="appChanged",r="authorizeRequest",o="authComplete",s="authorizationStart",a="authorizationSuccess",u="authorizationFailed"},function(l,t,e){"use strict";(function(t){function e(t){var e,n,i,r,o,s,a=Object.create(null);if(this[f]=a,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),o=0,s=(r=t.split("&")).length;o<s;o++)-1<(e=(i=r[o]).indexOf("="))?h(a,d(i.slice(0,e)),d(i.slice(e+1))):i.length&&h(a,d(i),"");else if(u(t))for(o=0,s=t.length;o<s;o++)h(a,(i=t[o])[0],i[1]);else for(n in t)h(a,n,t[n])}var n,i,u=Array.isArray,r=e.prototype,o=/[!'\(\)~]|%20|%00/g,s=/\+/g,a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c=function(t){return a[t]},f="__URLSearchParams__:"+Math.random();function h(t,e,n){e in t?t[e].push(""+n):t[e]=u(n)?n:[""+n]}function d(t){return decodeURIComponent(t.replace(s," "))}function p(t){return encodeURIComponent(t).replace(o,c)}r.append=function(t,e){h(this[f],t,e)},r.delete=function(t){delete this[f][t]},r.get=function(t){var e=this[f];return t in e?e[t][0]:null},r.getAll=function(t){var e=this[f];return t in e?e[t].slice(0):[]},r.has=function(t){return t in this[f]},r.set=function(t,e){this[f][t]=[""+e]},r.forEach=function(n,i){var t=this[f];Object.getOwnPropertyNames(t).forEach(function(e){t[e].forEach(function(t){n.call(i,t,e,this)},this)},this)},r.toJSON=function(){return{}},r.toString=function(){var t,e,n,i,r=this[f],o=[];for(e in r)for(n=p(e),t=0,i=r[e];t<i.length;t++)o.push(n+"="+p(i[t]));return o.join("&")},e=l.exports=t.URLSearchParams||e,n=e.prototype,i=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),"forEach"in n||(n.forEach=function(n,i){var t=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(e){!e.length||e in t||(t[e]=this.getAll(e)).forEach(function(t){n.call(i,t,e,this)},this)},this)}),"keys"in n||(n.keys=function(){var n=[];this.forEach(function(t,e){n.push(e)});var t={next:function(){var t=n.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}),"values"in n||(n.values=function(){var e=[];this.forEach(function(t){e.push(t)});var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}),"entries"in n||(n.entries=function(){var n=[];this.forEach(function(t,e){n.push([e,t])});var t={next:function(){var t=n.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}),!i||Symbol.iterator in n||(n[Symbol.iterator]=n.entries),"sort"in n||(n.sort=function(){for(var t,e,n,i=this.entries(),r=i.next(),o=r.done,s=[],a=Object.create(null);!o;)e=(n=r.value)[0],s.push(e),e in a||(a[e]=[]),a[e].push(n[1]),o=(r=i.next()).done;for(s.sort(),t=0;t<s.length;t++)this.delete(s[t]);for(t=0;t<s.length;t++)e=s[t],this.append(e,a[e].shift())})}).call(this,e(10))},function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return a});var i=n(2),r="/api/authorization/validate",o="/api/authorization/authorize",s=Object(i.d)().ssoUrl,a=s+"/auth/frame/op.html"},function(t,e,n){"use strict";var d=n(3),p=n(0),h=n(6);function o(a,u,c,f){void 0===c&&(c=p.g),window.addEventListener("message",function(t){if("object"==typeof t.data){var e=t.data,n=e.messageCode,i=e.data;if(i&&n){var r=c(i),o=r.code,s=r.state;n===h.b&&s===a&&(u({code:o,state:s}),Object(p.j)(f))}}})}function l(i,r,o){window.addEventListener("message",function(t){if("object"==typeof t.data){var e=t.data.messageCode,n=t.data.data;e===h.a&&n.state===i&&(r(n.error),Object(p.j)(o))}})}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return g});var v="/common/auth/checkAuth.html";function i(s,a,t,e,n,i,u,c,f,h){void 0===e&&(e=Object(d.c)()),void 0===n&&(n=location.origin),void 0===i&&(i=d.b),void 0===u&&(u=m),void 0===c&&(c=o),void 0===f&&(f=l),void 0===h&&(h=g);var r={returnTo:n+v,prompt:d.f};t&&(r.authToken=t),i(r,e).then(function(t){var e=t.redirectUrl;if(e){var n=e.split("?")[1],i=Object(p.g)(n).state,r=h(e),o=Date.now().toString();c(i,s,void 0,o),f(i,a,o),u(r,o)}else Object(d.d)()})}function m(t,e){var n=Object(p.e)(t);n.id=e,Object(p.b)(n)}function g(t){var e=t.split("?"),n=e[0],i=e[1],r=Object(p.a)(i);return r.delete("display"),r.delete("response_mode"),r.set("redirect_on_error","true"),n+"?"+r.toString()}},function(E,_,k){(function(t,I){var C;!function(t){var e,n=t.Promise,i=n&&"resolve"in n&&"reject"in n&&"all"in n&&"race"in n&&(new n(function(t){e=t}),"function"==typeof e);_?(_.Promise=i?n:j,_.Polyfill=j):void 0===(C=function(){return i?n:j}.call(_,k,_,E))||(E.exports=C);function r(){}var o="pending",s="sealed",a="fulfilled",u="rejected";function c(t){return"[object Array]"===Object.prototype.toString.call(t)}var f,h=void 0!==I?I:setTimeout,d=[];function p(){for(var t=0;t<d.length;t++)d[t][0](d[t][1]);f=!(d=[])}function l(t,e){d.push([t,e]),f||(f=!0,h(p,0))}function v(t,e){function n(t){S(e,t)}try{t(function(t){y(e,t)},n)}catch(t){n(t)}}function m(t){var e=t.owner,n=e.state_,i=e.data_,r=t[n],o=t.then;if("function"==typeof r){n=a;try{i=r(i)}catch(t){S(o,t)}}g(o,i)||(n===a&&y(o,i),n===u&&S(o,i))}function g(e,n){var i;try{if(e===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var t=n.then;if("function"==typeof t)return t.call(n,function(t){i||(i=!0,(n!==t?y:b)(e,t))},function(t){i||(i=!0,S(e,t))}),1}}catch(t){return i||S(e,t),1}}function y(t,e){t!==e&&g(t,e)||b(t,e)}function b(t,e){t.state_===o&&(t.state_=s,t.data_=e,l(O,t))}function S(t,e){t.state_===o&&(t.state_=s,t.data_=e,l(T,t))}function w(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)m(e[n])}function O(t){t.state_=a,w(t)}function T(t){t.state_=u,w(t)}function j(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof j==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],v(t,this)}j.prototype={constructor:j,state_:o,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(r),fulfilled:t,rejected:e};return this.state_===a||this.state_===u?l(m,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},j.all=function(a){if(!c(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(n,t){var i=[],r=0;function e(e){return r++,function(t){i[e]=t,--r||n(i)}}for(var o,s=0;s<a.length;s++)(o=a[s])&&"function"==typeof o.then?o.then(e(s),t):i[s]=o;r||n(i)})},j.race=function(r){if(!c(r))throw new TypeError("You must pass an array to Promise.race().");return new this(function(t,e){for(var n,i=0;i<r.length;i++)(n=r[i])&&"function"==typeof n.then?n.then(t,e):t(n)})},j.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})},j.reject=function(n){return new this(function(t,e){e(n)})}}("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this)}).call(this,k(10),k(22).setImmediate)},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});var i=n(4),r=n(2),o="api/v1/session/ssoLogin";function s(t,e){return void 0===e&&(e=Object(r.a)(o)),i.a.get(e).withCredentials(!0).send(t).then(function(t){return t.result})}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var i=n(4),r=n(2),o=n(8),s="api/v1/session/validate";function a(t,e){void 0===t&&(t=Object(r.a)(s));var n=i.a.get(t).withCredentials(!0);return e&&n.setHeaders(o.a,e),n.send().then(function(t){return t.result})}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(1),r=n(7),o=(s.prototype.startUpdateTimer=function(t){var e=this;this.resetUpdateTimer();var n=Math.max(t*i.g-r.a,0);this.timer=setTimeout(function(){e.initTokenUpdate()},n)},s.prototype.resetUpdateTimer=function(){this.timer&&clearTimeout(this.timer)},s.prototype.reset=function(){this.resetUpdateTimer()},s);function s(){}},function(t,e,n){"use strict";var i=n(0),o=(r.prototype.init=function(t){this.frame=Object(i.e)(t),Object(i.b)(this.frame)},r.prototype.reset=function(){document.body&&document.body.contains(this.frame)&&document.body.removeChild(this.frame)},r.prototype.getFrame=function(){return this.frame},r);function r(){}function s(t){return"authSessionState["+t+"]"}var a=n(5),u=n(13),c=(f.prototype.initialize=function(){return!(!this.authClientId||!this.sessionState||(this.ssoOrigin?(this.saveSessionStateToCache(),this.stopSessionChecking(),this.initOpFrame(),this.initCheckSession(),0):(console.error("window.TCS должен содержать ssoUrl! Например: https://id.tinkoff.ru"),1)))},f.prototype.initWithSessionState=function(t){return!!t&&(this.sessionState=t,this.initialize())},f.prototype.initWithAuthClientId=function(t){return!!t&&(this.authClientId=t,this.sessionState=this.sessionState||this.getSessionStateFromCache(),this.initialize())},f.prototype.reset=function(){this.authClientId=null,this.sessionState=null,this.stopSessionChecking()},f.prototype.getSessionStateFromCache=function(){return localStorage.getItem(s(this.authClientId))||""},f.prototype.saveSessionStateToCache=function(){localStorage.setItem(s(this.authClientId),this.sessionState)},f.prototype.stopSessionChecking=function(){this.hiddenFrameService.reset(),null!==this.sessionCheckTimer&&(window.clearInterval(this.sessionCheckTimer),window.removeEventListener("message",this.onMessageFromOp,!1),this.sessionCheckTimer=null)},f.prototype.initOpFrame=function(){this.hiddenFrameService.init(this.opFrameUrl)},f.prototype.initCheckSession=function(){window.addEventListener("message",this.onMessageFromOp,!1),this.sessionCheckTimer=window.setInterval(this.checkSession,this.sessionCheckInterval)},f);function f(t,e,n,i){var r=this;void 0===e&&(e=u.c),void 0===n&&(n=u.b),void 0===i&&(i=3e3),this.onSessionChangedCallback=t,this.ssoOrigin=e,this.opFrameUrl=n,this.sessionCheckInterval=i,this.sessionCheckTimer=null,this.hiddenFrameService=new o,this.checkSession=function(){var t=r.authClientId+" "+r.sessionState;r.hiddenFrameService.getFrame().contentWindow.postMessage(t,r.ssoOrigin)},this.onMessageFromOp=function(t){t.origin===r.ssoOrigin&&"changed"===t.data&&(r.stopSessionChecking(),r.onSessionChangedCallback())}}var h=n(4),d=n(2),p=n(11);n.d(e,"a",function(){return l});var l=(v.prototype.authorize=function(){var n=this;this.validate().then(function(t){n.onAuthDataReceived(t);var e=n.sessionStatusChangeService.getSessionStateFromCache();n.sessionStatusChangeService.initWithSessionState(e)}).catch(function(){return n.authorizeInFrame()})},v.prototype.reset=function(){this.accessTokenService.reset(),this.sessionStatusChangeService.reset(),this.authData=null},v.prototype.onAuthDataReceived=function(t){var e=this;(this.authData=t)&&t.expires_in&&this.accessTokenService.initialize(t.expires_in,function(t){return e.authorizeInFrame(t)}),this.onAuthorizationSuccess(),this.sendAuthData(t)},v.prototype.sendAuthData=function(n){setTimeout(function(){var t={detail:n},e=new CustomEvent(a.j,t);window.dispatchEvent(e)})},v.prototype.onAuthDataRequest=function(){this.authData&&this.sendAuthData(this.authData)},v.prototype.logout=function(){return h.a.post(Object(d.c)()+"/auth/logout").withCredentials(!0).send()},v.prototype.updateAppInfo=function(t){this.setAppInfo(t),t.watchToSessionChange&&this.sessionStatusChangeService.initWithAuthClientId(t.authClientId)},v.prototype.onAuthorizationSuccess=function(){window.dispatchEvent(new CustomEvent(p.d))},v.prototype.onAuthorizationFailed=function(){this.appInfo.supportsUnauthorizedZone?window.dispatchEvent(new CustomEvent(p.b)):this.redirectToSSO()},v.prototype.setAppInfo=function(t){this.appInfo=t},v);function v(t){var e=this;this.appInfo=t,this.authFrameService=new o,this.onSessionStatusChanged=function(){e.accessTokenService.initTokenUpdate(!0)},this.sessionStatusChangeService=new c(this.onSessionStatusChanged),t.watchToSessionChange&&this.sessionStatusChangeService.initWithAuthClientId(t.authClientId)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(2),s=n(1),a=n(0);function i(t){var e;Object(o.d)().hasAuthenticateErrorHandler?Object(a.f)(t):(e=function(t){function e(t){return Object(a.c)(t,s.i,s.h.NO_ROLES)}var n=!!t&&t.errorCode===s.k,i=Object(o.e)(),r=0===window.location.href.indexOf(s.d);switch(!0){case n&&i:return e(s.c);case n&&r:return e(s.j);case n&&!r:return e(s.b);default:return Object(a.c)(s.c,s.i,function(t){var e=t&&t.requestId,n=t&&t.message,i=e||n;return"string"==typeof i?i:s.h.UNKNOWN}(t))}}(t),Object(a.i)(e))}},function(t,e,n){"use strict";var i,r=n(26),o=n(9),s=n(17),a=n(3),u=n(14),c=n(0),f=n(16),h=n(19),d=n(18),p=n(8),l=n(7),v=n(1),m=(i=d.a,Object(o.a)(g,i),g.prototype.initialize=function(t,e){this.initUpdateTokenFrame=function(){return e(!0)},this.startUpdateTimer(t),this.listenTokenUpdate()},g.prototype.reset=function(){i.prototype.reset.call(this),this.removeTokenUpdateListener()},g.prototype.initTokenUpdate=function(t){var e=this;void 0===t&&(t=!1);var n=localStorage.getItem(l.b);if(!t||!this.initUpdateTokenFrame)return n?void setTimeout(function(){localStorage.getItem(l.b)?e.initUpdateTokenFrame():e.startUpdateTimer(Number(localStorage.getItem(v.f)))},l.c):(localStorage.setItem(l.b,"true"),void this.initUpdateTokenFrame());this.initUpdateTokenFrame()},g.prototype.updateSessionInSidebar=function(t){var e=document.querySelector('[automation-id="sidebar-iframe"]');e&&e.contentWindow&&e.contentWindow.postMessage({messageCode:"authDataEvent",data:{user:t}},"*")},g.prototype.updateSessionInMessenger=function(t){var e=window["t-messenger"];e&&e.api&&e.api.updateSession&&e.api.updateSession(t.sessionId)},g.prototype.removeTokenUpdateListener=function(){window.removeEventListener(v.l,this.onTokenUpdateCallback)},g.prototype.listenTokenUpdate=function(){window.addEventListener(v.l,this.onTokenUpdateCallback)},g.prototype.onUpdateInAnotherTab=function(t){t.key===p.a&&this.startUpdateTimer(Number(localStorage.getItem(v.f)))},g);function g(){var t=null!==i&&i.apply(this,arguments)||this;return t.onTokenUpdateCallback=t.onUpdateInAnotherTab.bind(t),t}var y,b=n(6),S=n(20),w=(y=h.a,Object(o.a)(O,y),O.prototype.authorize=function(){this.resolveAuthentication()||y.prototype.authorize.call(this)},O.prototype.validate=function(){return Object(s.b)()},O.prototype.ssoLogin=function(t){return Object(f.b)(t)},O.prototype.authorizeInFrame=function(o,t){var s=this,e={returnTo:location.origin+"/common/auth/checkAuth.html",prompt:a.f};t&&(e.authToken=t),Object(a.b)(e,Object(a.c)()).then(function(t){var e=t.redirectUrl;if(e||s.appInfo.supportsUnauthorizedZone){var n=e.split("?")[1],i=Object(c.g)(n).state,r=Object(u.b)(e);s.listenAuthFrame(i,o),s.authFrameService.init(r)}else Object(a.d)()})},O.prototype.onAuthorized=function(t){var e=this,n=t.code,i=t.state;(n&&i?this.ssoLogin(t):Promise.reject(null)).then(function(t){return t.sessionId&&(localStorage.setItem(v.f,""+t.expires_in),Object(c.l)(t.sessionId)),t}).then(function(t){return e.onAuthDataReceived(t)}).catch(function(t){return Object(S.a)(t)})},O.prototype.redirectToSSO=function(){Object(a.e)()},O.prototype.reset=function(){y.prototype.reset.call(this),this.removeAuthFrameListener()},O.prototype.onTokenUpdate=function(t){var e=this;this.ssoLogin(t).then(function(t){localStorage.removeItem(l.b),localStorage.setItem(v.f,""+t.expires_in),Object(c.l)(t.sessionId),e.accessTokenService.updateSessionInSidebar(t),e.accessTokenService.updateSessionInMessenger(t),e.accessTokenService.startUpdateTimer(t.expires_in)})},O.prototype.listenAuthFrame=function(e,n){var i=this;this.removeAuthFrameListener(),this.authFrameListener=function(t){return i.onAuthFrameMessage(t,e,n)},window.addEventListener("message",this.authFrameListener)},O.prototype.removeAuthFrameListener=function(){window.removeEventListener("message",this.authFrameListener)},O.prototype.onAuthFrameMessage=function(t,e,n){if(t.data&&t.data.messageCode&&t.data.data){var i=t.data,r=i.messageCode,o=i.data;r===b.b&&Object(c.g)(o).state===e&&this.onAuthFrameSuccess(o,n),r===b.a&&o.state===e&&this.onAuthorizationFailed()}},O.prototype.onAuthFrameSuccess=function(t,e){var n=Object(c.g)(t),i=n.code,r=n.state,o=n.sessionState;this.sessionStatusChangeService.initWithSessionState(o),e?this.onTokenUpdate({code:i,state:r}):this.onAuthorized({code:i,state:r}),this.authFrameService.reset(),this.removeAuthFrameListener()},O.prototype.resolveAuthentication=function(){var t=Object(c.g)(),e=t.authToken,n=t.code,i=t.state,r=t.sessionState;return this.sessionStatusChangeService.initWithSessionState(r),e?(Object(c.d)(),this.authorizeInFrame(void 0,e),!0):!(!n||!i||(Object(c.d)(),this.onAuthorized({code:n,state:i}),0))},O);function O(t){var e=y.call(this,t)||this;return e.appInfo=t,e.accessTokenService=new m,e}n.d(e,"a",function(){return T});var T=(j.getInstance=function(t){return t.isNewSSO?new r.a(t):new w(t)},j);function j(){}},function(t,r,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}r.setTimeout=function(){return new i(n.call(setTimeout,e,arguments),clearTimeout)},r.setInterval=function(){return new i(n.call(setInterval,e,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(23),r.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(10))},function(t,e,n){(function(t,l){!function(n,i){"use strict";if(!n.setImmediate){var r,o,e,s,a=1,u={},c=!1,f=n.document,t=Object.getPrototypeOf&&Object.getPrototypeOf(n);t=t&&t.setTimeout?t:n,r="[object process]"==={}.toString.call(n.process)?function(t){l.nextTick(function(){d(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(s="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",p,!1):n.attachEvent("onmessage",p),function(t){n.postMessage(s+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(t){e.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):function(t){setTimeout(d,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[a]=i,r(a),a++},t.clearImmediate=h}function h(t){delete u[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{h(t),c=!1}}}}function p(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(10),n(24))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],f=!1,h=-1;function d(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!f){var t=a(d);f=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new l(t,e)),1!==c.length||f||a(p)},l.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,function(t,e,n){"use strict";var i,r=n(9),o=n(4),s=n(13),a=n(0),u=n(19),c=n(18),f=(i=c.a,Object(r.a)(h,i),h.prototype.initialize=function(t,e){this.initUpdateTokenFrame=function(){return e(!0)},this.startUpdateTimer(t)},h.prototype.initTokenUpdate=function(){this.initUpdateTokenFrame()},h);function h(){return null!==i&&i.apply(this,arguments)||this}var d=n(11),p=n(1),l=n(2);n.d(e,"a",function(){return m});var v,m=(v=u.a,Object(r.a)(g,v),Object.defineProperty(g.prototype,"apiPrefix",{get:function(){return this.appInfo.apiPrefix?this.isApiPrefixAbsolute?this.appInfo.apiPrefix:"/"+this.appInfo.apiPrefix:""},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"completeUri",{get:function(){var t=this.isApiPrefixAbsolute?this.apiPrefix:""+location.origin+this.apiPrefix;return Object(a.a)("complete_uri="+t+"/api/authorization/complete").toString()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"postCompleteUri",{get:function(){var t=this.isApiPrefixAbsolute?this.apiPrefix:location.origin;return Object(a.a)("post_complete_redirect_uri="+t+"/common/auth/complete.html").toString()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"redirectToSSOUri",{get:function(){var t=Object(a.a)("post_complete_redirect_uri="+encodeURIComponent(Object(a.h)())).toString();return""+this.apiPrefix+s.a+"?"+t+"&"+this.completeUri},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"validateUri",{get:function(){return""+this.apiPrefix+s.d},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"authorizeSrc",{get:function(){return""+this.apiPrefix+s.a+"?"+this.completeUri+"&"+this.postCompleteUri+"&prompt=none"},enumerable:!0,configurable:!0}),g.prototype.authorize=function(t){Object(a.d)(),v.prototype.authorize.call(this)},g.prototype.validate=function(){return o.a.get(this.validateUri).withCredentials(!0).send(void 0,null,[401,403])},g.prototype.redirectToSSO=function(){Object(a.i)(this.redirectToSSOUri)},g.prototype.authorizeInFrame=function(t){this.listenAuthFrame(t),this.authFrameService.init(this.authorizeSrc)},g.prototype.listenAuthFrame=function(e){var n=this;this.removeAuthFrameListener(),this.authFrameListener=function(t){return n.onAuthFrameMessage(t,e)},window.addEventListener("message",this.authFrameListener)},g.prototype.onAuthorized=function(){var e=this;this.validate().then(function(t){return e.onAuthDataReceived(t)}).catch(function(){return e.onValidateError()})},g.prototype.onAuthFrameMessage=function(t,e){var n=this,i=t.data;i&&i.data&&i.messageCode===d.f&&(this.authFrameService.reset(),i.data.success?(i.data.sessionState&&this.sessionStatusChangeService.initWithSessionState(i.data.sessionState),e?this.validate().then(function(t){return n.accessTokenService.startUpdateTimer(t.expires_in)}).catch(function(){return n.onValidateError()}):this.onAuthorized()):this.onAuthorizationFailed())},g.prototype.onValidateError=function(){if(!this.appInfo.supportsUnauthorizedZone)if(Object(l.d)().hasAuthenticateErrorHandler)Object(a.f)(new Error(p.h.VALIDATE_REQUEST_ERROR));else{var t=Object(l.e)()?p.c:p.b;Object(a.i)(Object(a.c)(t,p.i,p.h.VALIDATE_REQUEST_ERROR))}},g.prototype.removeAuthFrameListener=function(){window.removeEventListener("message",this.authFrameListener)},g);function g(t){var e=v.call(this,t)||this;return e.appInfo=t,e.isApiPrefixAbsolute=/^https?:\/\//i.test(e.appInfo.apiPrefix),e.accessTokenService=new f,e}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(11),r=n(21),o=(s.prototype.replaceClientService=function(t){this.clientService.reset(),this.clientService=r.a.getInstance(t),this.clientService.authorize()},s.prototype.handleAuthStart=function(){var o=this;window.addEventListener(i.c,function(t){var e=t.detail;if(e){var n=e.apiPrefix,i=e.isNewSSO,r=e.supportsUnauthorizedZone;o.appInfo={apiPrefix:n,isNewSSO:i,supportsUnauthorizedZone:r},o.replaceClientService(o.appInfo)}})},s);function s(t,e){this.appInfo=t,this.clientService=e,this.handleAuthStart()}},function(t,e,n){"use strict";var i=n(15);function r(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t),window.Promise||(window.Promise=i.Promise),function(){var n=this;"localStorage"in window||Object.defineProperty(window,"localStorage",{value:{_data:{},setItem:function(t,e){return n._data[t]=String(e)},getItem:function(t){return n._data.hasOwnProperty(t)?n._data[t]:void 0},removeItem:function(t){return delete n._data[t]},clear:function(){return n._data={}}}})}(),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})}n.d(e,"a",function(){return r})},,,,,function(t,e,n){"use strict";n.r(e);var i,r=n(28),o=n(9),s=n(27),a=n(26),u={apiPrefix:"",isNewSSO:!0},c=(i=s.a,Object(o.a)(f,i),f);function f(t,e){void 0===t&&(t=u),void 0===e&&(e=new a.a(t));var n=i.call(this,t,e)||this;return n.appInfo=t,n.clientService=e,n}Object(r.a)();new c}]);