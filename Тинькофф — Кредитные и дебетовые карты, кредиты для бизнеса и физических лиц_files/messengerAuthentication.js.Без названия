!function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([,function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(h,e,t){"use strict";(function(e){function t(e){var t,n,o,r,i,a,s=Object.create(null);if(this[f]=s,e)if("string"==typeof e)for("?"===e.charAt(0)&&(e=e.slice(1)),i=0,a=(r=e.split("&")).length;i<a;i++)-1<(t=(o=r[i]).indexOf("="))?l(s,d(o.slice(0,t)),d(o.slice(t+1))):o.length&&l(s,d(o),"");else if(u(e))for(i=0,a=e.length;i<a;i++)l(s,(o=e[i])[0],o[1]);else for(n in e)l(s,n,e[n])}var n,o,u=Array.isArray,r=t.prototype,i=/[!'\(\)~]|%20|%00/g,a=/\+/g,s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c=function(e){return s[e]},f="__URLSearchParams__:"+Math.random();function l(e,t,n){t in e?e[t].push(""+n):e[t]=u(n)?n:[""+n]}function d(e){return decodeURIComponent(e.replace(a," "))}function p(e){return encodeURIComponent(e).replace(i,c)}r.append=function(e,t){l(this[f],e,t)},r.delete=function(e){delete this[f][e]},r.get=function(e){var t=this[f];return e in t?t[e][0]:null},r.getAll=function(e){var t=this[f];return e in t?t[e].slice(0):[]},r.has=function(e){return e in this[f]},r.set=function(e,t){this[f][e]=[""+t]},r.forEach=function(n,o){var e=this[f];Object.getOwnPropertyNames(e).forEach(function(t){e[t].forEach(function(e){n.call(o,e,t,this)},this)},this)},r.toJSON=function(){return{}},r.toString=function(){var e,t,n,o,r=this[f],i=[];for(t in r)for(n=p(t),e=0,o=r[t];e<o.length;e++)i.push(n+"="+p(o[e]));return i.join("&")},t=h.exports=e.URLSearchParams||t,n=t.prototype,o=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),"forEach"in n||(n.forEach=function(n,o){var e=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(t){!t.length||t in e||(e[t]=this.getAll(t)).forEach(function(e){n.call(o,e,t,this)},this)},this)}),"keys"in n||(n.keys=function(){var n=[];this.forEach(function(e,t){n.push(t)});var e={next:function(){var e=n.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}),"values"in n||(n.values=function(){var t=[];this.forEach(function(e){t.push(e)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}),"entries"in n||(n.entries=function(){var n=[];this.forEach(function(e,t){n.push([t,e])});var e={next:function(){var e=n.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}),!o||Symbol.iterator in n||(n[Symbol.iterator]=n.entries),"sort"in n||(n.sort=function(){for(var e,t,n,o=this.entries(),r=o.next(),i=r.done,a=[],s=Object.create(null);!i;)t=(n=r.value)[0],a.push(t),t in s||(s[t]=[]),s[t].push(n[1]),i=(r=o.next()).done;for(a.sort(),e=0;e<a.length;e++)this.delete(a[e]);for(e=0;e<a.length;e++)t=a[e],this.append(t,s[t].shift())})}).call(this,t(1))},function(C,P,I){(function(e,O){var R;!function(e){var t,n=e.Promise,o=n&&"resolve"in n&&"reject"in n&&"all"in n&&"race"in n&&(new n(function(e){t=e}),"function"==typeof t);P?(P.Promise=o?n:S,P.Polyfill=S):void 0===(R=function(){return o?n:S}.call(P,I,P,C))||(C.exports=R);function r(){}var i="pending",a="sealed",s="fulfilled",u="rejected";function c(e){return"[object Array]"===Object.prototype.toString.call(e)}var f,l=void 0!==O?O:setTimeout,d=[];function p(){for(var e=0;e<d.length;e++)d[e][0](d[e][1]);f=!(d=[])}function h(e,t){d.push([e,t]),f||(f=!0,l(p,0))}function m(e,t){function n(e){T(t,e)}try{e(function(e){g(t,e)},n)}catch(e){n(e)}}function v(e){var t=e.owner,n=t.state_,o=t.data_,r=e[n],i=e.then;if("function"==typeof r){n=s;try{o=r(o)}catch(e){T(i,e)}}w(i,o)||(n===s&&g(i,o),n===u&&T(i,o))}function w(t,n){var o;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var e=n.then;if("function"==typeof e)return e.call(n,function(e){o||(o=!0,(n!==e?g:y)(t,e))},function(e){o||(o=!0,T(t,e))}),1}}catch(e){return o||T(t,e),1}}function g(e,t){e!==t&&w(e,t)||y(e,t)}function y(e,t){e.state_===i&&(e.state_=a,e.data_=t,h(E,e))}function T(e,t){e.state_===i&&(e.state_=a,e.data_=t,h(_,e))}function b(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)v(t[n])}function E(e){e.state_=s,b(e)}function _(e){e.state_=u,b(e)}function S(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof S==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],m(e,this)}S.prototype={constructor:S,state_:i,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(r),fulfilled:e,rejected:t};return this.state_===s||this.state_===u?h(v,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},S.all=function(a){if(!c(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(n,e){var o=[],r=0;for(var t,i=0;i<a.length;i++)(t=a[i])&&"function"==typeof t.then?t.then(function(t){return r++,function(e){o[t]=e,--r||n(o)}}(i),e):o[i]=t;r||n(o)})},S.race=function(r){if(!c(r))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,t){for(var n,o=0;o<r.length;o++)(n=r[o])&&"function"==typeof n.then?n.then(e,t):e(n)})},S.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},S.reject=function(n){return new this(function(e,t){t(n)})}}("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this)}).call(this,I(1),I(4).setImmediate)},function(e,r,i){(function(e){var t=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new o(n.call(setTimeout,t,arguments),clearTimeout)},r.setInterval=function(){return new o(n.call(setInterval,t,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(t,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(5),r.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(1))},function(e,t,n){(function(e,h){!function(n,o){"use strict";var r,i,a,s,u,c,t,f,e;function l(e){delete i[e]}function d(e){if(a)setTimeout(d,0,e);else{var t=i[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(o,n)}}(t)}finally{l(e),a=!1}}}}function p(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(f)&&d(+e.data.slice(f.length))}n.setImmediate||(r=1,a=!(i={}),s=n.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&e.setTimeout?e:n,u="[object process]"==={}.toString.call(n.process)?function(e){h.nextTick(function(){d(e)})}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?(f="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",p,!1):n.attachEvent("onmessage",p),function(e){n.postMessage(f+e,"*")}):n.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){t.port2.postMessage(e)}):s&&"onreadystatechange"in s.createElement("script")?(c=s.documentElement,function(e){var t=s.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t)}):function(e){setTimeout(d,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return i[r]=o,u(r),r++},e.clearImmediate=l)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(1),n(6))},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,c=[],f=!1,l=-1;function d(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=s(d);f=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var o,r=1e3;(o={}).VALIDATE_REQUEST_ERROR="validateReqError",o.NO_ROLES="noRoles",o.UNKNOWN="unknown";var i,a,s,u,c=6e4,f="USER_NOT_MIGRATED",l="AUTH_SUCCESS",d="AUTH_ERROR",p=["app=bank","app=invest"];(a=i=i||{}).TmsgPlatformUserResponse="tmsg-platform-user-response",a.TmsgPlatformUserRequest="tmsg-platform-user-request",a.TmsgUrlResponse="tmsg-url-response",a.TmsgUrlRequest="tmsg-url-request",(u=s=s||{}).Platform="app/bank",u.Invest="app/invest",u.HrRabota="app/hr_rabota",u.EmployeeSupport="app/employee_support",u.Default="app/default";var h="messengerInitEvent",m=1800,v=!1,w=!1,g=null,y=null;function T(){v&&_(),w=!0}function b(e){v=!0,y=e,window.parent.postMessage({messageCode:l,data:e},"*"),function(e){g&&clearTimeout(g);g=setTimeout(function(){clearTimeout(g),window.authorizeMessenger()},0<e*r-c?e*r-c:0)}(e&&e.expires_in||m),w&&_()}function E(){window.parent.postMessage({messageCode:d},"*")}function _(){var e=new CustomEvent(h,{detail:y});window.dispatchEvent(e)}var S=n(3);var O=n(2),R="sessionID";function C(e){if("string"==typeof e||!e){var t=e&&"?"===e[0]?e.substr(1):e;return new O(t)}var n=new O;for(var o in e)e.hasOwnProperty(o)&&n.append(o,e[o]);return n}function P(){var e,t=((e=C(location.search)).delete("authToken"),e.delete("code"),e.delete("state"),e.delete("session_state"),e.toString());return t?"?"+t:""}function I(e){window.location.replace(e)}function j(){var e=window.location.pathname+P();window.history.replaceState({},"",e)}function k(e){void 0===e&&(e=location.search);var t=C(e);return{authToken:t.get("authToken"),code:t.get("code"),state:t.get("state"),sessionState:t.get("session_state")}}function x(e){var t=document.getElementById(e);t&&t.remove()}function L(){return window.TCS||{}}function M(e){return(L().appName?"/"+(L().appName||"").replace(/^\/|\/$/g,""):"")+"/"+e}function A(){return L().appName}var U=(q.get=function(e){return new q(e,"GET")},q.post=function(e){return new q(e,"POST")},q.put=function(e){return new q(e,"PUT")},q.delete=function(e){return new q(e,"DELETE")},q.prototype.send=function(e,t,s){var u,c=this;void 0===s&&(s=[401]);var n=this.httpRequest,o=this.method,r=new Promise(function(i,a){n.addEventListener("load",function(e){var t=e.target,n=t.status,o=t.response,r=c.parseResponse(o);-1!==s.indexOf(n)||r&&!1===r.success||r.errorCode?a(r):(u&&clearTimeout(u),i(r))}),n.addEventListener("error",function(e){var t=e.target.response;a(c.parseResponse(t))})});return n.open(o,this.getRequestUrl(e),!0),this.applyHeaders(),n.send(e),t&&(u=setTimeout(function(){var e=new CustomEvent("error");n.dispatchEvent(e),n.abort()},t)),r},q.prototype.sendAsJSON=function(e){return this.setHeaders("Content-Type","application/json").send(JSON.stringify(e))},q.prototype.sendAsFormUrlEncoded=function(e){var t=C(e);return this.setHeaders("Content-Type","application/x-www-form-urlencoded").send(t.toString())},q.prototype.withCredentials=function(e){return this.httpRequest.withCredentials=e,this},q.prototype.setHeaders=function(e,t){return this.headers[e]=t,this},q.prototype.parseResponse=function(t){try{return JSON.parse(t)}catch(e){return t}},q.prototype.getRequestUrl=function(e){if("GET"!==this.method)return this.url;var t=!e||Object.keys(e).length<1?"":"?"+C(e);return this.url+t},q.prototype.applyHeaders=function(){for(var e in this.headers){var t;this.headers.hasOwnProperty(e)&&(t=this.headers[e],this.httpRequest.setRequestHeader(e,t))}},q);function q(e,t){this.url=e,this.method=t,this.httpRequest=new XMLHttpRequest,this.headers={}}var N="api/v1/session/ssoLogin";function H(e,t){return void 0===t&&(t=M(N)),U.get(t).withCredentials(!0).send(e).then(function(e){return e.result})}var D="api/v1/session/authorize",F="none";function z(e,t){return void 0===t&&(t=J()),U.get(t).setHeaders("Accept","application/json").withCredentials(!0).send(e)}function J(){return M(D)}var W="authErrorResponse",$="authParamsResponse";function B(s,u,c,f){void 0===c&&(c=k),window.addEventListener("message",function(e){var t,n,o,r,i,a;"object"==typeof e.data&&(n=(t=e.data).messageCode,(o=t.data)&&n&&(i=(r=c(o)).code,a=r.state,n===$&&a===s&&(u({code:i,state:a}),x(f))))})}function G(o,r,i){window.addEventListener("message",function(e){var t,n;"object"==typeof e.data&&(t=e.data.messageCode,n=e.data.data,t===W&&n.state===o&&(r(n.error),x(i)))})}var Y="/common/auth/checkAuth.html";function K(i,a,e,t,n,o,s,u,c,f){void 0===t&&(t=J()),void 0===n&&(n=location.origin),void 0===o&&(o=z),void 0===s&&(s=Q),void 0===u&&(u=B),void 0===c&&(c=G),void 0===f&&(f=V);var r={returnTo:n+Y,prompt:F};e&&(r.authToken=e),o(r,t).then(function(e){var t,n,o,r=e.redirectUrl;r?(t=k(r.split("?")[1]).state,n=f(r),o=Date.now().toString(),u(t,i,void 0,o),c(t,a,o),s(n,o)):I(J()+"?"+C({prompt:"login"}))})}function Q(e,t){var n,o,r,i=(n=e,(o=document.createElement("iframe")).style.width="0px",o.style.height="0px",o.style.position="absolute",o.style.left="-4000px",o.src=n,o);i.id=t,r=i,document.body?document.body.appendChild(r):document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(r)})}function V(e){var t=e.split("?"),n=t[0],o=C(t[1]);return o.delete("display"),o.delete("response_mode"),o.set("redirect_on_error","true"),n+"?"+o.toString()}var X,Z,ee,te,ne="api/v1/session/validate";function oe(){var o,t=(o=H,function(e){var t=e.code,n=e.state;(t&&n?o(e):Promise.reject(null)).then(b).catch(function(e){return re(e,function(){_()})})});window.authorizeMessenger=function(){K(t,b)},function(e,t,n,o){void 0===n&&(n=K);var r=void 0===o?k():o,i=r.authToken,a=r.code,s=r.state;return i?(j(),n(e,t,i),1):a&&s&&(j(),e({code:a,state:s}),1)}(t,b)||function(e,t){void 0===e&&(e=M(ne));var n=U.get(e).withCredentials(!0);return t&&n.setHeaders(R,t),n.send().then(function(e){return e.result})}().then(function(e){e?b(e):K(t,b)}).catch(function(e){return re(e,function(){K(t,b)})})}function re(e,t){e&&e.errorCode===f?window.parent.postMessage({messageCode:f,data:e},"*"):t()}function ie(n){window.addEventListener("message",function e(t){t.data&&t.data.messageCode===i.TmsgPlatformUserResponse&&(window.authorizeMessenger=function(){ae(n,t.data.data)},ae(n,t.data.data).then(function(e){b(e)}).catch(function(e){return re(e,E)}),window.removeEventListener("message",e))}),window.parent.postMessage({messageCode:i.TmsgPlatformUserRequest},"*")}function ae(e,t){var n=t||{},o=e.match("app[/=](.*)")[1];return U.post("/app/"+o+"/api/v1/session/issueTokenByWEBIMWeb").sendAsJSON(n).then(function(e){return e.result})}function se(e){switch(e){case s.Platform:case s.Invest:case s.HrRabota:case s.EmployeeSupport:ie(e);break;case s.Default:!function(){if(window.parent!==window)return window.addEventListener("message",function e(t){var n,o;t.data&&t.data.messageCode===i.TmsgUrlResponse&&(o=(n=t.data.data.match("app=[a-zA-Z]+"))&&n[0],-1!==p.indexOf(o)?ie(o):oe(),window.removeEventListener("message",e))}),window.parent.postMessage({messageCode:i.TmsgUrlRequest},"*");oe()}();break;default:oe()}}function ue(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}(Z=X=X||{}).Sso="sso",Z.Webim="webim","function"!=typeof window.CustomEvent&&(ue.prototype=window.Event.prototype,window.CustomEvent=ue),window.Promise||(window.Promise=S.Promise),function(){var n=this;"localStorage"in window||Object.defineProperty(window,"localStorage",{value:{_data:{},setItem:function(e,t){return n._data[e]=String(t)},getItem:function(e){return n._data.hasOwnProperty(e)?n._data[e]:void 0},removeItem:function(e){return delete n._data[e]},clear:function(){return n._data={}}}})}(),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),window.addEventListener("ssoAuthDataRequest",T),ee=A(),(te=L().authSystem||null)?function(e,t){switch(e){case X.Sso:oe();break;case X.Webim:ie(t);break;default:se(t)}}(te,ee):se(ee)}]);